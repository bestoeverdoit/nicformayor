YUI.add("tictac-smartviews-rollups",function(a){a.namespace("Tictac.smartviews.rollups"),a.Tictac.smartviews.rollups.systemcontainer=a.Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<li id="system-app"><ul id="system-app-list"></ul></li>'}),a.Tictac.smartviews.rollups.smartviews_onboarding=a.Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div id="smartviewsOnboarding" class="convstooltip yui3-tooltips" style="width: 265px;">    <div class="tooltip-arrow-left" style="left: -9px; top: 11px; border-right: 10px solid #0654FC;; border-left-width: 0px; border-top: 10px solid transparent; border-bottom: 10px solid transparent;">        <div class="inner-arrow" style="border-right: 9px solid #fff; border-top: 9px solid transparent; border-bottom: 9px solid transparent; bottom: -9px; right: -10px;"></div>    </div>    <div class="modal tooltips-text" style="width: 265px; padding: 11px 20px 17px 20px; border: 1px solid #0078ff; box-sizing: border-box;">        <div class="modal-bd" style="padding: 0; padding-bottom: 11px;">            <div class="hd" style="font-size: 16px; font-weight: 700; margin-bottom: 7px;">                Smart filters for your email            </div>            <div class="bd" style="line-height: 16px;">                Automatic categories in <b>Smart Views</b> help you find your emails fast.            </div>        </div>        <div class="modal-ft" style="padding: 0;">            <button style="font-size: 12px; line-height: 12px; height: 25px; padding: 0; margin: 0; min-width: 50px; box-shadow: none;" class="btn left right default" data-action="ok">Got it</button>        </div>    <div></div>'}),a.Tictac.smartviews.rollups.view=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return'data-custom="true"'}function g(a,b){return'        <span class="icon icon-close listnav-item" title="Remove">        </span>    '}function h(a,b){var d,e="";return e+='        <span class="icon icon-settings listnav-item" title="',(d=c.smartviews_title_settings)?d=d.call(a,{hash:{},data:b}):(d=a.smartviews_title_settings,d=typeof d===k?d.apply(a):d),e+=l(d)+'">        </span>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return j+='<li role="presentation"    class="btn-apps"    data-id="',(i=c.viewId)?i=i.call(b,{hash:{},data:e}):(i=b.viewId,i=typeof i===k?i.apply(b):i),j+=l(i)+'"    ',i=c.if.call(b,b.custom,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+=">    ",i=c.if.call(b,b.custom,{hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e}),(i||0===i)&&(j+=i),j+="    ",i=c.if.call(b,b.settings,{hash:{},inverse:m.noop,fn:m.program(5,h,e),data:e}),(i||0===i)&&(j+=i),j+='    <a class="listnav-item btn"       href="#"       tabindex="-1"       title="',(i=c.title)?i=i.call(b,{hash:{},data:e}):(i=b.title,i=typeof i===k?i.apply(b):i),j+=l(i)+'">        ',(i=c.label)?i=i.call(b,{hash:{},data:e}):(i=b.label,i=typeof i===k?i.apply(b):i),j+=l(i)+"    </a></li>"}),a.Tictac.smartviews.rollups.container=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"display:none;"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j=this,k="function",l=c.blockHelperMissing;return i+='<li id="smartviews" class="openable nav-open" style="',h={hash:{},inverse:j.noop,fn:j.program(1,f,e),data:e},(g=c.is_hidden)?g=g.call(b,h):(g=b.is_hidden,g=typeof g===k?g.apply(b):g),c.is_hidden||(g=l.call(b,g,h)),(g||0===g)&&(i+=g),i+='">    <a class="section-title x-gap btn" href="#" aria-expanded="true" role="button" title="Click to hide Smart Views">        <span class="listnav-toggle icon"></span>        <span class="icon-text">Smart Views</span>    </a><ul id="smartviews-app-list" class="listnav-container" role="presentation"></ul></li>'})},"1.0.0",{requires:["handlebars-base"]});YUI.add("tictac-smartviews-strings",function(a){a.namespace("Tictac.smartviews").strings={str_smartviews_hide:"Click to hide Smart Views",str_smartviews_settings:"Settings",str_smartviews_show:"Click to show Smart Views",last:null}},"1.0.0");"use strict";YUI.add("tictac-base-formatter",function(a){var b={"default":{decimal:".",delimiter:","},ar:{decimal:",",delimiter:"."},"ar-AE":{decimal:",",delimiter:"."},"ar-BH":{decimal:",",delimiter:"."},"ar-DZ":{decimal:",",delimiter:"."},"ar-EG":{decimal:",",delimiter:"."},"ar-IQ":{decimal:",",delimiter:"."},"ar-JO":{decimal:",",delimiter:"."},"ar-KW":{decimal:",",delimiter:"."},"ar-LB":{decimal:",",delimiter:"."},"ar-LY":{decimal:",",delimiter:"."},"ar-MA":{decimal:",",delimiter:"."},"ar-OM":{decimal:",",delimiter:"."},"ar-QA":{decimal:",",delimiter:"."},"ar-SA":{decimal:",",delimiter:"."},"ar-SD":{decimal:",",delimiter:"."},"ar-SY":{decimal:",",delimiter:"."},"ar-TN":{decimal:",",delimiter:"."},"ar-YE":{decimal:",",delimiter:"."},bg:{decimal:",",delimiter:" "},"bg-BG":{decimal:",",delimiter:" "},bn:{decimal:".",delimiter:","},"bn-BD":{decimal:".",delimiter:","},"bn-IN":{decimal:".",delimiter:","},cs:{decimal:",",delimiter:" "},"cs-CZ":{decimal:",",delimiter:" "},da:{decimal:",",delimiter:"."},"da-DK":{decimal:",",delimiter:"."},de:{decimal:",",delimiter:"."},"de-AT":{decimal:",",delimiter:"."},"de-CH":{decimal:",",delimiter:"."},"de-DE":{decimal:",",delimiter:"."},el:{decimal:",",delimiter:"."},"el-GR":{decimal:",",delimiter:"."},en:{decimal:".",delimiter:","},"en-AU":{decimal:".",delimiter:","},"en-CA":{decimal:".",delimiter:","},"en-GB":{decimal:".",delimiter:","},"en-IE":{decimal:".",delimiter:","},"en-IN":{decimal:".",delimiter:","},"en-JO":{decimal:".",delimiter:","},"en-MY":{decimal:".",delimiter:","},"en-NZ":{decimal:".",delimiter:","},"en-PH":{decimal:".",delimiter:","},"en-SG":{decimal:".",delimiter:","},"en-US":{decimal:".",delimiter:","},"en-ZA":{decimal:".",delimiter:","},es:{decimal:",",delimiter:"."},"es-AR":{decimal:",",delimiter:"."},"es-CL":{decimal:",",delimiter:"."},"es-CO":{decimal:",",delimiter:"."},"es-ES":{decimal:",",delimiter:"."},"es-MX":{decimal:",",delimiter:"."},"es-PE":{decimal:",",delimiter:"."},"es-US":{decimal:",",delimiter:"."},"es-VE":{decimal:",",delimiter:"."},et:{decimal:",",delimiter:" "},"et-EE":{decimal:",",delimiter:" "},fi:{decimal:",",delimiter:" "},"fi-FI":{decimal:",",delimiter:" "},fil:{decimal:".",delimiter:","},"fil-PH":{decimal:".",delimiter:","},fr:{decimal:",",delimiter:" "},"fr-BE":{decimal:",",delimiter:" "},"fr-CA":{decimal:",",delimiter:" "},"fr-CH":{decimal:",",delimiter:" "},"fr-FR":{decimal:",",delimiter:" "},gu:{decimal:".",delimiter:","},"gu-IN":{decimal:".",delimiter:","},he:{decimal:".",delimiter:","},"he-IL":{decimal:".",delimiter:","},hi:{decimal:".",delimiter:","},"hi-IN":{decimal:".",delimiter:","},hr:{decimal:",",delimiter:"."},"hr-HR":{decimal:",",delimiter:"."},hu:{decimal:",",delimiter:" "},"hu-HU":{decimal:",",delimiter:" "},id:{decimal:",",delimiter:"."},"id-ID":{decimal:",",delimiter:"."},it:{decimal:",",delimiter:"."},"it-CH":{decimal:",",delimiter:"."},"it-IT":{decimal:",",delimiter:"."},kn:{decimal:".",delimiter:","},"kn-IN":{decimal:".",delimiter:","},ko:{decimal:".",delimiter:","},"ko-KR":{decimal:".",delimiter:","},lt:{decimal:".",delimiter:","},"lt-LT":{decimal:".",delimiter:","},lv:{decimal:",",delimiter:" "},"lv-LV":{decimal:",",delimiter:" "},ml:{decimal:".",delimiter:","},"ml-IN":{decimal:".",delimiter:","},mr:{decimal:".",delimiter:","},"mr-IN":{decimal:".",delimiter:","},ms:{decimal:".",delimiter:","},"ms-MY":{decimal:".",delimiter:","},nb:{decimal:",",delimiter:" "},"nb-NO":{decimal:",",delimiter:" "},nl:{decimal:",",delimiter:"."},"nl-BE":{decimal:",",delimiter:"."},"nl-NL":{decimal:",",delimiter:"."},pl:{decimal:",",delimiter:" "},"pl-PL":{decimal:",",delimiter:" "},pt:{decimal:",",delimiter:"."},"pt-BR":{decimal:",",delimiter:"."},"pt-PT":{decimal:",",delimiter:"."},ro:{decimal:",",delimiter:"."},"ro-RO":{decimal:",",delimiter:"."},ru:{decimal:",",delimiter:" "},"ru-RU":{decimal:",",delimiter:" "},sk:{decimal:",",delimiter:" "},"sk-SK":{decimal:",",delimiter:" "},sl:{decimal:",",delimiter:"."},"sl-SI":{decimal:",",delimiter:"."},sr:{decimal:",",delimiter:"."},"sr-Cyrl":{decimal:",",delimiter:"."},"sr-Cyrl-RS":{decimal:",",delimiter:"."},sv:{decimal:",",delimiter:" "},"sv-SE":{decimal:",",delimiter:" "},ta:{decimal:".",delimiter:","},"ta-IN":{decimal:".",delimiter:","},te:{decimal:".",delimiter:","},"te-IN":{decimal:".",delimiter:","},th:{decimal:".",delimiter:","},"th-TH":{decimal:".",delimiter:","},tr:{decimal:",",delimiter:"."},"tr-TR":{decimal:",",delimiter:"."},uk:{decimal:",",delimiter:" "},"uk-UA":{decimal:",",delimiter:" "},ur:{decimal:".",delimiter:","},"ur-PK":{decimal:".",delimiter:","},vi:{decimal:",",delimiter:"."},"vi-VN":{decimal:",",delimiter:"."},zh:{decimal:".",delimiter:","},"zh-Hans":{decimal:".",delimiter:","},"zh-Hans-CN":{decimal:".",delimiter:","},"zh-Hant":{decimal:".",delimiter:","},"zh-Hant-HK":{decimal:".",delimiter:","},"zh-Hant-TW":{decimal:".",delimiter:","},last:null},c={"default":"%m/%d/%Y",ar:"%Y/%m/%d","ar-AE":"%Y/%m/%d","ar-BH":"%Y/%m/%d","ar-DZ":"%Y/%m/%d","ar-EG":"%Y/%m/%d","ar-IQ":"%Y/%m/%d","ar-JO":"%Y/%m/%d","ar-KW":"%Y/%m/%d","ar-LB":"%Y/%m/%d","ar-LY":"%Y/%m/%d","ar-MA":"%Y/%m/%d","ar-OM":"%Y/%m/%d","ar-QA":"%Y/%m/%d","ar-SA":"%Y/%m/%d","ar-SD":"%Y/%m/%d","ar-SY":"%Y/%m/%d","ar-TN":"%Y/%m/%d","ar-YE":"%Y/%m/%d",bg:"%d.%m.%Y","bg-BG":"%d.%m.%Y",bn:"%d/%m/%Y","bn-BD":"%d/%m/%Y","bn-IN":"%d/%m/%Y",cs:"%d.%m.%Y","cs-CZ":"%d.%m.%Y",da:"%d/%m/%Y","da-DK":"%d/%m/%Y",de:"%d.%m.%Y","de-AT":"%d.%m.%Y","de-CH":"%d.%m.%Y","de-DE":"%d.%m.%Y",el:"%d/%m/%Y","el-GR":"%d/%m/%Y",en:"%m/%d/%Y","en-AU":"%d/%m/%Y","en-CA":"%Y-%m-%d","en-GB":"%d/%m/%Y","en-IE":"%d/%m/%Y","en-IN":"%d/%m/%Y","en-JO":"%d/%m/%Y","en-MY":"%d/%m/%Y","en-NZ":"%d/%m/%Y","en-PH":"%m/%d/%Y","en-SG":"%d/%m/%Y","en-US":"%m/%d/%Y","en-ZA":"%Y/%m/%d",es:"%d/%m/%Y","es-AR":"%d/%m/%Y","es-CL":"%d-%m-%Y","es-CO":"%d/%m/%Y","es-ES":"%d/%m/%Y","es-MX":"%d/%m/%Y","es-PE":"%d/%m/%Y","es-US":"%m/%d/%Y","es-VE":"%d/%m/%Y",et:"%d.%m.%Y","et-EE":"%d.%m.%Y",fi:"%d.%m.%Y","fi-FI":"%d.%m.%Y",fil:"%m/%d/%Y","fil-PH":"%m/%d/%Y",fr:"%d/%m/%Y","fr-BE":"%d/%m/%Y","fr-CA":"%Y-%m-%d","fr-CH":"%d.%m.%Y","fr-FR":"%d/%m/%Y",gu:"%d-%m-%Y","gu-IN":"%d-%m-%Y",he:"%d/%m/%Y","he-IL":"%d/%m/%Y",hi:"%d-%m-%Y","hi-IN":"%d-%m-%Y",hr:"%d. %m. %Y.","hr-HR":"%d. %m. %Y.",hu:"%Y.%m.%d.","hu-HU":"%Y.%m.%d.",id:"%d/%m/%Y","id-ID":"%d/%m/%Y",it:"%d/%m/%Y","it-CH":"%d.%m.%Y","it-IT":"%d/%m/%Y",kn:"%d-%m-%Y","kn-IN":"%d-%m-%Y",ko:"%Y. %m. %d.","ko-KR":"%Y. %m. %d.",lt:"%Y-%m-%d","lt-LT":"%Y-%m-%d",lv:"%d.%m.%Y","lv-LV":"%d.%m.%Y",ml:"%d/%m/%Y","ml-IN":"%d/%m/%Y",mr:"%d-%m-%Y","mr-IN":"%d-%m-%Y",ms:"%Y-%m-%d","ms-MY":"%Y-%m-%d",nb:"%d.%m.%Y","nb-NO":"%d.%m.%Y",nl:"%d-%m-%Y","nl-BE":"%d/%m/%Y","nl-NL":"%d-%m-%Y",pl:"%d-%m-%Y","pl-PL":"%d-%m-%Y",pt:"%d/%m/%Y","pt-BR":"%d/%m/%Y","pt-PT":"%d/%m/%Y",ro:"%d.%m.%Y","ro-RO":"%d.%m.%Y",ru:"%d.%m.%Y","ru-RU":"%d.%m.%Y",sk:"%d.%m.%Y","sk-SK":"%d.%m.%Y",sl:"%d. %m. %Y","sl-SI":"%d. %m. %Y",sr:"%d.%m.%Y.","sr-Cyrl":"%d.%m.%Y.","sr-Cyrl-RS":"%d.%m.%Y.",sv:"%Y-%m-%d","sv-SE":"%Y-%m-%d",ta:"%d-%m-%Y","ta-IN":"%d-%m-%Y",te:"%d-%m-%Y","te-IN":"%d-%m-%Y",th:"%d/%m/%Y","th-TH":"%d/%m/%Y",tr:"%d.%m.%Y","tr-TR":"%d.%m.%Y",uk:"%d.%m.%Y","uk-UA":"%d.%m.%Y",ur:"%d/%m/%Y","ur-PK":"%d/%m/%Y",vi:"%d/%m/%Y","vi-VN":"%d/%m/%Y",zh:"%Y-%m-%d","zh-Hans":"%Y-%m-%d","zh-Hans-CN":"%Y-%m-%d","zh-Hant":"%Y/%m/%d","zh-Hant-HK":"%Y/%m/%d","zh-Hant-TW":"%Y/%m/%d",last:null};a.namespace("Tictac.base").formatter={getNumberConfig:function(a){var c;return b.hasOwnProperty(a)?b[a]:(c=this.getBaseLang(a),b.hasOwnProperty(c)?b[c]:b.default)},getDateConfig:function(a){var b;return c.hasOwnProperty(a)?c[a]:(b=this.getBaseLang(a),c.hasOwnProperty(b)?c[b]:c.default)},getBaseLang:function(a){var b=a.match(/(.+)-x-(.+)/i);return b&&b[1]?b[1]:a},getFormattedDate:function(a,b,c,d){var e;return b=b.toString(),c=c.toString(),1===b.length&&(b="0"+b),1===c.length&&(c="0"+c),e=this.getDateConfig(d),e.replace("%Y",a).replace("%m",b).replace("%d",c)}}});YUI.add("tictac-base-strings",function(a){a.namespace("Tictac.base").strings={str_cancel:"Cancel",str_comp_font_size_attr:"Select a font size",str_conv_dialog_alert:"Alert",str_conv_dialog_confirm:"Confirm",str_notepad:"Notepad",str_ok:"OK",str_rte_font_arial_attr:"Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif",str_rte_font_bookman_attr:"bookman old style, new york, times, serif",str_rte_font_classic:"Classic",str_rte_font_classicwide:"Classic wide",str_rte_font_courier_attr:"Courier New, courier, monaco, monospace, sans-serif",str_rte_font_courier:"Courier New",str_rte_font_garamond_attr:"garamond, new york, times, serif",str_rte_font_garamond:"Garamond",str_rte_font_huge:"Huge",str_rte_font_large:"Large",str_rte_font_lucida_attr:"lucida console, sans-serif",str_rte_font_lucida:"Lucida Console",str_rte_font_medium:"Medium",str_rte_font_modern:"Modern",str_rte_font_modernwide:"Modern wide",str_rte_font_small:"Small",str_rte_font_times_attr:"times new roman, new york, times, serif",str_rte_font_tiny:"Tiny",str_rte_font_verdana_attr:"verdana, helvetica, sans-serif",str_rte_font_xlarge:"X-Large",str_size_bytes:"{{size}}B",str_size_gb:"{{size}}GB",str_size_kb:"{{size}}KB",str_size_mb:"{{size}}MB",last:null}},"1.0.0");"use strict";YUI.add("tictac-base-utils",function(a){a.namespace("Tictac.base").utils={deentitize:function(a){var b=a.replace(/&gt;/g,">");return b=b.replace(/&lt;/g,"<"),b=b.replace(/&quot;/g,'"'),b=b.replace(/&apos;/g,"'"),b=b.replace(/&#x27;/g,"'"),b=b.replace(/&amp;/g,"&")},subs:function(){var a,b=arguments[0];if(2===arguments.length){var c=arguments[1];for(a in c)c.hasOwnProperty(a)&&(b=b.replace("{{"+a+"}}",c[a]))}else if(3===arguments.length){var d=arguments[2];a=arguments[1],b=b.replace("{{"+a+"}}",d)}return b},getPrettySize:function(b,c){var d,e=b,f=0,g="str_tictac_att_size_bytes",h=a.Tictac.base,i=h.formatter,j=NeoConfig.lang||"en-US";for(d=h.isRTL?i.getNumberConfig("en-US"):i.getNumberConfig(j);e>=1024&&3>f;)e/=1024,f++;e=e.toFixed(1).toString();var k=e.split(".");switch((k[1]&&"0"===k[1]||c)&&(e=k[0]),e=e.replace(".","%dec%").replace(",","%del%"),e=e.replace("%del%",d.delimiter),e=e.replace("%dec%",d.decimal),f){case 1:g="str_tictac_att_size_kb";break;case 2:g="str_tictac_att_size_mb";break;case 3:g="str_tictac_att_size_gb"}return{value:e,label:g}},getWindowSize:function(){var a,b,c=document.body.scrollTop,d=document.body.scrollHeight;return a=window,b="inner","innerWidth"in window||(b="client",a=document.documentElement||document.body),{height:a[b+"Height"],width:a[b+"Width"],scrollTop:c,scrollHeight:d}},getSize:function(b,c){var d=this.getPrettySize(b,c);return this.subs(a.Tictac.base.strings[d.label.replace("_tictac_att_","_")],{size:d.value})},getVal:function(a,b,c){for(var d=b.split("."),e=0,f=d.length;f>e;e++){var g=d[e];if(!(null!==a&&"object"==typeof a&&g in a))return c;a=a[g]}return a},hasTictacModule:function(b){var c=a.Tictac.base.utils,d="config.groups.tictacs.modules."+b;return!!c.getVal(a,d)},log:function(){window.console&&window.console.log||a.each(arguments,function(b){a.log(b)})},parseJSON:function(b){var c=a.Tictac.base.utils.log;if(!b)return c("parseJSON got null str"),null;try{return a.JSON.parse(b)}catch(d){return c("JSON parse failure",d,b),null}},verify:function(b,c){if(!b)throw a.Tictac.base.utils.log(c),c},transitionEndEventName:function(){var a,b=document.createElement("fakeelement"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"};for(a in c)if(a in b.style)return c[a]}}},"1.0.0",{requires:["tictac-base-formatter","json","tictac-base-strings"]});"use strict";YUI.add("tictac-base-mailpreferences",function(a){a.namespace("Tictac.base").mailpreferences=function(){var b=window.yui.mail.persist.MetaData,c=a.Tictac.base.utils;return{get:function(a,d){a=d?d+a:a;var e=b.get(a),f=e;return"false"===e?!1:"true"===e?!0:("object"==typeof e&&e.json&&(e=c.parseJSON(e.json),null===e&&f.json!==e&&(this.set(a,void 0,d),this.save())),e)},set:function(c,d,e){return c=e?e+c:c,"undefined"!=typeof d&&(d===!1?d="false":d===!0?d="true":d instanceof Array&&(d={json:a.JSON.stringify(d)})),b.set(c,d),this},save:function(a){return b.save(a)}}}()},"@VERSION@",{requires:["mail-persist-meta-data","json","tictac-base-utils"]});"use strict";YUI.add("tictac-smartviews-controller",function(a){var b,c=a.Tictac.smartviews.rollups,d=a.Tictac.smartviews.strings,e=a.Tictac.base.mailpreferences;b={_entryQueue:[],_appQueue:[],init:function(b,c){var f,g=this,h=e.get("smartviewsCollapsedViews");g._appListNode=b,g._systemAppListNode=c,g._isInit||(g._appListNode&&("undefined"==typeof h?e.set("smartviewsCollapsedViews",!1):h&&(f=g._appListNode.one("a"),g._appListNode.removeClass("nav-open"),f.set("title",d.str_smartviews_show),f.set("aria-expanded",!1))),g.bindEvents(),g._isInit=!0,a.Array.each(g._appQueue,function(a){g.insertView(a)}))},addAppView:function(a,b,d,e){var f;return this.prepare(),f=yui.Node.create(c.view({viewId:a,label:b,title:b,custom:!!e})),f.setData("name",b),this.insertView(f),f},addView:function(a){return this.prepare(),a.node=yui.Node.create(c.view({viewId:a.viewId||a.name,label:a.name,title:a.title||a.name,custom:!!a.custom||"custom"===a.type,system:"system"===a.type,settings:!!a.settings,smartviews_title_settings:a.settingsTitle||d.str_smartviews_settings})),a.node.setData("name",a.name),this.insertView(a),a.node},insertView:function(b){var c,d=this;d._isInit?(c="system"===b.type?d._systemAppListNode.one("ul#system-app-list"):d._appListNode.one("ul#smartviews-app-list"),c.append(b.node),d._appListNode&&d._appListNode.setStyle("display",""),"simple-important"===b.viewId&&b.settings&&a.use("tictac-important",function(a){a.Tictac.important.launcher()})):d._appQueue.push(b)},revealView:function(a){var b;this._appListNode&&(this.setOpen(),b=this._appListNode.one('[data-id="'+a+'"]'),b.scrollIntoView())},updateView:function(a){var b=this._systemAppListNode.one('[data-id="'+a.viewId+'"]');b.one("a").set("title",a.name).set("text",a.name)},renameView:function(b){function c(){var a=i.get("value").replace(/(\s|^)(in:|is:|has:)(?="[^"]+"|'[^']+'|\S+)|(<|=|:|>)/g," ").trim();a&&a!==h&&0!==a.trim().length&&(g.set("title",a).set("text",a),b.setData("name",a),b.fire("rename",a)),d()}function d(){b.removeClass("smartview-edit"),i.remove(),a.Array.each(f,function(a){a.detach()}),window.removeEventListener("click",e,!0)}function e(a){a.target!==i.getDOMNode()&&c()}var f=[],g=b.one("a"),h=b.getData("name"),i=a.Node.create('<input type="text" id="saved-search-rename"></input>').set("value",h).setStyles({position:"fixed","z-index":1e4,top:g.getY(),left:g.getX()+10,width:g.get("offsetWidth")-10});f.push(i.on("keydown",function(a){switch(a.keyCode){case 13:c();break;case 27:d()}a.stopPropagation()})),window.addEventListener("click",e,!0),b.addClass("smartview-edit"),a.one("body").append(i),i.focus(),i.getDOMNode().setSelectionRange(0,h.length)},removeView:function(a){var b,c,d;if(this._appListNode&&(b=this._appListNode.one('[data-id="'+a+'"]')),b)b.remove();else for(c=0;this._entryQueue&&c<this._entryQueue.length;c++)d=this._entryQueue[c],d.viewId===a&&this._entryQueue.splice(c,1);return b},hideView:function(a){var b,c,d;if(this._appListNode&&(b=this._appListNode.one('[data-id="'+a+'"]')),b)b.setStyle("display","none");else for(c=0;this._entryQueue&&c<this._entryQueue.length;c++)d=this._entryQueue[c],d.viewId===a&&(d.is_hidden=!0);return b},createTab:function(b){return b.widget||(b.widget=new a.mail.ui.BaseWidget),b.hideToolbar&&(b.widget.set("hideToolbar",!0),b.forcePane=!0),b.hideNavbar&&(b.widget.set("hideNavbar",!0),b.forcePane=!0),void 0!==b.noDefault&&(b.noDefault=!0),void 0!==b.sync&&(b.sync=!0),a.mail.ui.Workspace.addContentWidget(b)},isOpen:function(){return this._appListNode.hasClass("nav-open")},setOpen:function(){this.isOpen()||this._appListNode.one("a").getDOMNode().click()},bindEvents:function(){var b=this,c=a.one("#storm-listnav"),f=".folder, .sysfolder, .btn-apps",g="selected";return b.prepare(),b._appListNode?(b._appListNode.setAttribute("data-posIdx",0),b._appListNode.delegate("keydown",function(d){var e,h,i=1*b._appListNode.getAttribute("data-posIdx"),j=a.all("#smartviews a")._nodes,k=j[i],l=d.keyCode,m=d.currentTarget;40===l?i<j.length-1&&(k.setAttribute("tabindex",-1),i+=1,e=j[i],e.setAttribute("tabindex",0),e.focus()):38===l?i>0&&(k.setAttribute("tabindex",-1),i-=1,h=j[i],h.setAttribute("tabindex",0),h.focus()):13===l&&(c.all(f).removeClass(g),k.setAttribute("tabindex",0),m.get("parentNode").addClass(g)),b._appListNode.setAttribute("data-posIdx",i)},"a"),b._appListNode.one("a").on("click",function(){var a=b._appListNode.one("a"),c=b.isOpen();yui.fire("mt:click",{action:"toggle_smartviews_"+(c?"collapse":"expand")}),c?(b._appListNode.removeClass("nav-open"),a.set("title",d.str_smartviews_show),a.set("aria-expanded",!1),e.set("smartviewsCollapsedViews",!0)):(b._appListNode.addClass("nav-open"),a.set("title",d.str_smartviews_hide),a.set("aria-expanded",!0),e.set("smartviewsCollapsedViews",!1))}),b._appListNode.delegate("click",function(a){var b=a.currentTarget,d=b.ancestor("[data-id]");return c.all(f).removeClass(g),b.get("parentNode").addClass(g),d.fire("launch"),a.halt(),!1},"li a"),b._systemAppListNode.delegate("click",function(a){var b=a.currentTarget,d=b.ancestor("[data-id]");return c.all(f).removeClass(g),b.get("parentNode").addClass(g),d.fire("launch"),a.halt(),!1},"li a"),b._appListNode.delegate("dblclick",function(a){var c=a.currentTarget,d=c.ancestor("[data-id]"),e=d.hasAttribute("data-custom");return e&&b.renameView(d),a.halt(),!1},"li a"),b._appListNode.delegate("click",function(a){var c=a.currentTarget,d=c.ancestor("[data-id]"),e=d.getAttribute("data-id");return b.removeView(e),d.fire("remove"),a.halt(),!1},"li .icon-close"),b._appListNode.delegate("click",function(a){var b=a.currentTarget,c=b.ancestor("[data-id]"),d=c.getAttribute("data-id");return yui.fire(d+":settings"),!1},"li .icon-settings"),b._systemAppListNode.delegate("click",function(a){var b=a.currentTarget,c=b.ancestor("[data-id]"),d=c.getAttribute("data-id");return yui.fire(d+":settings"),!1},"li .icon-settings"),void b._appListNode.addClass("smartviews-launched")):!1},prepare:function(){a.Tictac.smartviews.on||a.augment(a.Tictac.smartviews,a.EventTarget)}},a.mix(a.Tictac.smartviews,b)},"1.0.0",{requires:["tictac-smartviews","tictac-smartviews-rollups","mail-common-utils-features","event-custom","tictac-smartviews-strings","tictac-base-mailpreferences","tictac-smartviews-css","escape"]});