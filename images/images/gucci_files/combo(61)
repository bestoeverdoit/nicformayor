require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d='.document-grid,.link-grid,.message-list-group,.message-list-toolbar,.photo-grid,.srp-header-main{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.business-card .xfooter .contact-menu-btn{background-color:transparent;background-repeat:no-repeat;border:none;cursor:pointer;overflow:hidden;outline:0}.document-grid,.link-grid,.message-list-group,.message-list-toolbar,.photo-grid,.srp-header-main{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.business-card .xfooter .contact-menu-btn{background-color:transparent;background-repeat:no-repeat;border:none;cursor:pointer;overflow:hidden;outline:0}.is-me-2-me .srp-filters-origin{display:none}.srp-header{background:#FFF}.srp-header-main{border:18px solid transparent;border-top-width:9px;border-bottom-width:9px;-moz-box-sizing:border-box;box-sizing:border-box;font-size:16px;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:pre-line;height:50px;width:100%}.srp-header-main>*{display:inline-block;margin:0 10px 0 0;vertical-align:middle}.srp-filters-type,.srp-header-refine{margin-right:20px}.srp-header-spellcorrect{border-bottom:1px solid #D8D8D8;-moz-box-sizing:border-box;box-sizing:border-box;height:31px;padding:7px 18px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.srp-filters-origin button,.srp-filters-type button{background:0 0;border:1px solid #D8DADE;color:#7C7C7C;font-size:13px;line-height:30px;outline:0;padding:0 10px;position:relative}.srp-filters-origin button:first-child,.srp-filters-type button:first-child{border-top-left-radius:3px;border-bottom-left-radius:3px}.srp-filters-origin button:last-child,.srp-filters-type button:last-child{border-top-right-radius:3px;border-bottom-right-radius:3px}.srp-filters-origin button:focus,.srp-filters-origin button:hover,.srp-filters-type button:focus,.srp-filters-type button:hover{background-color:#FAFAFA}.srp-filters-origin button[aria-pressed=true],.srp-filters-origin button[aria-pressed=true]:focus,.srp-filters-origin button[aria-pressed=true]:hover,.srp-filters-type button[aria-pressed=true],.srp-filters-type button[aria-pressed=true]:focus,.srp-filters-type button[aria-pressed=true]:hover{background-color:#D8D8D8;border:1px solid #C3C5C8;color:#323232;font-weight:600;line-height:29px;padding-bottom:1px;pointer-events:none}.srp-filters-origin button[disabled],.srp-filters-type button[disabled]{font-weight:600;border:1px solid #C3C5C8;color:rgba(65,65,65,.3)}.srp-filters-origin button:after,.srp-filters-type button:after{color:transparent;content:attr(aria-label);display:block;font-weight:600;line-height:0;overflow:hidden;visibility:hidden}.srp-filters-origin button,.srp-filters-type button{margin:0;vertical-align:middle;background-color:transparent}.srp-filters-origin button:not(:first-child),.srp-filters-type button:not(:first-child){margin-left:-1px}.srp-filters-origin button::-moz-focus-inner,.srp-filters-type button::-moz-focus-inner{border:0;padding:0}.srp-filters-origin button:active,.srp-filters-type button:active{background:#FFF}.srp-header-refine,.srp-save-smartview{display:inline-block;color:#0078FF;cursor:pointer;font-size:13px}.srp-save-search-disabled{font-size:13px;color:rgba(50,50,50,.3);cursor:not-allowed}.srp-header-results{margin-right:20px}.did-you-mean-label,.srp-header-results{font-size:13px}.did-you-mean-items{display:inline;position:relative;top:3.5px}.did-you-mean-items .ui-token{font-size:14px;margin-right:10px}.did-you-mean-items>*{display:inline-block;vertical-align:top}.document-grid,.link-grid,.message-list-group,.message-list-toolbar,.photo-grid,.srp-header-main{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.business-card .xfooter .contact-menu-btn{background-color:transparent;background-repeat:no-repeat;border:none;cursor:pointer;overflow:hidden;outline:0}.search-message-container-ad{background:#fafaff;border-bottom:0;color:#000;height:auto;line-height:1.5}.search-message-container-ad:active,.search-message-container-ad:focus,.search-message-container-ad:hover{background:#f2f2f2}.search-message-container-ad.search-ad-hover-highlight:active,.search-message-container-ad.search-ad-hover-highlight:focus,.search-message-container-ad.search-ad-hover-highlight:hover{background:#e6e6e6}.search-message-container-ad:hover .search-ad-favicon-toggle{visibility:visible}.search-message-container-ad .search-ad-favicon-toggle{visibility:hidden}.search-message-container-ad.search-ad-no-ratings .message-date{width:215px}@media all and (max-width:1100px){.search-message-container-ad.search-ad-no-ratings .message-date{width:184px}}@media all and (min-width:1500px){.search-message-container-ad.search-ad-no-ratings .message-date{width:250px}}.search-message-container-ad .message-sender{padding-left:7px}.search-message-container-ad .message-sender,.search-message-container-ad .message-subject .message-subject-text{font-weight:700}.search-message-container-ad .message-subject{margin-left:4px}.search-message-container-ad .message-date,.search-message-container-ad .message-sender,.search-message-container-ad .message-snippet,.search-message-container-ad .message-subject-text{vertical-align:middle}.search-message-container-ad .icon-sponsored,.search-message-container-ad .search-ad-favicon{display:inline-block;vertical-align:middle}.search-message-container-ad .search-ad-favicon{background-repeat:no-repeat;background-position:center;background-size:16px;margin-left:23px;height:16px;width:16px}.search-message-container-ad .icon-sponsored{padding:0;width:21px;-webkit-transform:translateX(-3px);-moz-transform:translateX(-3px);transform:translateX(-3px)}.search-message-container-ad .message-date{width:76px}.search-message-container-ad.flip-ad-and-rating .message-date{width:106px}@media all and (max-width:1100px){.search-message-container-ad .avg-rating{width:108px}}@media all and (min-width:1500px){.search-message-container-ad .avg-rating{width:174px}}.search-message-container-ad .avg-rating{font-size:13px;line-height:inherit;width:139px}.search-message-container-ad .avg-rating[data-rating="0.5"] .icon-star:first-of-type::before,.search-message-container-ad .avg-rating[data-rating="1.5"] .icon-star:nth-of-type(2)::before,.search-message-container-ad .avg-rating[data-rating="2.5"] .icon-star:nth-of-type(3)::before,.search-message-container-ad .avg-rating[data-rating="3.5"] .icon-star:nth-of-type(4)::before,.search-message-container-ad .avg-rating[data-rating="4.5"] .icon-star:last-of-type::before{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQwIiBoZWlnaHQ9IjQ4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Zz48cmVjdCBpZD0ic3ZnXzEiIGhlaWdodD0iNDgwLjAwMDAxNyIgd2lkdGg9IjMyMC4wMDAwMDkiIHk9Ii0wLjAwMDAxNyIgeD0iMCIgc3Ryb2tlLXdpZHRoPSIwIiBzdHJva2U9IiMwMDAwMDAiIGZpbGw9IiNmZWI0MjUiLz48cmVjdCBpZD0ic3ZnXzIiIGhlaWdodD0iNDgwLjAwMDAxNyIgd2lkdGg9IjMyMC4wMDAwMjkiIHk9Ii0wLjAwMDAxNyIgeD0iMzE5LjQ5OTk4IiBzdHJva2Utd2lkdGg9IjAiIHN0cm9rZT0iIzAwMDAwMCIgZmlsbD0iI2Q3ZDdkNyIvPjwvZz48L3N2Zz4=) center/cover no-repeat;background:-webkit-linear-gradient(left,#FEB425 50%,#D7D7D7 50%);background:-moz-linear-gradient(left,#FEB425 50%,#D7D7D7 50%);background:linear-gradient(to right,#FEB425 50%,#D7D7D7 50%)}.search-message-container-ad .avg-rating[data-rating="4"] .icon-star:last-of-type::before,.search-message-container-ad .avg-rating[data-rating="0.5"] .icon-star::before,.search-message-container-ad .avg-rating[data-rating="1.5"] .icon-star:nth-of-type(n+3)::before,.search-message-container-ad .avg-rating[data-rating="2.5"] .icon-star:nth-of-type(n+4)::before,.search-message-container-ad .avg-rating[data-rating="3.5"] .icon-star:last-of-type::before,.search-message-container-ad .avg-rating[data-rating="0"] .icon-star::before,.search-message-container-ad .avg-rating[data-rating="1"] .icon-star:nth-of-type(n+2)::before,.search-message-container-ad .avg-rating[data-rating="2"] .icon-star:nth-of-type(n+3)::before,.search-message-container-ad .avg-rating[data-rating="3"] .icon-star:nth-of-type(n+4)::before{background:#D7D7D7}.search-message-container-ad .avg-rating .icon-star{display:inline-block;font-size:14px;margin-right:2px;padding:0;vertical-align:middle}.search-message-container-ad .avg-rating .icon-star::before{background:#FEB425;border-radius:2px;color:#FFF}.document-grid,.link-grid,.message-list-group,.message-list-toolbar,.photo-grid,.srp-header-main{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.business-card .xfooter .contact-menu-btn{background-color:transparent;background-repeat:no-repeat;border:none;cursor:pointer;overflow:hidden;outline:0}.photo-grid{border-top:1px solid #F2F2F2;padding:20px}.photo-results-inside-thumbnail{position:absolute;top:0;left:0;width:100%;height:100%}.photo-results-inside-thumbnail .image-with-fallback{position:absolute;top:0;left:0;z-index:500;width:100%;height:100%;background-size:cover;background-repeat:no-repeat;background-position:center center}.photo-results-inside-thumbnail .fallback.image-with-fallback{z-index:100}.srp-right-image-overlay{height:96px;width:96px;position:absolute;top:0;right:0;background-color:#26282A;z-index:1000;opacity:.03}.photo-grid-item{display:inline-block;float:left;height:112px;margin:0 8px 8px 0;width:112px}.photo-grid-item.active .photo-overlay,.photo-grid-item:focus .photo-overlay,.photo-grid-item:hover .photo-overlay{bottom:0;z-index:1000;visibility:visible}.photo-grid-item,.photo-right-rail-item{background-position:center;background-repeat:no-repeat;background-size:cover;background-color:#EEE;cursor:pointer;position:relative;overflow:hidden}.photo-overlay-icons{background-color:rgba(0,0,0,.5);bottom:0;color:#fff;font-family:mail;font-size:16px;padding:3px;position:absolute;text-align:center}.photo-overlay-icons.icon-download{right:0}.photo-overlay-icons.icon-mail-inbox{right:24px}.photo-overlay{background-color:rgba(0,0,0,.75);bottom:-62px;color:#fff;font-size:12px;height:42px;left:0;padding:8px 10px 10px;position:absolute;right:0;text-shadow:1px 1px 0 #000;-webkit-transition:all .25s ease-in-out;-moz-transition:all .25s ease-in-out;transition:all .25s ease-in-out;visibility:hidden}.photo-overlay p{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-align:left}.photo-grid-items::after,.photo-right-rail-items::after{content:"";clear:both;display:table}.photos-right-rail-wrapper .photo-right-rail-items{width:306px;-moz-box-sizing:border-box;box-sizing:border-box;margin-bottom:4px;overflow:hidden;height:96px}.photos-right-rail-wrapper .photo-right-rail-item{float:left;margin:0 6px 0 0;width:96px;height:96px}.photos-right-rail-wrapper .photo-right-rail-item:nth-child(4n+4){margin-right:0}.document-grid,.link-grid,.message-list-group,.message-list-toolbar,.photo-grid,.srp-header-main{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.business-card .xfooter .contact-menu-btn{background-color:transparent;background-repeat:no-repeat;border:none;cursor:pointer;overflow:hidden;outline:0}.document-grid{padding:20px}.document-grid-item{border-bottom:1px solid #fff;cursor:pointer;padding-left:75px;margin-right:100px;position:relative;height:75px}.document-grid-item.active .searchresult-document-download,.document-grid-item.active .searchresult-document-name,.document-grid-item:focus .searchresult-document-download,.document-grid-item:focus .searchresult-document-name,.document-grid-item:hover .searchresult-document-download,.document-grid-item:hover .searchresult-document-name{background-color:#f7f9fa!important}.searchresult-document-name{background-color:#fff;border-bottom:1px solid #f2f2f2;color:#000;display:inline-block;font-size:13px;width:100%}.searchresult-document-name>*{display:inline-block;float:left;font-size:13px;height:75px}.searchresult-document-name .file-name-size{width:40%}.searchresult-document-name .file-subject-date{width:60%}.searchresult-document-name .file-name-size>*,.searchresult-document-name .file-subject-date>*{display:block;overflow:hidden;padding-left:10px;text-align:left;text-overflow:ellipsis;white-space:nowrap;height:auto}.searchresult-document-name .file-name-size .file-name,.searchresult-document-name .file-name-size .file-subject,.searchresult-document-name .file-subject-date .file-name,.searchresult-document-name .file-subject-date .file-subject{font-weight:700;margin-top:22.5px;margin-bottom:2px}.searchresult-document-name .file-name-size .file-date,.searchresult-document-name .file-name-size .file-size,.searchresult-document-name .file-subject-date .file-date,.searchresult-document-name .file-subject-date .file-size{color:grey;margin-bottom:22.5px}.searchresult-document-name .searchresult-document-icon-large{background-color:#f2f2f2;position:absolute;left:0;top:0;width:75px}.searchresult-document-name .searchresult-document-icon-large .document-icon{background-image:url(https://s.yimg.com/nq/srp/4/srp/srp_docs_icons_48px.png);position:absolute;left:13.5px;top:13.5px;height:48px;width:48px}.document-icon{background:url(https://s.yimg.com/nq/srp/4/srp/srp_docs_icons_36px.png);background-position:center 0;background-repeat:no-repeat;background-size:cover;border-bottom:0;display:inline-block}.document-icon[data-type=pdf],.document-icon[data-type="application/pdf"]{background-position:0 -70px}.document-icon[data-type="vnd.openxmlformats-officedocument.presentationml.presentation"],.document-icon[data-type="vnd.ms-powerpoint"]{background-position:0 -140px}.document-icon[data-type="application/vnd.google-apps.document"]{background-position:0 -771px}.document-icon[data-type="application/vnd.google-apps.spreadsheet"]{background-position:0 -842px}.document-icon[data-type="application/vnd.google-apps.presentation"]{background-position:0 -912px}.document-icon[data-type="vnd.openxmlformats-officedocument.spreadsheetml.sheet"],.document-icon[data-type="vnd.ms-excel"]{background-position:0 -210px}.document-icon[data-type="vnd.openxmlformats-officedocument.wordprocessingml.document"],.document-icon[data-type=msword]{background-position:0 -280px}.document-icon[data-type=mp4],.document-icon[data-type=x-flv],.document-icon[data-type=quicktime],.document-icon[data-type=x-m4v],.document-icon[data-type="vnd.rn-realmedia"]{background-position:0 -420px}.document-icon[data-type=mpeg],.document-icon[data-type=aiff],.document-icon[data-type=wav],.document-icon[data-type=x-m4a]{background-position:0 -490px}.document-icon[data-type=zip],.document-icon[data-type=octet-stream],.document-icon[data-type=x-apple-diskimage],.document-icon[data-type=x-rar-compressed]{background-position:0 -560px}.document-icon[data-type=csv]{background-position:0 -630px}.searchresult-document-download{background-color:#fff;border-bottom:1px solid #f2f2f2;display:inline-block;line-height:35px;padding:20px 0;position:absolute;text-align:right;width:100px;height:35px}.searchresult-document-download>*{color:#464E56;font-size:15px;padding:10px 15px;position:relative}.searchresult-document-download>:focus,.searchresult-document-download>:hover{color:#000}.searchresult-document-download>:active{opacity:.75}.searchresult-document-download>:last-child{padding-right:20px}.searchresult-document-download>:last-child::after{background-color:#B9BDC5;content:\'\';margin-top:-5px;position:absolute;left:0;top:50%;height:10px;width:1px}.documents-right-rail-wrapper .document-right-rail-item{border-bottom:solid 1px rgba(0,0,0,.08);-moz-box-sizing:border-box;box-sizing:border-box;cursor:pointer;line-height:36px;margin:0 0 2px;padding-left:54px;padding-right:80px;position:relative;height:36px}.documents-right-rail-wrapper .document-icon{border-bottom:0;display:inline-block;position:absolute;left:0;height:36px;width:36px}.documents-right-rail-wrapper .document-name{color:#000;display:inline-block;font-size:13px;overflow:hidden;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%}.documents-right-rail-wrapper .document-date{color:grey;display:inline-block;font-weight:400;font-size:12px;overflow:hidden;position:absolute;right:0;top:0;text-align:right;text-overflow:ellipsis;white-space:nowrap;width:70px}.document-grid,.link-grid,.message-list-group,.message-list-toolbar,.photo-grid,.srp-header-main{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.business-card .xfooter .contact-menu-btn{background-color:transparent;background-repeat:no-repeat;border:none;cursor:pointer;overflow:hidden;outline:0}.link-grid{padding:15px}.link-grid-item{position:relative;cursor:pointer;line-height:16px}.link-grid-item.active .link-result-summary,.link-grid-item:focus .link-result-summary,.link-grid-item:hover .link-result-summary{background-color:#f7f9fa!important}.link-grid-item.active .link-preview-box,.link-grid-item:focus .link-preview-box,.link-grid-item:hover .link-preview-box{background-color:#FFF}.link-grid-item:last-child .link-result-summary{border:none}.link-result-summary{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;background-color:#fff;border-bottom:1px solid #f2f2f2;color:#000;font-size:13px;padding:5px 0}.link-result-summary>*{display:inline-block;font-size:13px;height:80px;overflow:hidden}.link-result-summary .link-preview-box{-webkit-flex-basis:355px;-ms-flex-preferred-size:355px;flex-basis:355px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;font-family:Georgia,Times,\'Times New Roman\',serif;font-size:12px;line-height:14px;background-color:#FBFBFC;overflow:hidden;-moz-box-sizing:border-box;box-sizing:border-box;color:inherit;cursor:inherit;border:1px solid transparent}.link-result-summary .link-preview-box:active,.link-result-summary .link-preview-box:hover{border:1px solid #D8DADE}.link-result-summary .link-preview-box>*{padding-left:15px}.link-result-summary .link-preview-box>*,.link-result-summary .link-result-subject-snippet-date>*{display:block;overflow:hidden;padding-right:15px;text-align:left;text-overflow:ellipsis;white-space:nowrap;height:auto}.link-result-summary .link-preview-box .link-result-description,.link-result-summary .link-preview-box .link-result-snippet,.link-result-summary .link-preview-box .link-result-view-on-url,.link-result-summary .link-result-subject-snippet-date .link-result-description,.link-result-summary .link-result-subject-snippet-date .link-result-snippet,.link-result-summary .link-result-subject-snippet-date .link-result-view-on-url{color:grey}.link-result-summary .link-preview-box .link-result-date,.link-result-summary .link-preview-box .link-result-view-on-url,.link-result-summary .link-result-subject-snippet-date .link-result-date,.link-result-summary .link-result-subject-snippet-date .link-result-view-on-url{font-size:12px}.link-result-summary .link-preview-box .link-result-snippet,.link-result-summary .link-result-subject-snippet-date .link-result-snippet{line-height:24px}.link-result-summary .link-preview-box .link-result-view-on-url,.link-result-summary .link-result-subject-snippet-date .link-result-view-on-url{font-family:Arial,\'Helvetica Neue\',Helvetica,sans-serif;color:#999;font-size:11px;padding-top:2px}.link-result-summary .link-preview-box .link-result-url,.link-result-summary .link-result-subject-snippet-date .link-result-url{font-weight:700}.link-result-summary .link-preview-box .link-result-title,.link-result-summary .link-result-subject-snippet-date .link-result-title{max-height:28px;white-space:normal;text-overflow:ellipsis;margin-top:9px;font-weight:700;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box}.link-result-summary .link-preview-box .link-result-subject,.link-result-summary .link-result-subject-snippet-date .link-result-subject{margin-top:13px;font-weight:700}.link-result-summary .link-preview-box .link-result-thumbnail-container,.link-result-summary .link-result-subject-snippet-date .link-result-thumbnail-container{display:inline-block;position:relative;float:left;overflow:hidden;width:80px;height:80px;padding:0;background-color:#D8DADE}.link-result-summary .link-preview-box .link-result-thumbnail-container .fallback,.link-result-summary .link-result-subject-snippet-date .link-result-thumbnail-container .fallback{color:#FFF;font-size:30px;margin-top:-15px;margin-left:-15px}.link-result-summary .link-result-subject-snippet-date{padding-right:15px;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.link-result-summary .link-result-subject-snippet-date>*{padding-left:20px}.document-grid,.link-grid,.message-list-group,.message-list-toolbar,.photo-grid,.srp-header-main{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.business-card .xfooter .contact-menu-btn{background-color:transparent;background-repeat:no-repeat;border:none;cursor:pointer;overflow:hidden;outline:0}.business-card{background-color:#fff;border:solid 1px rgba(0,0,0,.1);overflow-x:hidden;color:#000}.business-card .icon{color:#999;font-size:16px;padding:0}.business-card .business-card-image{background-position:center;background-repeat:no-repeat;background-size:cover;background-color:#ddd;font-family:mail;font-size:100px;position:relative;color:#fff;margin:10px;height:100px;width:100px}.business-card .business-card-background-image{cursor:pointer;height:100px;width:100px;position:absolute;top:0;left:0;background-size:cover;background-repeat:no-repeat}.business-card .xfields{margin-top:5px}.business-card .xcontact-field{font-size:13px;line-height:20px}.business-card .xcontact-field:hover{text-decoration:underline}.business-card .xcontact-field .icon-logo-linkedin{position:relative;top:-2px}.business-card .xcontact-field .icon-logo-flickr:after,.business-card .xcontact-field .icon-logo-flickr:before{background-color:#999}.business-card .xcontact-field a{color:inherit;text-decoration:inherit}.business-card .business-card-name,.business-card .business-card-title,.business-card .xcontact-field{padding:0 20px;padding-right:15px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.business-card .business-card-name{font-size:16px;font-weight:700;line-height:19px;margin-bottom:1px;padding-top:16px}.business-card .business-card-title{color:#B2B2B2;font-size:12px;line-height:15px}.business-card .xfooter{border-top:solid 1px rgba(0,0,0,.1);clear:both;margin-top:18px;padding:7.5px 15px}.business-card .xfooter .sources .icon-logo-backyard{color:#400090;text-indent:-.125em;width:.75em}.business-card .xfooter .sources .icon-logo-backyard:focus,.business-card .xfooter .sources .icon-logo-backyard:hover{opacity:.8}.business-card .xfooter .sources .icon-facebook{color:#3B5999;text-indent:-.313em;width:.5em}.business-card .xfooter .sources .icon-facebook:focus,.business-card .xfooter .sources .icon-facebook:hover{opacity:.8}.business-card .xfooter .sources .icon-twitter{color:#5E9FCA;text-indent:-.313em;width:.5em}.business-card .xfooter .sources .icon-twitter:focus,.business-card .xfooter .sources .icon-twitter:hover{opacity:.8}.business-card .xfooter .sources .icon-linkedin{color:#007BB6;text-indent:-.125em;width:.8em}.business-card .xfooter .sources .icon-linkedin:focus,.business-card .xfooter .sources .icon-linkedin:hover{opacity:.8}.business-card .icon-logo-flickr{background:#FFF;border-radius:50%;position:relative;height:16px;width:16px}.business-card .icon-logo-flickr:after,.business-card .icon-logo-flickr:before{border-radius:50%;content:\'\';position:absolute;top:50%;left:50%;margin-top:-3px;height:6px;width:6px}.business-card .icon-logo-flickr:before{background-color:#0063dc;margin-left:-6.5px}.business-card .icon-logo-flickr:after{background-color:#ff0084;margin-left:.5px}.business-card[dir=ltr] .business-card-image{float:right}.business-card[dir=ltr] .business-card-image{margin-left:0}.business-card[dir=rtl] .business-card-image{float:left}.business-card[dir=rtl] .business-card-image{margin-right:0}.business-card[dir=ltr] .xcontact-field .icon{margin-right:5px}.business-card[dir=rtl] .xcontact-field .icon{margin-left:5px}.business-card[dir=ltr] .xfooter .sources{float:right}.business-card[dir=rtl] .xfooter .sources{float:left}.business-card[dir=ltr] .xfooter .sources .icon{margin-left:10px}.business-card[dir=rtl] .xfooter .sources .icon{margin-right:15px}.copy-func-wrapper{z-index:100001;position:relative}.document-grid,.link-grid,.message-list-group,.message-list-toolbar,.photo-grid,.srp-header-main{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.business-card .xfooter .contact-menu-btn{background-color:transparent;background-repeat:no-repeat;border:none;cursor:pointer;overflow:hidden;outline:0}.extraction-card{background-color:#fff;margin-bottom:30px;border:solid 1px rgba(0,0,0,.1);overflow-x:hidden;color:#000}.extraction-card .icon{color:#999;font-size:16px;color:#18F}.extraction-card .ell{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.extraction-card .extraction-card-actions{margin-right:20px;color:#18F}.extraction-card .xfooter{border-top:solid 1px rgba(0,0,0,.1);padding:13px}.extraction-card .xfields{padding:16px 13px;white-space:nowrap;min-height:64px;-moz-box-sizing:border-box;box-sizing:border-box}.extraction-card .xfields,.extraction-card .xfooter{clear:both}.extraction-card .extraction-with-item-image .extraction-card-item-info{width:225px}.extraction-card .extraction-card-item-info{display:inline-block;font-size:14px;vertical-align:middle;width:100%}.extraction-card .extraction-card-item-info .extraction-card-item-vendor{line-height:1.3em;font-size:14px;font-weight:700;color:#000}.extraction-card .extraction-card-item-info .extraction-card-item-order{font-size:12px;font-weight:400;color:grey}.extraction-card .extraction-card-item-img{display:inline-block;width:36px;height:36px;background-size:contain;background-position:center;background-repeat:no-repeat;vertical-align:middle;margin-right:13px;border-radius:18px}.extraction-card .extraction-card-item-details{border-top:solid 1px rgba(0,0,0,.1);padding:12px 13px}.extraction-card .extraction-card-item-details .extraction-card-item-name{color:#000;line-height:1.3em;font-size:14px;font-weight:500}.extraction-card .extraction-card-item-details .extraction-card-item-status{color:#1AC567;font-size:12px;font-weight:500;margin-right:4px}.extraction-card .extraction-card-item-details time{color:#9EA1AD;font-size:12px;font-weight:400}.extraction-card.past-extraction-card .extraction-card-item-details{cursor:pointer}.search-menu.move-menu-dd{width:270px;padding:0}.search-menu.move-menu-dd .search-menuitem kbd{margin-left:auto;float:none}.search-menu.move-menu-dd .icon-close{font-size:16px}.search-menu.move-menu-dd .search-menu{padding:0}.search-menu.move-menu-dd .folder-group{border-top:1px solid rgba(0,0,0,.1);padding:10px 0}.search-menu.move-menu-dd .move-menu-input{border:0;margin:0;width:120px;height:17px;outline:0;box-shadow:none;line-height:15px;background-color:transparent}.search-menu.move-menu-dd .folder-input-shortcut{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:absolute;right:20px}.search-menu.move-menu-dd .folder-search-input{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:230px;margin:0 20px;height:15px;line-height:15px;padding:15px 0}.search-menu.move-menu-dd .folder-search-input .icon-search{font-size:16px;color:#aaa}.search-menu.move-menu-dd .folder-search-input .icon-search:hover{color:#000}.search-menu.move-menu-dd .move-menu-item{padding:0 20px}.search-menu.move-menu-dd .move-menu-item .move-menu-item-inner{-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.search-menu.move-menu-dd .move-menu-item .move-menu-item-inner .folder-name{overflow:hidden;text-overflow:ellipsis;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;-webkit-transition:padding .2s ease;-moz-transition:padding .2s ease;transition:padding .2s ease;padding-right:10px}.search-menu.move-menu-dd .move-menu-item .move-menu-item-inner .folder-shortcut{text-align:right;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.search-menu.move-menu-dd .user-folder-group{overflow-x:hidden;overflow-y:auto}.search-menu.move-menu-dd .search-menuitem{padding:0}.search-menu.move-menu-dd .search-menuitem:active,.search-menu.move-menu-dd .search-menuitem:focus,.search-menu.move-menu-dd .search-menuitem:hover{background-color:transparent}.search-menu.move-menu-dd .folder-group .active.move-menu-item{background-color:rgba(0,0,0,.15)}.search-menu.move-menu-dd .folder-animation-enter{opacity:.01;height:0;overflow:hidden;-webkit-transition:height .2s ease,opacity .2s ease;-moz-transition:height .2s ease,opacity .2s ease;transition:height .2s ease,opacity .2s ease}.search-menu.move-menu-dd .folder-animation-enter.folder-animation-enter-active{opacity:1;height:100%}.search-menu.move-menu-dd .folder-animation-leave{opacity:1;height:100%;overflow:hidden;-webkit-transition:height .2s ease,opacity .2s ease;-moz-transition:height .2s ease,opacity .2s ease;transition:height .2s ease,opacity .2s ease}.search-menu.move-menu-dd .folder-animation-leave.folder-animation-leave-active{height:0;opacity:.01}.search-menu.move-menu-dd .folder-animation-leave.folder-animation-leave-active .folder-name{padding-left:0!important}.search-menu.move-menu-dd .folder-shortcut-enter{opacity:.01;-webkit-transition:opacity .5s ease .2s;-moz-transition:opacity .5s ease .2s;transition:opacity .5s ease .2s}.search-menu.move-menu-dd .folder-shortcut-enter.folder-shortcut-enter-active{opacity:1}.search-menu.move-menu-dd .folder-shortcut-leave{opacity:1;-webkit-transition:opacity .5s ease .2s;-moz-transition:opacity .5s ease .2s;transition:opacity .5s ease .2s}.search-menu.move-menu-dd .folder-shortcut-leave.folder-shortcut-leave-active{opacity:.01}.search-menu.move-menu-dd .move-menu-create-folder{display:block}.search-menu.move-menu-dd .move-menu-create-folder .folder-menu-create-info{color:#AAA;margin-top:5px;font-size:12px;line-height:14px;width:230px;white-space:pre-line}.search-menu.move-menu-dd .move-menu-create-folder .folder-menu-create-fail .folder-menu-create-info{color:red}.search-menu.move-menu-dd .move-menu-create-folder .folder-menu-create-fail .folder-menu-input{border-bottom:1px solid #FF333A}.search-menu.move-menu-dd .move-menu-create-folder .folder-menu-input{-moz-box-sizing:border-box;box-sizing:border-box;background:0 0;outline:0;border:none;width:120px}.search-menu.move-menu-dd .move-menu-create-folder .icon.icon-close{position:absolute;right:20px}.search-menu.move-menu-dd .move-menu-create-folder .input-close-btn-enter{opacity:0;-webkit-transition:opacity .5s ease;-moz-transition:opacity .5s ease;transition:opacity .5s ease}.search-menu.move-menu-dd .move-menu-create-folder .input-close-btn-enter.input-close-btn-enter-active{opacity:1}.search-menu.move-menu-dd .move-menu-create-folder .input-close-btn-leave{opacity:1;-webkit-transition:opacity .5s ease;-moz-transition:opacity .5s ease;transition:opacity .5s ease}.search-menu.move-menu-dd .move-menu-create-folder .input-close-btn-leave.input-close-btn-leave-active{opacity:0}.folder-menu-input::-ms-clear,.move-menu-input::-ms-clear{display:none}@media all and (min-height:700px){.user-folder-group{max-height:275px;overflow-y:auto}}[dir].folder-name{text-align:left}.is-drive .srp-filters-type button[data-action=messages]{display:none}.is-drive .srp-header-refine,.is-drive .srp-save-smartview{display:none}.document-grid,.link-grid,.message-list-group,.message-list-toolbar,.photo-grid,.srp-header-main{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.business-card .xfooter .contact-menu-btn{background-color:transparent;background-repeat:no-repeat;border:none;cursor:pointer;overflow:hidden;outline:0}img.image-with-fallback{display:block;margin:auto;position:absolute;top:-100%;right:-100%;bottom:-100%;left:-100%;height:auto;width:auto}img.image-with-fallback.oversized{height:100%;width:100%}img.image-with-fallback.landscape.oversized,img.image-with-fallback.portrait{height:100%;width:auto}img.image-with-fallback.landscape,img.image-with-fallback.portrait.oversized{height:auto;width:100%}.fallback.image-with-fallback{color:rgba(0,0,0,.05);font-size:80px;margin-top:-40px;margin-left:-40px;position:absolute;top:50%;left:50%}.message-list-toolbar,.scroll-locked{position:absolute;top:0;left:0;right:10px;z-index:2}.has-right-rail .message-list-group.message-list-toolbar,.has-right-rail .message-list-group.scroll-locked,.has-right-rail .message-list-toolbar,.has-right-rail .scroll-locked{right:344px}[hidden]{display:none!important}.message-list-toolbar{background:#FFF;border-bottom:1px solid #F2F2F2;-moz-box-sizing:border-box;box-sizing:border-box;display:block;padding:0 18px;line-height:36px;height:36px}.message-list-toolbar .icon,.message-list-toolbar button{color:inherit;cursor:inherit;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.message-list-toolbar .icon[disabled],.message-list-toolbar button[disabled]{color:#333!important;cursor:not-allowed!important;opacity:.3!important}.message-list-toolbar button:focus,.message-list-toolbar button:hover{color:#737373}.message-list-toolbar button:active{color:#999}.message-list-options{display:inline-block}.message-list-toolbar>li{display:inline}.message-list-toolbar>li:last-child .icon-chevron-down,.message-list-toolbar>li:last-child .icon-chevron-up{padding-right:0}.search-menu-button .icon-chevron-down,.search-menu-button .icon-chevron-up{letter-spacing:-.3em;padding-left:5px;text-indent:-.3em;vertical-align:middle}[dir=rtl] .search-menu-button [class*=icon-chevron]::before{position:relative;right:-6px}.checkbox-down-arrow,.ui-checkbox{padding-right:0!important}.checkbox-down-arrow,.message-list-toolbar>li{vertical-align:middle!important}.checkbox-menu{margin-left:-3px}.checkbox-menu .checkbox-down-arrow{margin-right:30px;padding-left:2px}.checkbox-menu .checkbox-down-arrow .icon{padding-left:0}.checkbox-menu .ui-checkbox{cursor:pointer}.ui-checkbox{color:#000;opacity:.5}.selected .ui-checkbox,.ui-checkbox:active,.ui-checkbox:focus,.ui-checkbox:hover{opacity:1}.archive-button,.delete-menu{margin-right:20px}.btn-restore,.more-menu,.move-menu,.spam-menu{margin-right:15px}.sort-menu{float:right}.sort-menu .sortBtn{background:0 0;border:none;color:#0078FF;cursor:pointer}.message-list-toolbar button{cursor:pointer}.message-list-group,.search-tab-container{-webkit-transform:translateZ(0);-moz-transform:translateZ(0);transform:translateZ(0)}.search-tab-container{background:inherit;border-top:1px solid #D8D8D8;overflow:hidden;position:absolute;top:50px;bottom:0;width:100%;-webkit-transition:top 60ms ease;-moz-transition:top 60ms ease;transition:top 60ms ease}.srp-header-has-spell-correction~.search-tab-container{top:81px}.search-tab-container .scroll-content{overflow:auto;height:100%}.search-tab-container .scroll-content .s-loader{margin-top:20px;margin-bottom:20px}.loading-more{text-align:center;margin:20px}.message-list-group[data-title]::before{content:attr(data-title);background:#F8F8F8;border-top:1px solid #CCC;display:block;font-size:13px;line-height:1;padding:6px 18px}.message-list-group.non-date-sort[data-title]::before{background:0 0;border:none;padding:0}.message-list-group.message-list-toolbar,.message-list-group.scroll-locked{border-bottom:1px solid #F2F2F2;-moz-box-sizing:border-box;box-sizing:border-box;display:none;overflow:hidden;top:36px;width:auto;right:10px}.has-right-rail .message-list-group.message-list-toolbar,.has-right-rail .message-list-group.scroll-locked{right:344px}.message-list-group.scroll-locked[data-title],.message-list-group[data-title].message-list-toolbar{display:block}.message-list-group{position:relative;outline:0}.message-list-group.message-list-toolbar,.message-list-group.scroll-locked{position:absolute}.message-list-group.hide-date-label[data-title]::before{visibility:hidden}.message-list-group>*{border-top:1px solid #F2F2F2}.message-list-group>:first-of-type{border-top:0}.message-list-item,.search-message-container-ad{-moz-box-sizing:border-box;box-sizing:border-box;cursor:pointer;font-size:0;line-height:1.5;padding:9px 18px 8px;white-space:nowrap;position:relative}.message-list-item.active,.message-list-item.selected,.message-list-item:focus,.message-list-item:hover{background-color:#e6e6e6}.message-list-item:hover .message-action-btns{background-color:#e6e6e6}.message-list-item:hover .message-action-btn{opacity:.5;pointer-events:auto}.message-list-item:hover .message-subject-inner .search-btn{opacity:.5;pointer-events:auto}.message-list-item:hover .message-action-btn.recipient{visibility:hidden}.message-list-item.unread .message-action-btn.read-status{color:#400090;opacity:1}.message-list-item.unread .message-date,.message-list-item.unread .message-folder,.message-list-item.unread .message-sender,.message-list-item.unread .message-subject{font-weight:700}.message-list-item.flagged .message-action-btn.flag-status{color:#ffb220;opacity:1}.message-list-item .message-action-btns{display:inline-block;padding:0 9px;position:absolute;right:-webkit-calc(100% - 222px);right:-moz-calc(100% - 222px);right:calc(100% - 222px);vertical-align:top}@media all and (max-width:1100px){.message-list-item .message-action-btns{right:-webkit-calc(100% - 197px);right:-moz-calc(100% - 197px);right:calc(100% - 197px)}}@media all and (min-width:1500px){.message-list-item .message-action-btns{right:-webkit-calc(100% - 262px);right:-moz-calc(100% - 262px);right:calc(100% - 262px)}}.message-list-item .message-action-btn{background:0 0;border:0;color:inherit;line-height:1.5;padding:0;width:20px;opacity:0;-webkit-transition:opacity .1s ease-in-out;-moz-transition:opacity .1s ease-in-out;transition:opacity .1s ease-in-out;pointer-events:none}.message-list-item .message-action-btn:hover{opacity:1!important}.message-list-item .message-action-btn:focus{outline:0}.message-list-item .message-action-btn.read-status{margin-left:29px;position:relative}.message-list-item .message-action-btn .icon{color:inherit}.message-list-item:hover .message-snippet{-webkit-transform:translateX(20px);-moz-transform:translateX(20px);transform:translateX(20px)}[dir=rtl] .message-list-item:hover .message-snippet{-webkit-transform:translateX(-20px);-moz-transform:translateX(-20px);transform:translateX(-20px)}.message-action-btn,.message-date,.message-folder,.message-list-item .ui-checkbox,.message-sender,.message-snippet,.message-subject{font-weight:400;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;font-size:13px;vertical-align:bottom;overflow:hidden;white-space:nowrap}.message-action-btn,.message-date,.message-folder,.message-list-item .ui-checkbox,.message-sender{text-overflow:ellipsis}.message-list-item .ui-checkbox{cursor:pointer;font-weight:400;font-size:20px;letter-spacing:-6px;line-height:1;height:1em;width:15px}.message-list-item .ui-checkbox::before{font-style:normal;font-weight:400;font-family:mail;speak:none;position:relative;left:-3px;line-height:1}.message-sender{padding-left:4px;padding-right:36px;position:relative;width:140px;text-align:left!important;-webkit-transition:padding-right 50ms linear;-moz-transition:padding-right 50ms linear;transition:padding-right 50ms linear}@media all and (max-width:1100px){.message-sender{width:115px}}@media all and (min-width:1500px){.message-sender{width:180px}}[dir=rtl] .message-list-item:hover .message-sender{padding-left:78px}.message-subject{color:#AAA;padding-left:2px;width:-webkit-calc(100% - 419px);width:-moz-calc(100% - 419px);width:calc(100% - 419px)}.message-subject>span:first-child{color:#333}@media all and (max-width:1100px){.message-subject{width:-webkit-calc(100% - 363px);width:-moz-calc(100% - 363px);width:calc(100% - 363px)}}@media all and (min-width:1500px){.message-subject{width:-webkit-calc(100% - 494px);width:-moz-calc(100% - 494px);width:calc(100% - 494px)}}.message-subject-inner{position:relative;max-width:60%;display:inline-block}.message-subject-inner .message-subject-main{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;display:inline-block;vertical-align:bottom}.message-subject-inner-full-width{position:relative;max-width:95%;display:inline-block}.message-subject-inner-full-width .message-subject-main{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;display:inline-block;vertical-align:bottom}.message-subject-inner .search-btn{opacity:0;pointer-events:none;position:absolute;right:-25px;-webkit-transition:opacity .1s ease-in-out;-moz-transition:opacity .1s ease-in-out;transition:opacity .1s ease-in-out}.message-subject-inner .search-btn .icon{padding:0}.message-snippet,.message-subject{text-align:left!important}.message-snippet .found,.message-subject .found{background-color:rgba(51,101,218,.12);color:#333}.message-snippet{padding-left:10px;-webkit-transition:-webkit-transform .1s ease;-moz-transition:-moz-transform .1s ease;transition:transform .1s ease}.message-snippet[dir=ltr]{padding-left:10px}.message-date{padding-left:10px;text-align:right;width:70px}.message-date .ampm{font-size:80%}.message-attachment-icon{width:30px;padding-left:10px;padding-right:0;-moz-box-sizing:border-box;box-sizing:border-box}.message-folder{padding-left:10px;text-align:left!important;width:115px}@media all and (max-width:1100px){.message-folder{width:84px}}@media all and (min-width:1500px){.message-folder{width:150px}}.srp-outer-container{background:#FFF;color:#333;position:absolute;top:0;bottom:0;left:0;right:0;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);transform:translateZ(0)}.srp-outer-container button{cursor:pointer;outline:0}.srp-outer-container button[disabled]{cursor:not-allowed}.search-tab-content{overflow-y:auto;position:absolute;top:37px;right:0;left:0;bottom:0}.srp-container{display:table;table-layout:fixed;height:100%;width:100%}.main-content,.right-rail{-moz-box-sizing:border-box;box-sizing:border-box;display:table-cell;vertical-align:top}.right-rail{background-color:#FBFBFC;border-left:solid 1px rgba(51,51,51,.1);overflow:hidden;padding:20px 16px 20px 16px;width:334px}.right-rail-inner{padding-bottom:80px;width:302px;-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000;-moz-perspective:1000;perspective:1000}.search-tab-scroll-buttons{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);transform:translate3d(0,0,0);position:absolute;bottom:10px;right:45px}@media all and (max-width:1200px){.left-toolbar span.button-text,.left-toolbar span.icon+span.icon-text{display:none}.delete-menu,.more-menu,.move-menu,.spam-menu{margin-right:25px}button.button-plain .icon{padding-right:0}}.has-right-rail .search-tab-scroll-buttons{right:379px}ul.left-toolbar{width:100%}ul.left-toolbar>li{display:inline-block}.left-toolbar,.right-toolbar{width:auto;display:table-cell;white-space:nowrap;vertical-align:middle}.histogram-chart-container.histogram-chart-appear{height:5%;-webkit-transition:height .4s ease;-moz-transition:height .4s ease;transition:height .4s ease}.histogram-chart-container.histogram-chart-appear.histogram-chart-appear-active{height:100%}.histogram-chart-animation-container{position:relative;width:100%;height:100%}.histogram-chart-container{position:absolute;bottom:0;width:100%;height:100%;overflow:hidden}.email-history-right-rail-wrapper{overflow:hidden;background-color:#FFF}.contact-twitter-right-rail-wrapper,.contacts-right-rail-wrapper,.documents-right-rail-wrapper,.messages-right-rail-wrapper,.photos-right-rail-wrapper,.related-right-rail-wrapper{overflow:hidden;margin-bottom:30px}.related-right-rail-wrapper .right-rail-see-all[disabled]{color:grey;cursor:initial}.right-rail-history-info{padding-top:5px;line-height:1.4em;color:#8b8a8a}.right-rail-history-info .right-rail-history-contact-info{color:#0078FF;cursor:pointer}.right-rail-contact-new-card.contacts-right-rail-wrapper{border:solid 1px rgba(0,0,0,.1)}.right-rail-contact-new-card .xfooter{border-top:none;padding:7.5px 10px 7.5px 10px;width:280px;position:relative}.right-rail-contact-new-card .business-card{border:none}.right-rail-contact-new-card .business-card .business-card-name,.right-rail-contact-new-card .business-card .business-card-title,.right-rail-contact-new-card .business-card .xcontact-field{padding-left:10px}.right-rail-contact-new-card .business-card .icon.icon-histogram{padding-left:15px;color:#999}.right-rail-contact-new-card .business-card .search-menu-button.icon.icon-more{color:#999}.right-rail-contact-new-card .business-card .icon{color:#8b8a8a}.right-rail-contact-new-card .business-card .business-card-background-image,.right-rail-contact-new-card .business-card .business-card-image{width:100px;height:100px}.right-rail-contact-new-card .email-history-right-rail-head{display:inline-block;padding-right:0;font-size:13px;color:#0078FF}.right-rail-contact-new-card .email-history-right-rail-date-filter{color:#0078FF;margin-bottom:5px}.right-rail-contact-new-card .email-history-right-rail-date-filter span{margin-right:15px;cursor:pointer}.right-rail-contact-new-card .email-history-right-rail-date-filter .selected{color:#8b8a8a;border-bottom:1px solid #8b8a8a}.right-rail-contact-new-card .email-history-right-rail-close{position:relative;bottom:2px;float:right;color:#8b8a8a;font-size:14px}.links-right-rail-wrapper{overflow:hidden;margin-bottom:34px}.email-history-right-rail-inner-wrapper{margin:0 10px 0 10px;padding:12px 0 12px 0;border-top:solid 1px rgba(0,0,0,.1)}.right-rail-sec-hd{padding-bottom:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.right-rail-history-hd{color:#8b8a8a;font-size:11px;padding:2px 0 1px 10px}.right-rail-chart-hd{padding-top:2px;padding-bottom:1.5em}.right-rail-bar-hd{height:70px;width:100%;overflow:hidden;white-space:nowrap}.right-rail-histogram-bar{display:inline-block;background-color:#B5D9F7;-moz-box-sizing:border-box;box-sizing:border-box;padding-right:1px;background-clip:content-box}.right-rail-histogram-bar:hover{background-color:#D2E7F8}.right-rail-histogram-bar.selected{background-color:#0B80E3}.right-rail-title-left{position:absolute;left:12px}.right-rail-title-center{position:absolute;left:45%}.right-rail-title-right{position:absolute;right:14px}.related-right-rail-wrapper .right-rail-see-all{float:right}.right-rail-see-all{border:0;float:right;background:0 0;color:#0078FF;font-size:13px;margin-left:10px;padding:0}.right-rail-see-all:focus,.right-rail-see-all:hover{color:#0060cc}.right-rail-see-all:active{color:#0054b3}.right-rail-title{color:#333;font-size:13px}.right-rail-info{color:grey;left:80px;width:220px;overflow:hidden;text-overflow:ellipsis}.message-right-rail-item{-moz-box-sizing:border-box;box-sizing:border-box;cursor:pointer;margin:0 0 1px;padding-right:80px;height:36px;line-height:36px;border-bottom:solid 1px rgba(0,0,0,.08);position:relative}.message-right-rail-item .message-subj{font-size:13px;display:inline-block;width:100%;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;height:36px;line-height:36px;text-align:left}.message-right-rail-item .message-date{font-weight:400;font-size:12px;display:inline-block;width:70px;position:absolute;right:10px;top:0;color:grey;text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;height:36px;line-height:36px}.link-right-rail-item-link,.link-right-rail-item-title,.related-right-rail-item-detail,.related-right-rail-item-name{line-height:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left!important}.related-right-rail-item .related-right-rail-item-name{line-height:1.3}.related-right-rail-item-detail{padding-top:2px;line-height:normal}.document-right-rail-items,.message-right-rail-items{padding-bottom:2px}.link-right-rail-item-link{padding-top:4px}.related-right-rail-item{background-size:40px 40px;padding:0 15px 0 50px;height:40px}.link-right-rail-item{background-size:60px 60px;padding:0 15px 0 70px;height:60px}.link-right-rail-item,.related-right-rail-item{background-color:#FFF;background-repeat:no-repeat;background-position:top left;border:1px solid #F2F2F2;border-radius:2px;color:#8B8A8A;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;font-size:12px;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-bottom:4px}.link-right-rail-item-title,.related-right-rail-item-name{color:#333;display:block;font-size:13px}.contact-twitter-right-rail{background-color:transparent;border:0;width:100%;height:500px}.boss .search-tab-container{position:absolute;left:0;right:0}.button-theme-transparent{background-color:#0f0f0f;color:#fff;border-radius:2px;border-style:none;opacity:.75;outline:0}.button-theme-transparent:hover{opacity:.9}.search-tab-scroll-buttons>button{line-height:19px;padding:7px}.search-tab-scroll-buttons>button+button{margin-left:6px}.search-tab-scroll-buttons>button>.icon{padding:0}.search-tab-scroll-buttons>button>.icon-text{margin:0 6px}.react-confirm-dialog{display:block!important;opacity:1!important;position:relative;left:0;top:-81.5px;z-index:15500;margin-left:-200px}.react-progressbar-dialog div.progress-indicator{left:0;right:0;height:12px;margin:0 16px;padding:2px!important;border:1px solid #CCC;border-radius:3px;background-color:#FFF}.react-progressbar-dialog div.progress-indicator b{position:absolute;top:2px;left:5px}.react-progressbar-dialog div.progress-indicator .progress{height:100%;padding:0!important;width:0;border-radius:3px;background-color:#959595}@-webkit-keyframes blinkProgress{0%{opacity:1}50%{opacity:.3}100%{opacity:1}}@-moz-keyframes blinkProgress{0%{opacity:1}50%{opacity:.3}100%{opacity:1}}@keyframes blinkProgress{0%{opacity:1}50%{opacity:.3}100%{opacity:1}}.react-sleekprogressbar-dialog.modal{padding:20px 20px 10px;width:360px}.react-sleekprogressbar-dialog.modal .progress-indicator{padding-right:40px;position:relative;height:14px}.react-sleekprogressbar-dialog.modal .progress-indicator .progress-background{background:#ececec;width:100%;height:10px;float:right;border-radius:2px}.react-sleekprogressbar-dialog.modal .progress-indicator .progress{background-image:-webkit-linear-gradient(315deg,#84dea9,#5cd4a9,#3ac8b2);background-image:-moz-linear-gradient(315deg,#84dea9,#5cd4a9,#3ac8b2);background-image:linear-gradient(135deg,#84dea9,#5cd4a9,#3ac8b2);height:10px;float:left;border-radius:2px 0 0 2px;-webkit-transition:width .5s linear;-moz-transition:width .5s linear;transition:width .5s linear}.react-sleekprogressbar-dialog.modal .progress-indicator .percentage{position:absolute;right:-6px;font-size:12px}.react-sleekprogressbar-dialog.modal .progress-indicator .blink-progress{display:inline-block;background:#3ac8b2;width:7px;height:10px;border-radius:0 2px 2px 0;float:left;-webkit-transition:opacity 1s;-moz-transition:opacity 1s;transition:opacity 1s;-webkit-animation-duration:2s;-moz-animation-duration:2s;animation-duration:2s;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:blinkProgress;-moz-animation-name:blinkProgress;animation-name:blinkProgress;margin-right:-10px}.react-sleekprogressbar-dialog.modal .modal-ft{padding:10px 0 0}.react-sleekprogressbar-dialog.modal .modal-ft .cancel{display:inline-block;padding-left:4px;cursor:pointer}.react-modal{position:fixed;top:50%;left:50%;height:1px;z-index:15499}.overlay-mask{top:0;position:fixed;width:100%;height:100%;border:none;z-index:10}.search-try-adv{text-align:center}.search-try-adv button{display:inline-block;line-height:26px;min-width:117px;margin:0 6px;border:1px solid #1473cc;border-radius:3px;color:#fff;background-color:#198fff;cursor:pointer}.empty-search-result{display:block;-moz-box-sizing:border-box;box-sizing:border-box;padding-top:36px;padding-left:18px;width:100%;text-align:center}.empty-search-result button{background:0 0;border:none;color:#0078FF;cursor:pointer;display:inline-block;padding:0;vertical-align:baseline;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.empty-search-result button span{max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:0}.empty-search-result button .personName{border-bottom:1px dotted #0078FF;line-height:16px}.empty-search-result span{padding-right:5px}.search-messages-container{outline:0;border-collapse:collapse;padding-top:36px}.search-messages-container[data-density="0"] .empty-search-result,.search-messages-container[data-density="0"] .message-list-item,.search-messages-container[data-density="0"] .search-message-container-ad{padding-top:5px;padding-bottom:4px}.search-messages-container[data-density="1"] .empty-search-result,.search-messages-container[data-density="1"] .message-list-item,.search-messages-container[data-density="1"] .search-message-container-ad{padding-top:1px;padding-bottom:0}.search-messages-container[data-density="2"] .empty-search-result,.search-messages-container[data-density="2"] .message-list-item,.search-messages-container[data-density="2"] .search-message-container-ad{padding-top:7px;padding-bottom:6px}.srp-header-query{-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;vertical-align:middle;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:330px}.srp-header-query.srp-header-people{max-width:240px}.search-messages-container{border-collapse:collapse;border-bottom:1px solid #F2F2F2}.search-loading-container{background:#FFF}.srp-outer-container .s-loader{border-color:rgba(0,0,0,.2)}.srp-outer-container .s-loader::before{border-top-color:rgba(0,0,0,.8)}.aria-offscreen{position:absolute;left:-999px}.no-archive .archive-btn,.no-archive .archive-button,.no-archive .search-menuitem[data-value=archive]{display:none}.no-archive .message-action-btns .delete-btn{display:inline-block}.search-acct-sync.notification-sync{text-align:left}.search-acct-sync.notification-sync .icon-recurring-event{float:left}.search-acct-sync .icon-recurring-event{font-size:30px;color:#CCC;cursor:auto}.search-menuitem-add-sender-to-contact{display:inline-block;cursor:pointer;max-width:200px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}';
a("./../../../jarvis/node_modules/cssify")(d,void 0,"/var/builds/workspace/59202-v3-package/BUILD_CONTAINER/container/label/DOCKER-LOW/app_root/artifacts/css/main.css"),b.exports=d},{"./../../../jarvis/node_modules/cssify":55}],2:[function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e,f=(e={str_add_contact:"Add to contacts",str_all_uppercase:"All",str_archive:"Archive",str_archive_button_label:"Archive selected messages [E]",str_attachments:"Attachments",str_block:"Block",str_btn_cancel:"Cancel",str_checkbox_all_label_mac:"Select or deselect all messages [Cmd+A]",str_checkbox_all_label_other:"Select or deselect all messages [Ctrl+A]",str_checkbox_dropdown_menu:"Select or deselect categorized messages",str_checkbox_singular_checked:"Checkbox, not checked",str_checkbox_singular:"Select or deselect the message",str_checkbox_singular_unchecked:"Checkbox, checked",str_contact_email_singular:"{{emailAddress}}",str_contact_other_email_plural:"{{emailAddress}} & {{number}} more emails",str_contact_other_email_singular:"{{emailAddress}} & 1 more email",str_copy_all_details:"Copy all details",str_copy_email_address:"Copy email address",str_copy_phone_number:"Copy phone number",str_create_folder:"Create folder",str_create_folder_fail:"A folder named <b>{{folderName}}</b> already exists. Please choose a different name.",str_create_folder_requirement:"Folder names may not contain: <b>/  \\ %</b>",str_day_friday:"Friday",str_day_monday:"Monday",str_day_saturday:"Saturday",str_day_sunday:"Sunday",str_day_thursday:"Thursday",str_day_tuesday:"Tuesday",str_day_wednesday:"Wednesday",str_delete_button_label:"Delete selected messages [Delete]",str_delete:"Delete",str_delete_message:"Delete this message [Delete]",str_documents:"Documents",str_download:"Download",str_edit_contact:"Edit card details",str_email_history_num_emails:"{{number}} emails",str_email_history_one_month:"1m",str_email_history_one_year:"1y",str_email_history_six_months:"6m",str_find_a_folder:"Find a folder",str_from_uppercase:"From",str_keyboard_nav_x_plus_y:"{{btnX}} + {{btnY}}",str_keyboard_nav_x_then_y:"{{btnX}} then {{btnY}}",str_link_open:"Open the link",str_links:"Links",str_links_view_on:"View on {{url}}",str_mail_earlier_month:"Earlier in {{month}}",str_mail_earlier_year:"Earlier in {{year}}",str_mail_last_week:"Last week",str_mail_recent_results:"Recent results",str_mail_today:"Today",str_mail_upcoming_results:"Upcoming results",str_mail_yesterday:"Yesterday",str_mark_as_read:"Mark as read"},d(e,"str_mark_as_read","Mark as Read"),d(e,"str_mark_as_unread","Mark as unread"),d(e,"str_mark_as_unread","Mark as Unread"),d(e,"str_menu_accel_a","A"),d(e,"str_menu_accel_archive","E"),d(e,"str_menu_accel_delete","Delete"),d(e,"str_menu_accel_f","F"),d(e,"str_menu_accel_k","K"),d(e,"str_menu_accel_l","L"),d(e,"str_menu_accel_p","P"),d(e,"str_menu_accel_r","R"),d(e,"str_menu_accel_shift_c","Shift+C"),d(e,"str_menu_accel_shift_k","Shift+K"),d(e,"str_menu_accel_shift_l","Shift+L"),d(e,"str_menu_add_sender_to_contacts","Add Sender to Contacts"),d(e,"str_menu_archive_message","Archive"),d(e,"str_menu_clear_flag","Clear Star"),d(e,"str_menu_debugmsg","Debug this message"),d(e,"str_menu_delete_message","Delete"),d(e,"str_menu_encodings","Set Language Encoding..."),d(e,"str_menu_filter_emails_like_this","Filter Emails Like This..."),d(e,"str_menu_flag","Star"),d(e,"str_menu_forward","Forward"),d(e,"str_menu_mark_read","Mark as Read"),d(e,"str_menu_mark_unread","Mark as Unread"),d(e,"str_menu_print","Print"),d(e,"str_menu_redirect","Redirect to..."),d(e,"str_menu_reply_all","Reply to All"),d(e,"str_menu_reply_sender","Reply to Sender"),d(e,"str_menu_sort_date","Date"),d(e,"str_menu_sort_date_down","Date: New to Old"),d(e,"str_menu_sort_date_up","Date: Old to New"),d(e,"str_menu_sorted_by","Sorted by {{sortTypeName}}"),d(e,"str_menu_sort_relevance","Relevance"),d(e,"str_menu_sort_title","Sort Search Results of Mail"),d(e,"str_menu_spam_comp","Report a Hacked Account"),d(e,"str_menu_spam_notforme","Not My Mail"),d(e,"str_menu_spam_phish","Report a Phishing Scam"),d(e,"str_menu_spam","Report Spam"),d(e,"str_menu_this_is_notforme","Not My Mail"),d(e,"str_menu_this_is_spam","This is Spam"),d(e,"str_message_deleted_failure","The message was not successfully deleted."),d(e,"str_message_deleted","Message deleted."),d(e,"str_message_from","From {{name}}"),d(e,"str_message_is_in_folder","In folder {{folderName}}"),d(e,"str_message_is_read","read"),d(e,"str_message_is_unread","unread"),d(e,"str_message_moved_failure","The message was not successfully moved."),d(e,"str_message_moved","Message moved."),d(e,"str_message_reportedspam_failure","The message was not successfully marked as spam."),d(e,"str_message_reportedspam","Message marked as spam."),d(e,"str_message_restored","Message restored."),d(e,"str_messages_deleted","{{count}} messages deleted."),d(e,"str_messages_deleted_failure","{{count}} messages were not successfully deleted."),d(e,"str_messages","Messages"),d(e,"str_messages_moved","{{count}} messages moved."),d(e,"str_messages_moved_failure","{{count}} messages were not successfully moved."),d(e,"str_messages_reportedspam","{{count}} messages marked as spam."),d(e,"str_messages_reportedspam_failure","{{count}} messages were not successfully marked as spam."),d(e,"str_messages_restored","{{count}} messages restored."),d(e,"str_modal_message_bulk_action_message","Progress: {{percentage}}%"),d(e,"str_modal_message_bulk_archive_title","Archiving selected messages..."),d(e,"str_modal_message_bulk_delete_title","Deleting selected messages..."),d(e,"str_modal_message_bulk_markread_title","Marking selected messages read..."),d(e,"str_modal_message_bulk_markunread_title","Marking selected messages unread..."),d(e,"str_modal_message_bulk_move_title","Moving selected messages..."),d(e,"str_modal_message_bulk_star_title","Starring selected messages..."),d(e,"str_modal_message_bulk_unstar_title","Unstarring selected messages..."),d(e,"str_modal_message_delete_all_title","Delete All Messages"),d(e,"str_modal_message_delete_num_question","Are you sure you want to delete <b>all {{num_selected}}</b> of the selected messages?"),d(e,"str_month_april","April"),d(e,"str_month_august","August"),d(e,"str_month_december","December"),d(e,"str_month_february","February"),d(e,"str_month_january","January"),d(e,"str_month_july","July"),d(e,"str_month_june","June"),d(e,"str_month_march","March"),d(e,"str_month_may","May"),d(e,"str_month_november","November"),d(e,"str_month_october","October"),d(e,"str_month_september","September"),d(e,"str_more_button_label","More actions"),d(e,"str_more","More"),d(e,"str_move_button_label","Move selected messages to a folder [D]"),d(e,"str_move","Move"),d(e,"str_msg_view_no_subject","[No Subject]"),d(e,"str_new_folder","New Folder"),d(e,"str_none","None"),d(e,"str_notification_account_sync","Your {{account}} account is still syncing.<br>Some messages may not appear yet."),d(e,"str_notification_multi_account_sync","Your accounts are still syncing.<br>Some messages may not appear yet."),d(e,"str_ok","OK"),d(e,"str_open_message","Open the message"),d(e,"str_photos","Photos"),d(e,"str_related_contacts","Related contacts"),d(e,"str_related_searches","Related searches"),d(e,"str_restore_to_inbox_label","Restore selected messages to Inbox"),d(e,"str_restore_to_inbox","Restore to Inbox"),d(e,"str_save_as_smart_view","Save as Smart View"),d(e,"str_saved_as_smart_view","Saved as Smart View"),d(e,"str_saved","Saved"),d(e,"str_saved_search","Saved Search"),d(e,"str_save","Save"),d(e,"str_scroll_to_top","Scroll to top"),d(e,"str_search_error","Search error"),d(e,"str_search_msg_from_recipient","Search for messages from this recipient"),d(e,"str_search_msg_from_sender","Search messages from this sender"),d(e,"str_search_msg_with_subject","Search for messages with this subject"),d(e,"str_search_results_loading","Loading search results"),d(e,"str_search_results_toolbar","Search results toolbar"),d(e,"str_search_trash_header","Showing search results for {{query}} from Trash. No results found in other folders."),d(e,"str_see_more_more","See more"),d(e,"str_see_more","See all"),d(e,"str_sleek_modal_message_bulk_archive_title","Archiving <strong>{{messagesCount}} emails</strong>..."),d(e,"str_sleek_modal_message_bulk_delete_title","Deleting <strong>{{messagesCount}} emails</strong>..."),d(e,"str_sleek_modal_message_bulk_markread_title","Marking <strong>{{messagesCount}} emails</strong> as read..."),d(e,"str_sleek_modal_message_bulk_markunread_title","Marking <strong>{{messagesCount}} emails</strong> as unread..."),d(e,"str_sleek_modal_message_bulk_move_title","Moving <strong>{{messagesCount}} emails</strong>..."),d(e,"str_sleek_modal_message_bulk_percentage","{{percentage}}%"),d(e,"str_sleek_modal_message_bulk_spam_title","Marking <strong>{{messagesCount}} emails</strong> as spam..."),d(e,"str_sleek_modal_message_bulk_star_title","Starring <strong>{{messagesCount}} emails</strong>..."),d(e,"str_sleek_modal_message_bulk_unstar_title","Unstarring <strong>{{messagesCount}} emails</strong>..."),d(e,"str_social_backyard","Backyard profile"),d(e,"str_social_facebook","Facebook profile"),d(e,"str_social_flickr","Flickr profile"),d(e,"str_social_linkedin","LinkedIn profile"),d(e,"str_spam_button_label","Mark selected messages as Spam"),d(e,"str_spam_button_more_options","More Spam Options"),d(e,"str_spam","Spam"),d(e,"str_spell_correction_header","Showing search results for {{correctedQuery}}. No results found for {{misspelledQuery}}."),d(e,"str_spell_correction_search_trash_header","Showing search results for {{correctedQuery}} from Trash. No results found for {{misspelledQuery}}."),d(e,"str_srch_refine","Refine"),d(e,"str_srch_result","{{number}} Result"),d(e,"str_srch_results","{{number}} Results"),d(e,"str_srp_extraction_ordered_date","Ordered on {{F}} {{d}}, {{Y}}"),d(e,"str_srp_extraction_order_number","Order #{{order_number}}"),d(e,"str_srp_extraction_shipped_date","Shipped on {{F}} {{d}}, {{Y}}"),d(e,"str_srp_extraction_ships_dates","Ships on {{F}} {{d}}, {{Y}}"),d(e,"str_srp_extraction_track_package","Track Package"),d(e,"str_srp_extraction_view_email","View email"),d(e,"str_srp_extraction_view_order","View order"),d(e,"str_star_message","Click to mark this message as important"),d(e,"str_star","Star"),d(e,"str_to_uppercase","To"),d(e,"str_try_advanced_search","Please try again or explore more options in <button>Advanced Search</button>."),d(e,"str_try_search_all_mails_instead","We couldn’t find a message with the keyword <button><span>{{people_text}}</span> <span>{{keyword_text}}</span></button>."),d(e,"str_undo","Undo"),d(e,"str_unstar_message","Click to unstar this message"),d(e,"str_unstar","Unstar"),d(e,"last",null),e);b.exports=f},{}],3:[function(a,b,c){"use strict";var d=a("lodash"),e=!!window.clipboardData;b.exports={addContact:function(a,b){yui.use("contacts-ui-hovercard-addedit",function(a){new a.mail.ui.HoverCardAddEdit({action:"addContact",data:b}).show()})},editContact:function(a,b){yui.use("contacts-ui-hovercard-addedit",function(a){new a.mail.ui.HoverCardAddEdit({action:"editCard",data:b}).show()})},copyEmailAddress:function(a,b){e&&window.clipboardData.setData("text",b.email)},copyPhoneNumber:function(a,b){e&&window.clipboardData.setData("text",b.phone)},copyAllDetails:function(a,b){e&&window.clipboardData.setData("text",d.compact([b.name,b.title,b.email,b.im,b.phone]).join("\n"))}}},{lodash:"lodash"}],4:[function(a,b,c){"use strict";function d(a,b){var c=b.message,d=z.convertToStormMsg(c);yui.fire("newMessage",{oMsg:d,msgs:[d],msgInfo:[d],fid:c.fid,destinationFid:"%40S%40Search",action:b.action,forwardAsAttachment:!1,index:0,redirectToEmail:null})}function e(a){var b,c;return a?(a.isBatch?c=q.reduce(a.response,function(a,b){return a.concat(e(b.body))},[]):(b=y.getValue(a,"result.returnCodes")||[],c=b.concat(y.getValue(a,"result.error")||[])),c):[]}function f(a,b,c,d){var f=b.messages,g=b.searchId,h=b.notificationFactory,i=b.undoHandler;if(!q.isEmpty(f))return a.dispatch(t[c],b),E[d](b).then(function(d){var j=d&&d.text?JSON.parse(d.text):d,k=e(j),l="DELETE"===c,m="MOVE"===c,n="ARCHIVE"===c,o={},p={},r={};return k.forEach(function(a){o[a.mid]=!0}),q.forEach(f,function(a){o[a.mid]?p[a.mid]=a:r[a.mid]=a}),q.isEmpty(r)||(a.dispatch(t[c+"_SUCCESS"],{succeedMsgMidsMsgMap:r,searchId:g,undoHandler:i}),h&&v.showNotification(a,{component:h({count:Object.keys(r).length}),undoHandler:i}),!b.isSingleAction&&(m||l||n)&&a.dispatch(s.SET_SELECTED_ITEMS,{searchId:b.searchId,selectedItems:{},deselectedItems:{}})),q.isEmpty(p)||(a.dispatch(t[c+"_FAILURE"],{failedMidsMsgMap:p,searchId:g}),h&&v.showNotification(a,{component:h({count:Object.keys(p).length,failure:!0}),undoHandler:i,failure:!0})),{succeedMsgMidsMsgMap:r,failedMidsMsgMap:p}},function(){var b={};q.forEach(f,function(a){b[a.mid]=a}),a.dispatch(t[c+"_FAILURE"],{failedMidsMsgMap:b,searchId:g}),h&&v.showNotification(a,{component:h({count:Object.keys(b).length,failure:!0}),undoHandler:i,failure:!0})})}function g(a,b,c,d,g){var h,i=d-c,j={qurl:b.qurl,srcFid:"Inbox",destFid:b.fid,from:c,size:i};return o||(o=D.context.getStore(B)),h=E.getMids(j).then(function(a){var c=a.text?JSON.parse(a.text):a,d=c.items;return d=d.filter(function(a){var c=!b.deselectedItems[a.mid];return c}).map(function(a){return a.fid||(a.fid=y.getValue(o.findByIndex(a.folderNumber),["folderInfo","fid"])),a}),{fid:j.destFid,messages:d}},function(a){throw{errorMsgsInfo:e(a.text?JSON.parse(a.text):a)}}).then(function(b){return f(a,b,g.Constant,g.action).then(function(){return{data2:b}},function(a){throw{data2:b,errorMsgsInfo:e(a.text?JSON.parse(a.text):a)}})}).then(function(d){return a.dispatch(t.PROGRESS_UPDATE,{from:c,size:i,total:b.total}),d})}function h(a,b,c,d){var e=200;return 0>c?x.resolve():g(a,b,Math.max(c-e,0),c,d).then(function(){return h(a,b,c-e,d)})}function i(a,b,c){var d,e;return"DELETE"!==a&&"ARCHIVE"!==a||Object.keys(c).length<2?!1:(d=0===b.indexOf("(")?b.slice(1,b.length-1):b.slice(0),e=d.split(/\s+AND\s+/),!q.find(e,function(a){return 0===a.indexOf("folderid:")||0===a.indexOf("acctid:")}))}function j(a){var b;switch(a){case"DELETE":case"ARCHIVE":case"MOVE":b="move";break;case"STAR":b="star";break;case"UNSTAR":b="unstar";break;case"MARK_READ":b="read";break;case"MARK_UNREAD":b="unread";break;case"REPORT_SPAM":b="spam"}return b}function k(a){var b,c,d,e,f,g=D.context.getStore(B);return b=0===a.indexOf("(")?a.slice(1,a.length-1):a.slice(0),c=b.split(/\s+AND\s+/),(d=q.find(c,function(a){return 0===a.indexOf("acctid:")}))?y.getValue(d.split(":"),"1"):(e=q.find(c,function(a){return 0===a.indexOf("folderid:")}),e?(f=g.findByFolderId(y.getValue(e.split(":"),"1")),f&&f.acctId):null)}function l(a){"function"==typeof a.cancelSync&&a.cancelSync()}function m(a,b,c){var d,e,f,g,h,l,m,n,o,p,r=y.getValue(JSON.parse(b.queryResponse||null),"base",""),s=D.context.getStore(B),u=j(c),w=b.accounts||{},x=b.totalHits;yui.use("mail-controller-v3",function(j){if(e=j.Mail,f=e.Api.Yoda,g=e.Api.MessageSelector,h=e.Api.MessageUpdater,l=new f({showTAE:!1}),i(c,r,w))for(p in w)"ENABLED"===w[p].status&&(n=new g({isBulkOperation:!0}),m=0===r.indexOf("(")?r.slice(0,r.length-1)+" AND acctid:"+w[p].id+")":"("+r+" AND acctid:"+w[p].id+")",n.raw(m),"ARCHIVE"===c||"DELETE"===c?d=s.findSystemFolderByType("ARCHIVE"===c?"ARCHIVE":"TRASH",w[p].id):"MOVE"===c&&(d=s.findByFID(b.fid)),o=new h({messageSelector:n}),o[u](d?d.id:null),l.messages.update(o));else n=new g({isBulkOperation:!0}),n.raw(r),"ARCHIVE"===c||"DELETE"===c?d=s.findSystemFolderByType("ARCHIVE"===c?"ARCHIVE":"TRASH",Object.keys(w).length>1?k(r):null):"MOVE"===c&&(d=s.findByFID(b.fid)),o=new h({messageSelector:n}),o[u](d?d.id:null),l.messages.update(o);l.onChange(function(b){var c=y.getValue(b,"messages.update",[]),d=q.sum(q.map(c,"progress"));a.dispatch(t.PROGRESS_UPDATE,{progress:d/c.length})}),l.sync().then(function(d){var e,f=y.getValue(d,"messages.update",[]),g=q.every(f,{success:!0}),h=q.sum(q.map(f,"progress"))/f.length;g?(a.dispatch(t.PROGRESS_SUCCESS,{total:x}),C.stat({name:"bulk_action_success_v3",tags:{action:c,total:x,progress:h}}),b.notificationFactory&&v.showNotification(a,{component:b.notificationFactory({count:x,disableUndo:!0,failure:!1}),failure:!1})):(e=y.getValue(d,"messages.update.0.error.code",""),a.dispatch(t.PROGRESS_FAILURE,{errorMsgsInfo:e,total:x}),C.stat({name:"bulk_action_failure_v3",tags:{action:c,total:x,progress:h,errorMsgsInfo:e}}),b.notificationFactory&&v.showNotification(a,{component:b.notificationFactory({count:x,disableUndo:!0,failure:!0}),failure:!0}))}),a.dispatch(t.PROGRESS_START,{title:b.bulkTitle,promise:l})})}function n(a,b,c){var d;d=E.getTotal(b).then(function(d){var e=d.text?JSON.parse(d.text):d;return b.total=e.totalHits,b.promise=h(a,b,b.total,c),b},function(){throw{errorMsgsInfo:[]}}).then(function(a){return a.promise}).then(function(){a.dispatch(t.PROGRESS_SUCCESS,{total:b.total})},function(c){a.dispatch(t.PROGRESS_FAILURE,{total:b.total,errorMsgsInfo:c.errorMsgsInfo})}),a.dispatch(t.PROGRESS_START,{title:b.bulkTitle,promise:d})}var o,p,q=a("lodash"),r=a("react/addons"),s=a("SearchConstants"),t=a("MessageConstants"),u=a("../services/MessageService"),v=a("GlobalActions"),w=a("GlobalConstants"),x=a("EnhancedPromise"),y=a("ObjectUtils"),z=a("../utils/MessageUtils"),A=a("../components/notifications/RestoredNotification.jsx"),B=a("FolderStore"),C=a("StatService"),D=a("AppDispatcher"),E=new u({folderMeta:yui.mail.model.DataStore.Folders}),F=yui.common.Utils.features.enabled("searchBulkOperations");p={actionHandler:f,messageService:E,cancelBulkAction:function(a,b){F?l(b.promise):E.cancelBulkAction(b)},deleteAllMessages:function(a,b){F?m(a,b,"DELETE"):n(a,b,{action:"del",Constant:"DELETE"})},moveAllMessages:function(a,b){F?m(a,b,"MOVE"):n(a,b,{action:"move",Constant:"MOVE"})},starAllMessages:function(a,b){var c=b.star?"markFlagged":"markUnflagged",d=b.star?"STAR":"UNSTAR";F?m(a,b,d):n(a,b,{action:c,Constant:d})},markAllMessages:function(a,b){var c=b.markRead?"markRead":"markUnread",d=b.markRead?"MARK_READ":"MARK_UNREAD";F?m(a,b,d):n(a,b,{action:c,Constant:d})},reportAllAsSpam:function(a,b){F?m(a,b,"REPORT_SPAM"):n(a,b,{action:"reportSpam",Constant:"REPORT_SPAM"})},deleteMessages:function(a,b){f(a,b,"DELETE","del")},archiveMessages:function(a,b){var c=t;"all"===b.selectedFilter&&b.messages.length>=c.MIN_BULK_SIZE?F?m(a,b,"ARCHIVE"):n(a,b,{action:"archive",Constant:c.ARCHIVE}):f(a,b,c.ARCHIVE,"archive")},markMessages:function(a,b){var c=b.markRead?"MARK_READ":"MARK_UNREAD",d=b.markRead?"markRead":"markUnread";f(a,b,c,d)},moveMessages:function(a,b){f(a,b,"MOVE","move")},reportSpam:function(a,b){f(a,b,"REPORT_SPAM","reportSpam")},starMessages:function(a,b){var c=b.star?"STAR":"UNSTAR",d=b.star?"markFlagged":"markUnflagged";f(a,b,c,d)},undoMessages:function(a,b){var c=q.map(b.srcFids,function(a,c){return a=q.map(a,function(a){return q.defaults({fid:b.destinationFid},a)}),{fid:c,messages:a}}),d=q.map(c,function(c){return f(a,q.defaults({actionSource:b.actionSource,searchId:b.searchId},c),"UNDO","move")});return x.all(d).then(function(b){var d,e=0;for(d=0;d<b.length;d++)e+=Object.keys(b[d].succeedMsgMidsMsgMap).length;a.dispatch(t.MESSAGES_RESTORED,{count:b.length}),a.dispatch(w.NOTIFICATION_SHOW,{component:r.createFactory(A)({count:e})}),q.forEach(c,function(b){a.dispatch(t.MOVE,b)})})},openMessage:function(a,b){var c=b.items[b.index],d=b.typeTag;yui.fire("openMessage",{fid:c.fid,msg:z.convertToStormMsg(c),index:b.index,query:{isPrevNextNavigationDisabled:b.isPrevNextNavigationDisabled},arrMsgSeq:b.items.map(z.convertToStormMsg),type:"search"}),C.logRapid("mt:click",{action:d}),C.stat({name:d})},composeNewMessage:function(a,b){var c=b.contact.name,d=b.email;yui.fire("newMessage",{cbfn:function(a,b){var e={};return e.to=[{email:d,name:c}],e.subject=b.subject||"",a.setHeader(e),!0}})},forward:function(a,b){d(a,{action:"forward",message:b.message})},replyToSender:function(a,b){d(a,{action:"reply_sender",message:b.message})},replyToAll:function(a,b){d(a,{action:"reply_all",message:b.message})},print:function(a,b){a.dispatch(t.PRINT,b)},unsubscribe:function(a,b){a.dispatch(t.UNSUBSCRIBE,q.map(b,function(a){return z.convertToStormMsg(a)}))},quickFilter:function(a,b){a.dispatch(t.QUICK_FILTER,b)},setEncoding:function(a,b){a.dispatch(t.SET_ENCODING,b)},redirectMessage:function(a,b){a.dispatch(t.REDIRECT_MESSAGE,b)},debugMessage:function(a,b){window.open("http://cascade004.mail.ne1.yahoo.com/ws/admin/debug/message?yid="+encodeURIComponent(NeoConfig.loginId)+"&ymumid="+encodeURIComponent(b))},updateMessage:function(a,b){a.dispatch(t.UPDATE_MESSAGES,b)},updateConv:function(a,b){a.dispatch(t.UPDATE_CONV,b)}},p._tests={_shouldDivideQuery:i,_getYodaMessageAction:j,_getAcctIdInQuery:k,_cancelBulkActionV3:l,_bulkAllMessagesV3:m},b.exports=p},{"../components/notifications/RestoredNotification.jsx":33,"../services/MessageService":50,"../utils/MessageUtils":54,AppDispatcher:"AppDispatcher",EnhancedPromise:"EnhancedPromise",FolderStore:"FolderStore",GlobalActions:"GlobalActions",GlobalConstants:"GlobalConstants",MessageConstants:"MessageConstants",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",StatService:"StatService",lodash:"lodash","react/addons":"react/addons"}],5:[function(a,b,c){"use strict";function d(a){return function(){this.isMounted()&&a.apply(this,arguments)}}function e(a,b,c){return h.throttle(d(a),b,c)}function f(a,b,c){return h.debounce(d(a),b,c)}function g(a){return function(b){a.call(this,h.cloneDeep(b))}}var h=a("lodash");b.exports={ifMounted:d,componentThrottle:e,componentDebounce:f,delayedEvent:g}},{lodash:"lodash"}],6:[function(a,b,c){"use strict";var d,e=window.devicePixelRatio&&window.devicePixelRatio>1.3;!function(){var a,b,c=["transform","WebkitTransform","MozTransform","OTransform"];for(a=0,b=c.length;b>a;a+=1)if("undefined"!=typeof document.body.style[c[a]]){d=c[a];break}}(),b.exports={toHumanReadableFileSize:function(){var a=1024,b=a*a;return function(c){return c>=b?(c/b).toPrecision(4)+"MB":c>=a?(c/a).toPrecision(3)+"KB":c+"B"}}(),getTransformProp:function(){return d||"transform"},isRetina:function(){return e},doubleIfRetina:function(a){return this.isRetina()?2*a:a},getOS:function(){return yui.UA.os}}},{}],7:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("../../../artifacts/lang"),g=a("./Modal.jsx");d=e.createClass({displayName:"ConfirmDialog",propTypes:{header:e.PropTypes.string,message:e.PropTypes.string,onConfirm:e.PropTypes.func,onCancel:e.PropTypes.func,onClose:e.PropTypes.func},render:function(){return e.createElement(g,null,e.createElement("div",{className:"react-confirm-dialog modal",role:"dialog"},e.createElement("h2",{className:"modal-hd"},this.props.header,this.renderCloseButton()),e.createElement("div",{className:"modal-bd"},e.createElement("p",null,this.props.message)),e.createElement("div",{className:"modal-ft"},this.renderConfirmButton(),this.renderCancelButton())))},renderCloseButton:function(){return this.props.onClose?e.createElement("span",{ref:"close",className:"icon close",title:"title",role:"presentation",onClick:this.props.onClose}):void 0},renderConfirmButton:function(){return this.props.onConfirm?e.createElement("button",{ref:"confirm",className:"btn left right","data-action":"confirm","aria-label":f.str_ok,onClick:this.handleConfirm},f.str_ok):void 0},renderCancelButton:function(){return this.props.onCancel?e.createElement("button",{ref:"cancel",className:"btn left right default","aria-label":f.str_btn_cancel,onClick:this.props.onCancel},f.str_btn_cancel):void 0},handleConfirm:function(){var a=this.props;a.onConfirm(),a.onClose()}}),b.exports=d},{"../../../artifacts/lang":2,"./Modal.jsx":13,"react/addons":"react/addons"}],8:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("../../../artifacts/lang"),g=a("BidiSafeFilepath"),h=a("BidiString"),i=a("SlideShow"),j=a("../common/Utils"),k=a("../common/ComponentUtils"),l=a("Utils"),m=a("List"),n=a("Context"),o=a("ListItem"),p=a("RelativeDateFormatter"),q=a("../utils/DocumentUtils"),r=a("StatService"),s=a("SearchConstants"),t=a("./mixins/KeyboardNavigationHelper"),u=a("./Spinner.jsx"),v=a("../actions/MessageActions");d=e.createClass({displayName:"DocumentGrid",propTypes:{searchId:e.PropTypes.string.isRequired,currentFilter:e.PropTypes.string},mixins:[t,n],getInitialState:function(){return{activeIndex:-1}},onFocus:function(){this.isFocused=!0},onBlur:function(){this.isFocused=!1},shouldComponentUpdate:function(a,b){return this.props.items!==a.items||this.state.activeIndex!==b.activeIndex||this.state.canShowSlideView!==b.canShowSlideView},componentDidMount:function(){var a=r.timerComplete("doSearchRender");a&&r.featureLatency("srp_render_complete",a),this.setFocusDebounced=k.componentDebounce(this.setFocus.bind(this),32),this.setFocusDebounced()},componentDidUpdate:function(){this.setFocusDebounced()},setFocus:function(){this.isFocused||l.requestAnimationFrame(function(){this.isMounted()&&e.findDOMNode(this).focus()}.bind(this))},componentWillReceiveProps:function(a){a.currentFilter!==this.props.currentFilter&&this.setActiveIndex(-1)},_currentViewType:s.SEARCH_DOCUMENT_VIEW,_openSlideshow:function(a,b){this.setActiveIndex(b),this.setLastIndex(b),this.setState({canShowSlideView:!0}),this._fireRapidStats("srp_file_view",b)},keyboardNavigate:function(a){var b=a?this.navigateUp():this.navigateDown(),c=this.props.items[b],d=this.refs[c&&c.id];this.setActiveIndex(b),d.getDOMNode().scrollIntoViewIfNeeded(a)},keyboardNavigateUp:function(){this.keyboardNavigate(!0)},keyboardNavigateDown:function(){this.keyboardNavigate(!1)},keyboardEnter:function(a){a.online?window.open(a.onlineContentLink):this._openSlideshow(null,this.state.activeIndex)},render:function(){return e.createElement("div",{tabIndex:0,onKeyDown:this.handleKeyDown},this.renderContent(),this.props.fetchingMoreItems?this.renderSpinner():null)},renderSpinner:function(){return e.createElement("div",{className:"loading-more"},e.createElement(u,null))},closeSlideShow:function(){this.setState({canShowSlideView:!1})},renderContent:function(){return e.createElement("div",{className:"document-grid",onFocus:this.onFocus,onBlur:this.onBlur},e.createElement(i,{items:this.props.items,activeIndex:this.state.activeIndex,visible:this.state.canShowSlideView,setActiveIndex:this.setActiveIndex,closeSlideShow:this.closeSlideShow}),e.createElement(m,{className:"document-grid-items"},this.props.items.map(function(a,b){var c=j.toHumanReadableFileSize(a.size);return!this.props.searchGDocsEnabled&&a.online?null:e.createElement(o,{key:b,id:b,ref:a.id,active:this.isActive(a),onClick:a.online?this.initOnlineView.bind(null,a.onlineContentLink):this._openSlideshow,className:"document-grid-item"},e.createElement("div",{className:"searchresult-document-name"},e.createElement("div",{className:"searchresult-document-icon-large"},e.createElement("div",{className:"document-icon","data-type":a.mimeType})),e.createElement("div",{className:"file-name-size"},e.createElement(g,{filepath:q.getItemName(a),className:"file-name"}),e.createElement("div",{className:"file-size"},c)),e.createElement("div",{className:"file-subject-date"},e.createElement(h,{str:a.subject,tagName:"div",className:"file-subject"}),e.createElement(p,{className:"file-date",timestamp:a.creationDate}))),e.createElement("div",{className:"searchresult-document-download"},a.online?this.renderOnlineViewLink(b):this.renderDownLoadLink(b),e.createElement("i",{className:"icon icon-mail-inbox",title:f.str_open_message,onClick:this.openMessage.bind(null,b)})))},this)))},renderDownLoadLink:function(a){return e.createElement("i",{className:"icon icon-download",title:f.str_download,onClick:this.initDownload.bind(null,a)})},renderOnlineViewLink:function(a){return e.createElement("i",{className:"icon icon-link",title:f.str_link_open,onClick:this.initOnlineView.bind(null,a)})},handleKeyDown:function(a){var b=this.getActiveItem();switch(a.keyCode){case 38:a.stopPropagation(),a.preventDefault(),this.keyboardNavigateUp(a.shiftKey,a.ctrlKey);break;case 40:a.stopPropagation(),a.preventDefault(),this.keyboardNavigateDown(a.shiftKey,a.ctrlKey);break;case 13:a.stopPropagation(),a.preventDefault(),b&&this.keyboardEnter(b)}},initDownload:function(a,b){b.stopPropagation(),window.open(this.props.items[a].downloadLink),this._fireRapidStats("srp_file_download",a)},_fireRapidStats:function(a,b){r.logRapid("mt:click",{action:a,append:{mSrchId:this.props.searchId,mClkIdx:b,mVwType:"documents",mFlType:this.props.items[b].mimeType}})},initOnlineView:function(a,b){b.stopPropagation(),window.open(this.props.items[a].onlineContentLink),r.stat({name:"srp_gdocs_grid"})},openMessage:function(a,b){b.stopPropagation(),this.executeAction(v.openMessage,{items:this.props.items,index:a})},getActiveIndex:function(){return this.state.activeIndex},setActiveIndex:function(a){this.setState({activeIndex:a})},getActiveItem:function(){var a=this.state.activeIndex;return 0>a?null:this.props.items[a]},isActive:function(a){return this.props.items[this.getActiveIndex()]===a}}),b.exports=d},{"../../../artifacts/lang":2,"../actions/MessageActions":4,"../common/ComponentUtils":5,"../common/Utils":6,"../utils/DocumentUtils":53,"./Spinner.jsx":23,"./mixins/KeyboardNavigationHelper":28,BidiSafeFilepath:"BidiSafeFilepath",BidiString:"BidiString",Context:"Context",List:"List",ListItem:"ListItem",RelativeDateFormatter:"RelativeDateFormatter",SearchConstants:"SearchConstants",SlideShow:"SlideShow",StatService:"StatService",Utils:"Utils","react/addons":"react/addons"}],9:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"IconButton",propTypes:{disabled:e.PropTypes.bool,tabIndex:e.PropTypes.number,onClick:e.PropTypes.func,iconClass:e.PropTypes.string,buttonClass:e.PropTypes.string},mixins:[e.addons.PureRenderMixin],getDefaultProps:function(){return{iconClass:"",buttonClass:"",disabled:!1}},render:function(){return e.createElement("button",{className:"button-plain "+this.props.buttonClass,title:this.props.title,role:"button","aria-label":this.props.ariaLabel||this.props.title,disabled:this.props.disabled,tabIndex:this.props.tabIndex,"aria-hidden":this.props.ariaHidden,onClick:this.props.onClick},e.createElement("span",{className:"icon "+this.props.iconClass}),this.renderChildren())},renderChildren:function(){return this.props.children?e.createElement("span",{className:"icon-text"},this.props.children):void 0}}),b.exports=d},{"react/addons":"react/addons"}],10:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"ImageWithFallback",propTypes:{url:e.PropTypes.string},mixins:[e.addons.PureRenderMixin],getDefaultProps:function(){return{url:""}},render:function(){var a=e.addons.classSet({"image-with-fallback":!0,"icon-theme":!0,fallback:!0,icon:!0});return e.createElement("span",{className:"photo-results-inside-thumbnail"},e.createElement("span",{className:"srp-right-image-overlay"}),e.createElement("span",{ref:"image",className:"image-with-fallback",style:{backgroundImage:"url("+this.props.url+")"}}),e.createElement("span",{ref:"fallback",className:a}))}}),b.exports=d},{"react/addons":"react/addons"}],11:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("BidiString"),g=a("../../../artifacts/lang"),h=a("StringUtils"),i=a("../common/ComponentUtils"),j=a("Utils"),k=a("List"),l=a("ListItem"),m=a("Context"),n=a("RelativeDateFormatter"),o=a("SearchConstants"),p=a("./mixins/KeyboardNavigationHelper"),q=a("./Spinner.jsx"),r=a("StatService"),s=a("../actions/MessageActions"),t=a("./ImageWithFallback.jsx");d=e.createClass({displayName:"LinkGrid",propTypes:{searchId:e.PropTypes.string.isRequired,currentFilter:e.PropTypes.string},mixins:[p,m],onFocus:function(){this.isFocused=!0},onBlur:function(){this.isFocused=!1},shouldComponentUpdate:function(a,b){return this.props.items!==a.items||this.state.activeIndex!==b.activeIndex;
},componentDidMount:function(){var a=r.timerComplete("doSearchRender");a&&r.featureLatency("srp_render_complete",a),this.setFocusDebounced=i.componentDebounce(this.setFocus.bind(this),32),this.setFocusDebounced()},componentDidUpdate:function(){this.setFocusDebounced()},setFocus:function(){this.isFocused||j.requestAnimationFrame(function(){this.isMounted()&&e.findDOMNode(this).focus()}.bind(this))},componentWillReceiveProps:function(a){a.currentFilter!==this.props.currentFilter&&this.setActiveIndex(-1)},_currentViewType:o.SEARCH_LINK_VIEW,keyboardNavigate:function(a){var b=a?this.navigateUp():this.navigateDown(),c=this.props.items[b],d=this.refs[c&&c.id];this.setActiveIndex(b),d.getDOMNode().scrollIntoViewIfNeeded(a)},keyboardNavigateUp:function(){this.keyboardNavigate(!0)},keyboardNavigateDown:function(){this.keyboardNavigate(!1)},keyboardEnter:function(){this.openLink(this.props.items[this.getActiveIndex()].downloadLink)},_extractLink:function(a){var b=document.createElement("a");return b.setAttribute("href",a),b.hostname},render:function(){return e.createElement("div",{tabIndex:0,onKeyDown:this.handleKeyDown},this.renderContent(),this.props.fetchingMoreItems?this.renderSpinner():null)},renderSpinner:function(){return e.createElement("div",{className:"loading-more"},e.createElement(q,null))},renderContent:function(){return e.createElement("div",{className:"link-grid",onFocus:this.onFocus,onBlur:this.onBlur},e.createElement(k,{className:"link-grid-items"},this.props.items.map(function(a,b){var c=this._extractLink(a.downloadLink);return e.createElement(l,{key:b,id:b,ref:a.id,active:this.isActive(a),className:"link-grid-item",onClick:this.openMessage.bind(null,b)},e.createElement("div",{className:"link-result-summary"},e.createElement("a",{className:"link-preview-box",href:a.downloadLink,target:"_blank",title:g.str_link_open,onClick:this.stopPropagation},e.createElement("div",{className:"link-result-thumbnail-container"},e.createElement(t,{url:a.thumbnail,fallbackIcon:"icon-link",cropSize:80})),e.createElement(f,{str:a.title,tagName:"div",className:"link-result-title"}),e.createElement(f,{str:a.description,tagName:"div",className:"link-result-description"}),e.createElement("div",{className:"link-result-view-on-url"},e.createElement("span",null,h.stringReplace(g.str_links_view_on,{url:e.createElement("span",{className:"link-result-url"},c)})))),e.createElement("div",{className:"link-result-subject-snippet-date",title:g.str_open_message},e.createElement(f,{str:a.subject,tagName:"div",className:"link-result-subject"}),e.createElement(f,{str:a.snippet,tagName:"div",className:"link-result-snippet"}),e.createElement(n,{className:"link-result-date",timestamp:a.creationDate}))))},this)))},handleKeyDown:function(a){var b=this.getActiveItem();switch(a.keyCode){case 38:a.stopPropagation(),a.preventDefault(),this.keyboardNavigateUp(a.shiftKey,a.ctrlKey);break;case 40:a.stopPropagation(),a.preventDefault(),this.keyboardNavigateDown(a.shiftKey,a.ctrlKey);break;case 13:a.stopPropagation(),a.preventDefault(),b&&this.keyboardEnter(b)}},openLink:function(a){window.open(a)},stopPropagation:function(a){a.stopPropagation()},openMessage:function(a,b){b.stopPropagation(),this.executeAction(s.openMessage,{items:this.props.items,index:a})},getActiveIndex:function(){return this.state.activeIndex},setActiveIndex:function(a){this.setState({activeIndex:a})},getActiveItem:function(){var a=this.state.activeIndex;return 0>a?null:this.props.items[a]},isActive:function(a){return this.props.items[this.getActiveIndex()]===a}}),b.exports=d},{"../../../artifacts/lang":2,"../actions/MessageActions":4,"../common/ComponentUtils":5,"./ImageWithFallback.jsx":10,"./Spinner.jsx":23,"./mixins/KeyboardNavigationHelper":28,BidiString:"BidiString",Context:"Context",List:"List",ListItem:"ListItem",RelativeDateFormatter:"RelativeDateFormatter",SearchConstants:"SearchConstants",StatService:"StatService",StringUtils:"StringUtils",Utils:"Utils","react/addons":"react/addons"}],12:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("SearchActions"),h=a("../actions/MessageActions"),i=a("StatService"),j=a("Checkbox"),k=a("ObjectUtils"),l=a("MessageConstants"),m=a("../../../artifacts/lang"),n=a("MenuButton"),o=a("UserSettingsConstants"),p=a("MenuItem"),q=a("MenuItemGroup"),r=a("./MoveMenu.jsx"),s=a("./IconButton.jsx"),t=a("FolderStore"),u=a("Context"),v=a("./SortMenu.jsx"),w=a("../common/Utils");d=e.createClass({displayName:"MessageListToolbar",propTypes:{sortType:e.PropTypes.string,sortOrder:e.PropTypes.string,getSelectedMessages:e.PropTypes.func.isRequired,handleQuickFilter:e.PropTypes.func.isRequired,handleReportSpam:e.PropTypes.func.isRequired,handleArchive:e.PropTypes.func.isRequired,handleDelete:e.PropTypes.func.isRequired,handleMove:e.PropTypes.func.isRequired,handleRestore:e.PropTypes.func.isRequired,handleStar:e.PropTypes.func.isRequired,handleUnsubscribe:e.PropTypes.func.isRequired,handleMark:e.PropTypes.func.isRequired,handlePrint:e.PropTypes.func.isRequired,handleSortChange:e.PropTypes.func,unsubscribrEnabled:e.PropTypes.bool.isRequired,getActiveIndex:e.PropTypes.func,setActiveIndex:e.PropTypes.func},mixins:[u],getDefaultProps:function(){return{sortType:o.MSG_SORT_TYPE_DATE,sortOrder:o.MSG_SORT_ORDER_DOWN,imapInEnabled:!1,isArchive:!1,handleSortChange:f.noop,getSelectedMessages:f.noop,handleQuickFilter:f.noop,handleReportSpam:f.noop,handleArchive:f.noop,handleDelete:f.noop,handleMove:f.noop,handleRestore:f.noop,handleStar:f.noop,handleUnsubscribe:f.noop,unsubscribrEnabled:!1,handleMark:f.noop,handlePrint:f.noop,getActiveIndex:f.noop,setActiveIndex:f.noop}},render:function(){var a=this.props,b=this.handleMessageAction,c=!this.hasVisibleMessages(a.items),d=this.props.selectedItemsObj,g="all"===d.selectedFilter,h=f.size(d.selectedItems)>0,k=f.size(d.deselectedItems)>0,o=a.isRefinedByArchiveFolder,q=a.getActiveIndex()>-1,r=[],t=null,u=null,x=!(q||h||g)||c,y="macintosh"===w.getOS()?m.str_checkbox_all_label_mac:m.str_checkbox_all_label_other,z=e.addons.classSet({"archive-button":!o,"btn-restore":o}),A=function(){i.logRapid("mt:click",{action:"search_tlbr_select_dd"})};return r.push(e.createElement("li",{className:"checkbox-menu",role:"presentation"},e.createElement(j,{isMixed:!q&&g&&k||!g&&h,isSelected:!q&&g&&!c,onChange:this.onCheckboxChange,title:y,disabled:c}),e.createElement(n,{className:"checkbox-down-arrow button-plain",ddClassName:"select-option-menu",ariaLabel:m.str_checkbox_dropdown_menu,onOpen:A,showChevron:!0},e.createElement(p,{onClick:this.onSelectAll,title:m.str_all_uppercase,value:"select-all"},m.str_all_uppercase),e.createElement(p,{onClick:this.onSelectNone,title:m.str_none,value:"select-none"},m.str_none)))),r.push(e.createElement("li",{className:z},e.createElement(s,{iconClass:o?"icon-restore-inbox":"icon-archive",title:o?m.str_restore_to_inbox_label:m.str_archive_button_label,onClick:o?b.bind(null,l.RESTORE):b.bind(null,l.ARCHIVE),disabled:x},o?m.str_restore_to_inbox:m.str_archive))),t=e.createElement("li",{className:"delete-menu"},e.createElement(s,{iconClass:"icon-delete",title:m.str_delete_button_label,onClick:b.bind(null,l.DELETE),disabled:x},m.str_delete)),u=this.renderMoveMenu(x),this.props.isArchive?(r.push(u),r.push(t)):(r.push(t),r.push(u)),r.push(this.renderSpamMenu(x)),r.push(this.renderMoreMenu(x)),e.createElement("ul",{className:"message-list-toolbar","aria-label":m.str_search_results_toolbar},e.createElement("ul",{className:"left-toolbar",role:"presentation"},r),e.createElement("ul",{className:"right-toolbar",role:"presentation"},e.createElement("li",{className:"sort-menu",role:"presentation"},e.createElement(v,{sortType:a.sortType,sortOrder:a.sortOrder,searchId:a.searchId,query:a.query,handleSortChange:a.handleSortChange}))))},getMoveMenuStatus:function(){var a,b=this,c=b.props,d=!1,e=c.selectedItemsObj.selectedItems||[],g=this.props.currentAccount,h=[];return f.forEach(k.getValue(c.query,"folders",[]),function(a){f.isEmpty(a.acctIds)||(h=h.concat(a.acctIds))}),this.props.hasMultipleAccounts?1===f.size(h)?(d=!0,a=h[0]):c.selectedItemsObj.selectedFilter||f.find(e,function(c){var e=b.getStore(t).findByIndex(c.folderNumber);if(a){if(a!==e.acctId)return d=!1,!0}else a=e.acctId,d=!0}):(d=!0,a=g.id),{moveMenuEnabled:d,selectedMessageAccount:a}},renderMoveMenu:function(a){var b=this.getMoveMenuStatus(),c=function(){i.logRapid("mt:click",{action:"search_tlbr_menubtn_move"})};return e.createElement("li",{className:"move-menu"},e.createElement(n,{keyboardNavDisabled:!0,ref:"moveMenu",className:"button-plain",ddClassName:"move-menu-dd",disabled:a||!b.moveMenuEnabled,onOpen:c,title:m.str_move_button_label,label:e.createElement("span",null,e.createElement("span",{className:"icon icon-move"}),e.createElement("span",{className:"button-text"},m.str_move)),showChevron:!0},e.createElement(p,null,e.createElement(r,{selectedMessageAccount:b.selectedMessageAccount,handleMessageAction:this.handleMessageAction,imapInEnabled:this.props.imapInEnabled}))))},renderSpamMenu:function(a){var b=this.handleMessageAction,c=function(){i.logRapid("mt:click",{action:"search_tlbr_menubtn_spam"})};return e.createElement("li",{className:"spam-menu"},e.createElement(s,{iconClass:"icon-spam",title:m.str_spam_button_label,disabled:a,onClick:b.bind(null,l.REPORT_SPAM,{type:l.SPAM_TYPE_NORMAL,menuAction:!1,rapidParams:{t3view:"spam"}})},m.str_spam),e.createElement(n,{className:"button-plain",disabled:a,onOpen:c,ariaLabel:m.str_spam_button_more_options,showChevron:!0},e.createElement(p,{title:m.str_menu_spam,onClick:b.bind(null,l.REPORT_SPAM,{type:l.SPAM_TYPE_NORMAL,menuAction:!0,rapidParams:{ltxt:"spam",t3view:"spam"}})},m.str_menu_spam),e.createElement(p,{title:m.str_menu_spam_comp,onClick:b.bind(null,l.REPORT_SPAM,{type:l.SPAM_TYPE_HACKED,menuAction:!0,rapidParams:{ltxt:"hacked",t3view:"hacked"}})},m.str_menu_spam_comp),e.createElement(p,{title:m.str_menu_spam_phish,onClick:b.bind(null,l.REPORT_SPAM,{type:l.SPAM_TYPE_PHISH,menuAction:!0,rapidParams:{ltxt:"phished",t3view:"phished"}})},m.str_menu_spam_phish),e.createElement(p,{title:m.str_menu_spam_notforme,onClick:b.bind(null,l.REPORT_SPAM,{type:l.SPAM_TYPE_NOTMINE,menuAction:!0,rapidParams:{ltxt:"notmymail",t3view:"notmymail"}})},m.str_menu_spam_notforme)))},renderMoreMenu:function(a){var b=this.handleMessageAction,c=function(){i.logRapid("mt:click",{action:"search_tlbr_menubtn_actions"})};return e.createElement("li",{className:"more-menu"},e.createElement(n,{className:"button-plain",disabled:a,onOpen:c,title:m.str_more_button_label,label:e.createElement("span",null,e.createElement("span",{className:"icon icon-more"}),e.createElement("span",{className:"button-text"},m.str_more)),showChevron:!0},e.createElement(q,null,e.createElement(p,{value:"mark_read",onClick:b.bind(null,l.MARK_READ),title:m.str_mark_as_read},e.createElement("kbd",{"aria-hidden":"true"},m.str_menu_accel_k),m.str_mark_as_read),e.createElement(p,{value:"mark_unread",onClick:b.bind(null,l.MARK_UNREAD),title:m.str_mark_as_unread},e.createElement("kbd",{"aria-hidden":"true"},m.str_menu_accel_shift_k),m.str_mark_as_unread),e.createElement(p,{value:"star",onClick:b.bind(null,l.STAR),title:m.str_star},e.createElement("kbd",{"aria-hidden":"true"},m.str_menu_accel_l),m.str_star),e.createElement(p,{value:"unstar",onClick:b.bind(null,l.UNSTAR),title:m.str_unstar},e.createElement("kbd",{"aria-hidden":"true"},m.str_menu_accel_shift_l),m.str_unstar),this.renderUnsubscribe()),e.createElement(q,null,e.createElement(p,{value:"print",onClick:b.bind(null,l.PRINT),title:m.str_menu_print},e.createElement("kbd",{"aria-hidden":"true"},m.str_menu_accel_p),m.str_menu_print),e.createElement(p,{value:"filter",onClick:b.bind(null,l.QUICK_FILTER),title:m.str_menu_filter_emails_like_this,disabled:1!==this.props.getSelectedMessages().length},m.str_menu_filter_emails_like_this)),e.createElement(q,null,e.createElement(p,{value:"encode",title:m.str_menu_encodings,onClick:b.bind(null,l.SET_ENCODING)},m.str_menu_encodings))))},renderUnsubscribe:function(){return this.props.unsubscribrEnabled?e.createElement(p,{value:"unsubscribe",onClick:this.handleMessageAction.bind(null,l.UNSUBSCRIBE),title:m.str_block},m.str_block):null},hasVisibleMessages:function(a){return f.find(a,function(a){return"undefined"==typeof a.isVisible||a.isVisible===!0})},executeMessageAction:function(a,b){b=f.merge(b,{searchId:this.props.searchId}),this.executeAction(a,b)},onCheckboxChange:function(){var a=this.props.selectedItemsObj,b=!a.selectedFilter;b?this.onSelectAll():this.onSelectNone()},selectItems:function x(a){var x=k.getValue(this.props.selectedItemsObj,["selectedItems"]);this.props.setActiveIndex(-1),a&&!f.size(x)&&(x=f.indexBy(this.props.items,"id")),a||(x={}),this.executeAction(g.setSelectedItems,{searchId:this.props.searchId,selectedItems:x||{},deselectedItems:{},selectedFilter:a})},onSelectNone:function(){this.selectItems(null),this.props.setActiveIndex(-1),i.logRapid("mt:click",{action:"search_msglist_selectMnu",append:{ltxt:"sel_none"}})},onSelectAll:function(){this.selectItems("all"),this.props.setActiveIndex(-1),i.logRapid("mt:click",{action:"search_msglist_selectMnu",append:{ltxt:"sel_all"}})},handleMessageAction:function(a,b){var c,d,e,g,h=this.props,j="",m="",n={};switch(a){case l.MOVE:h.handleMove(b),j="move",m="search_tlbr_menusel_move",n={ltxt:"move",t3view:"move"};break;case l.REPORT_SPAM:h.handleReportSpam(b.type),j="mark_as_spam",b.menuAction?(m="search_tlbr_menusel_spam",n=b.rapidParams):(m="search_tlbr_spam",n={t3view:"spam"});break;case l.ARCHIVE:h.handleArchive(b.type),j="archive",m="search_tlbr_archive",n={t3view:"archive"};break;case l.RESTORE:c=k.getValue(this.props,["query","folders",0,"acctIds",0],"")||"",d=this.getStore(t).getFoldersByAccount(c)||[],e=f.find(d,function(a){return"Inbox"===a.folderInfo.name||"INBOX"===a.types[0]}),g=k.getValue(e,["folderInfo","fid"],""),h.handleRestore(g),j="restore",m="search_tlbr_restore",n={t3view:"restore"};break;case l.DELETE:h.handleDelete(),j="delete",m="search_tlbr_delete",n={t3view:"delete"};break;case l.MARK_READ:h.handleMark(!0),j="mark_read",m="search_tlbr_menusel_actions",n={ltxt:"read",t3view:"read"};break;case l.MARK_UNREAD:h.handleMark(!1),j="mark_unread",m="search_tlbr_menusel_actions",n={ltxt:"unread",t3view:"unread"};break;case l.STAR:h.handleStar(!0),j="mark_starred",m="search_tlbr_menusel_actions",n={ltxt:"flagged",t3view:"flagged"};break;case l.UNSTAR:h.handleStar(!1),j="mark_unstarred",m="search_tlbr_menusel_actions",n={ltxt:"unflagged",t3view:"unflagged"};break;case l.UNSUBSCRIBE:h.handleUnsubscribe(),j="unsubscribe",m="search_tlbr_menusel_actions",n={ltxt:"unsubscribe",t3view:"unsubscribe"};break;case l.PRINT:h.handlePrint(),j="print",m="search_tlbr_menusel_actions",n={rspns:"pop",ltxt:"print",t3view:"print"};break;case l.QUICK_FILTER:h.handleQuickFilter(),j="add_quick_filter",m="search_tlbr_menusel_actions",n={ltxt:"quick_filter",t3view:"quick_filter"};break;case l.SET_ENCODING:this.handleEncoding(),j="set_encodings",m="search_tlbr_menusel_actions",n={rspns:"pop",ltxt:"set_encodings",t3view:"set_encodings"};break;default:throw Error("Invalid message action")}i.stat({name:"srp_header_toolbar",tags:{action:j,actionType:this.props.getSelectedMessages().length>1?"bulk":"single"}}),m&&i.logRapid("mt:click",{action:m,append:n})},handleEncoding:function(){this.executeAction(h.setEncoding,{messages:this.props.getSelectedMessages()})},handleKeyDown:function(a){var b=this.refs.moveMenu,c=w.getOS(),d=a.ctrlKey,e=a.metaKey,f=a.shiftKey;switch(a.keyCode){case 65:(d&&"macintosh"!==c||e&&"macintosh"===c)&&(a.preventDefault(),this.selectItems("all"===this.props.selectedItemsObj.selectedFilter?null:"all"));break;case 68:this.getMoveMenuStatus().moveMenuEnabled&&(d||e||!f?d||e||f||b.openMenu():b.openMenu({focused:!0}))}}}),b.exports=d},{"../../../artifacts/lang":2,"../actions/MessageActions":4,"../common/Utils":6,"./IconButton.jsx":9,"./MoveMenu.jsx":15,"./SortMenu.jsx":22,Checkbox:"Checkbox",Context:"Context",FolderStore:"FolderStore",MenuButton:"MenuButton",MenuItem:"MenuItem",MenuItemGroup:"MenuItemGroup",MessageConstants:"MessageConstants",ObjectUtils:"ObjectUtils",SearchActions:"SearchActions",StatService:"StatService",UserSettingsConstants:"UserSettingsConstants",lodash:"lodash","react/addons":"react/addons"}],13:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("./ModalBody.jsx");d=e.createClass({displayName:"Modal",componentDidMount:function(){this.containerElement=document.createElement("div"),this.modal=e.render(e.createElement(f,null,this.props.children),this.containerElement,function(){document.documentElement.classList.add("dlg-show"),document.body.appendChild(this.containerElement)}.bind(this))},componentWillUnmount:function(){document.documentElement.classList.remove("dlg-show"),e.unmountComponentAtNode(this.containerElement),document.body.removeChild(this.containerElement)},componentWillReceiveProps:function(a){this.modal.setProps({children:a.children})},render:function(){return e.createElement("div",null)}}),b.exports=d},{"./ModalBody.jsx":14,"react/addons":"react/addons"}],14:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"ModalBody",render:function(){return e.createElement("div",null,e.createElement("div",{className:"react-modal"},this.props.children),e.createElement("div",{className:"overlay-mask"}))}}),b.exports=d},{"react/addons":"react/addons"}],15:[function(a,b,c){"use strict";function d(a){var b={};return a.forEach(function(a){var c="",d=a.folderInfo.name.split("/").map(function(a){return c=c?c+"/"+a:a});"undefined"==typeof m.getValue(b,d)&&m.setValue(b,d,{})}),b}function e(a,b){var c,d,f,g=[];return b&&(c=b.split("/"),d=c.length-1,f=c[d],g.push({name:b,depth:d,displayName:f,isSystemFolder:!1})),j.forEach(a,function(a,b){g=g.concat(e(a,b))}),g}function f(a){return e(d(a))}var g,h=a("react/addons"),i=a("FolderStore"),j=a("lodash"),k=a("../common/ComponentUtils"),l=a("DOMUtils"),m=a("ObjectUtils"),n=a("Context"),o=a("StringUtils"),p=a("MessageConstants"),q=a("ListNavigation"),r=a("ListItem"),s=a("Template"),t=a("../../../artifacts/lang"),u=h.addons.CSSTransitionGroup;g=h.createClass({displayName:"MoveMenu",propTypes:{handleMessageAction:h.PropTypes.func.isRequired,closeMenu:h.PropTypes.func,selectedMessageAccount:h.PropTypes.string.isRequired},itemPrefix:"item",getDefaultProps:function(){return{handleMessageAction:j.noop,closeMenu:j.noop,menuContentConfig:{}}},mixins:[n,h.addons.PureRenderMixin,q],getInitialState:function(){var a=this.props.imapInEnabled,b=this.getStore(i),c=a?b.getMoveableUserFoldersByAccount(this.props.selectedMessageAccount):b.getUserFolders(),d=f(c).map(function(a){return a.isUserFolder=!0,a}),e=a?b.getMoveableSystemFoldersByAccount(this.props.selectedMessageAccount):b.getMoveableSystemFoldersInOrder(),g=e.map(function(a){return{name:a.folderInfo.name,isSystemFolder:!0,depth:0,displayName:b.getLocalizedFolderNameById(a.id),sortIndex:b.getMoveMenuSystemFolderIndex(a.folderInfo.name)}}).sort(b.sortMoveMenuSystemFolder),h=[{displayName:t.str_create_folder,depth:0,name:"New Folder",isNewFolder:!0}];return this.userFolders=d,this.systemFolders=g,this.createFolderGroup=h,this.defaultFolderGroups=[d,g,h],{inputValue:"",selectedIndex:-1,focused:!1,newFolderName:"",errorFolderName:!1,chooseToCreateNewFolder:!1,foldersGroups:this.addIndex(this.defaultFolderGroups)}},componentDidMount:function(){this._toggleKeyboardListener(!0),this.props.menuContentConfig.focused&&setTimeout(this.focus,500),this.refreshFolderListDebounced=k.componentDebounce(this.refreshFolderList,100)},componentDidUpdate:function(){this.state.chooseToCreateNewFolder&&this.refs.createFolderInput&&this.refs.createFolderInput.getDOMNode().focus()},componentWillUnmount:function(){this._toggleKeyboardListener(!1)},_toggleKeyboardListener:function(a){window[a?"addEventListener":"removeEventListener"]("keydown",this.handleWindowKeydown,!0)},render:function(){return h.createElement("div",{onClick:this.stopPropagation},h.createElement("div",{className:"folder-search-input"},h.createElement("span",{className:"icon icon-search",onClick:this.onSearchIconClick}),h.createElement("input",{className:"move-menu-input",value:this.state.inputValue,onFocus:this.onFocus,onClick:this.onInputClick,ref:"folderNameInput",placeholder:t.str_find_a_folder,onChange:this.handleChange}),this.renderCloseIconOrKBD()),h.createElement(u,{component:"ul",transitionName:"folder-animation"},this.state.foldersGroups.map(this.renderFolderGroup)))},stopPropagation:function(a){a.stopPropagation()},onSearchIconClick:function(a){l.halt(a),this.focus()},renderCloseIconOrKBD:function(){var a;return this.state.inputValue?a=h.createElement("span",{key:"close",className:"icon icon-close",onClick:this.clearInput}):this.state.focused||(a=h.createElement("kbd",{key:"key-nav"},o.stringReplace(t.str_keyboard_nav_x_plus_y,{btnX:h.createElement("kbd",null,"Shift"),btnY:h.createElement("kbd",null,"D")}))),h.createElement(u,{className:"folder-input-shortcut",transitionName:"folder-shortcut"},a)},onInputClick:function(a){a.stopPropagation()},addIndex:function(a){var b=0;return a.forEach(function(a){a.forEach(function(a){a.index=b++})}),a},clearInput:function(a){l.halt(a),this.setState({inputValue:"",foldersGroups:this.addIndex(this.defaultFolderGroups)}),this.focus()},onBlur:function(){this.setState({newFolderName:"",errorFolderName:!1,chooseToCreateNewFolder:!1})},onFocus:function(){this.setState({focused:!0})},renderFolderGroup:function(a){var b=a[0]||{},c=h.addons.classSet({"folder-group":!0,"system-folder-group":b.isSystemFolder,"user-folder-group":b.isUserFolder,"new-folder-group":b.isNewFolder}),d=b.isSystemFolder?"system-folder-group":b.isUserFolder?"user-folder-group":"new-folder-group";return a&&a.length?h.createElement("li",{key:d,"data-value":d},h.createElement(u,{className:c,component:"ul",transitionName:"folder-animation"},a.map(this.renderFolderItem))):null},toggleCreateFolder:function(a){var b=this;a.stopPropagation(),a.preventDefault(),NeoConfig.imapIn?b.state.chooseToCreateNewFolder||b.setState({chooseToCreateNewFolder:!0}):b.createNewFolder()},createNewFolder:function(){var a,b,c=this,d=function(a){c.props.handleMessageAction(p.MOVE,a.fid),c.closeMenu()};if(NeoConfig.imapIn){if(b=j.escape(c.refs.createFolderInput.getDOMNode().value),!c.isFolderNameValid(b))return;a=function(){c.setState({errorFolderName:b})},yui.use("mail-ui-folderevents","mail-controller-folders",function(e){e.mail.ui.FolderEvents.createFolder(null,null,null,null,{reason:c.props.imapInEnabled?null:"move",successCallback:d,failureCallback:a,acctId:c.props.selectedMessageAccount,folderName:b,imapInEnabled:!0})})}else yui.use("mail-ui-folderevents","mail-controller-folders",function(a){a.mail.ui.FolderEvents.createFolder(function(a){c.props.handleMessageAction(p.MOVE,a.fid)},null)})},handleNewFolderInputChange:function(a){var b=this,c=a.target.value,d=b.isFolderNameValid(c);this.setState({newFolderName:c,errorFolderName:d?!1:t.str_create_folder_requirement})},isFolderNameValid:function(a){var b=/[%\\\/\n\r\f\t]+/;return!b.test(a)},removeInputText:function(){this.setState({newFolderName:""})},renderCreateFolder:function(a){var b,c,d,e,f=this,g=h.addons.classSet,i=f.state.chooseToCreateNewFolder,j=g({"move-menu-create-folder":i,"move-menu-item":!0});return i?(b=f.state.errorFolderName,d=b&&b!==t.str_create_folder_requirement?h.createElement(s,{tmpl:t.str_create_folder_fail,folderName:b}):h.createElement(s,{tmpl:t.str_create_folder_requirement}),c=f.state.newFolderName?h.createElement("span",{key:"moveMenuInputCloseBtn",className:"icon icon-close",onClick:f.removeInputText}):h.createElement("span",null),e=h.createElement("div",{className:b?"folder-menu-create-fail":""},h.createElement("div",null,h.createElement("input",{onBlur:f.onBlur,onFocus:f.onFocus,onChange:f.handleNewFolderInputChange,value:f.state.newFolderName,ref:"createFolderInput",className:"folder-menu-input",placeholder:t.str_new_folder}),h.createElement(u,{transitionName:"input-close-btn"},c)),h.createElement("div",{className:"folder-menu-create-info"},d))):e=h.createElement("span",{className:"folder-name"},a.displayName),h.createElement(r,{active:a.index===f.state.selectedIndex,className:j,id:a.index,key:a.name,ref:f.itemPrefix+a.index,onActive:f.onItemActive,onClick:f.toggleCreateFolder},h.createElement("div",{className:"move-menu-item-inner","data-value":a.name},e))},renderFolderItem:function(a){var b={paddingLeft:this.state.inputValue?0:20*a.depth};return a.isNewFolder?this.renderCreateFolder(a):h.createElement(r,{active:a.index===this.state.selectedIndex,onActive:this.onItemActive,key:a.name,ref:this.itemPrefix+a.index,className:"move-menu-item",onClick:this.handleClick,id:a.index},h.createElement("div",{className:"move-menu-item-inner","data-value":a.name},h.createElement("span",{className:"folder-name",style:b,dir:o.getTextDirection(a.displayName)},a.displayName),h.createElement("span",{className:"folder-shortcut"},this.renderKbd(a.index+1,a))))},handleClick:function(a,b){l.halt(a),this.closeMenu(),this.handleMove(b)},renderKbd:function(a,b){var c="";return this.state.focused?c="":a>0&&10>a&&b.isUserFolder?c=o.stringReplace(t.str_keyboard_nav_x_then_y,{btnX:h.createElement("kbd",null,"D"),btnY:h.createElement("kbd",null,a)}):b.isSystemFolder&&"Inbox"===b.name?c=o.stringReplace(t.str_keyboard_nav_x_then_y,{btnX:h.createElement("kbd",null,"D"),btnY:h.createElement("kbd",null,"0")}):b.isSystemFolder&&"Archive"===b.name&&(c=h.createElement("kbd",null,t.str_menu_accel_archive)),h.createElement(u,{transitionName:"folder-shortcut"},h.createElement("kbd",null,c))},onItemActive:function(a){a.getDOMNode().scrollIntoView(!1)},closeMenu:function(){this.props.closeMenu()},handleWindowKeydown:function(a){var b,c=a.keyCode,d=c-48;if(a.stopPropagation(),this.state.focused||a.preventDefault(),this.state.focused||0!==d)if(!this.state.focused&&d>0&&10>d&&d<this.userFolders.length+1)this.handleMove(d-1),this.closeMenu();else switch(c){case 13:b=this.refs.createFolderInput,b&&b.getDOMNode()===a.target?(a.preventDefault(),this.createNewFolder()):this.state.selectedIndex>-1&&this.refs[this.itemPrefix+this.state.selectedIndex].getDOMNode().click();break;case 27:this.closeMenu();break;case 38:this.navigateUp();break;case 40:this.navigateDown()}else this.moveToInbox(),this.closeMenu()},focus:function(){this.refs.folderNameInput.getDOMNode().focus()},getFolderID:function(a){var b,c,d=j.find(this.getItems(),function(b){return b.index===a}),e=this.getStore(i).getFoldersByAccount(this.props.selectedMessageAccount);return d&&(b=j.find(e,function(a){return a.folderInfo.name===d.name}),c=b.folderInfo.fid),c},handleMove:function(a){var b=this.getFolderID(a);b&&this.props.handleMessageAction(p.MOVE,b)},moveToInbox:function(){var a,b,c;this.props.imapInEnabled?(a=this.getStore(i).getMoveableSystemFoldersByAccount(this.props.selectedMessageAccount),b=j.find(a,function(a){return a.types&&-1!==a.types.indexOf("INBOX")}),c=m.getValue(b,["folderInfo","fid"])):c="Inbox",this.props.handleMessageAction(p.MOVE,c)},refreshFolderList:function(){var a=this.state.inputValue;a?this.setState({foldersGroups:this.getMatchedFolderGroups(a)}):this.setState({foldersGroups:this.addIndex(this.defaultFolderGroups)})},handleChange:function(a){this.setState({inputValue:a.target.value,selectedIndex:-1},function(){this.refreshFolderListDebounced()})},getMatchedFolderGroups:function(a){return this.addIndex([j.flatten([this.userFolders,this.systemFolders]).filter(function(b){return b.displayName.toLowerCase().indexOf(a.toLowerCase())>-1}),this.createFolderGroup])},getItems:function(){return j.flatten(this.state.foldersGroups)}}),b.exports=g},{"../../../artifacts/lang":2,"../common/ComponentUtils":5,Context:"Context",DOMUtils:"DOMUtils",FolderStore:"FolderStore",ListItem:"ListItem",ListNavigation:"ListNavigation",MessageConstants:"MessageConstants",ObjectUtils:"ObjectUtils",StringUtils:"StringUtils",Template:"Template",lodash:"lodash","react/addons":"react/addons"}],16:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("../common/Utils"),g=a("../common/ComponentUtils"),h=a("Utils"),i=a("List"),j=a("ListItem"),k=a("RelativeDateFormatter"),l=a("SearchConstants"),m=a("../actions/MessageActions"),n=a("SlideShow"),o=a("Context"),p=a("./mixins/KeyboardNavigationHelper"),q=a("StatService"),r=a("./ImageWithFallback.jsx"),s=a("../utils/Attachment").convertThumbnailURL,t=a("BidiSafeFilepath"),u=a("./Spinner.jsx");d=e.createClass({displayName:"PhotoGrid",propTypes:{searchId:e.PropTypes.string.isRequired,currentFilter:e.PropTypes.string},mixins:[o,p],getInitialState:function(){return{activeIndex:-1,canShowSlideView:!1}},onFocus:function(){this.isFocused=!0},onBlur:function(){this.isFocused=!1},shouldComponentUpdate:function(a,b){return this.props.items!==a.items||this.state.activeIndex!==b.activeIndex||this.state.canShowSlideView!==b.canShowSlideView},componentDidMount:function(){var a=q.timerComplete("doSearchRender");a&&q.featureLatency("srp_render_complete",a),this.setFocus(),this.setFocusDebounced=g.componentDebounce(this.setFocus,32)},componentDidUpdate:function(){this.setFocusDebounced()},setFocus:function(){this.isFocused||h.requestAnimationFrame(function(){this.isMounted()&&e.findDOMNode(this).focus()}.bind(this))},componentWillReceiveProps:function(a){a.currentFilter!==this.props.currentFilter&&this.setActiveIndex(-1)},render:function(){return e.createElement("div",{tabIndex:0,onKeyDown:this.handleKeyDown},this.renderContent(),this.props.fetchingMoreItems?this.renderSpinner():null)},renderSpinner:function(){return e.createElement("div",{className:"loading-more"},e.createElement(u,null))},closeSlideShow:function(){this.setState({canShowSlideView:!1})},renderContent:function(){return e.createElement("div",{className:"photo-grid",onFocus:this.onFocus,onBlur:this.onBlur},e.createElement(n,{items:this.props.items,activeIndex:this.state.activeIndex,visible:this.state.canShowSlideView,setActiveIndex:this.setActiveIndex,closeSlideShow:this.closeSlideShow}),e.createElement(i,{className:"photo-grid-items"},this.props.items.map(function(a,b){var c=f.toHumanReadableFileSize(a.size);return e.createElement(j,{key:b,id:b,ref:a.id,className:"photo-grid-item",active:this.isActive(a),onClick:this._openSlideshow},e.createElement(r,{url:s(a.thumbnail,150)}),e.createElement("div",{className:"photo-overlay"},e.createElement(t,{filepath:a.name,tagName:"p",className:"photo-filename",title:a.name}),e.createElement("p",{className:"photo-size",title:c},c),e.createElement(k,{className:"photo-date",timestamp:a.creationDate}),e.createElement("a",{className:"icon-download photo-overlay-icons",href:a.downloadLink,onClick:this.handleClick.bind(null,b)}),e.createElement("div",{className:"icon-mail-inbox photo-overlay-icons",onClick:this.openMessage.bind(null,b)})))},this)))},handleKeyDown:function(a){var b=this.getActiveItem();switch(a.keyCode){case 38:case 37:a.stopPropagation(),a.preventDefault(),this.keyboardNavigateUp(a.shiftKey,a.ctrlKey);break;case 39:case 40:a.stopPropagation(),a.preventDefault(),this.keyboardNavigateDown(a.shiftKey,a.ctrlKey);break;case 13:a.stopPropagation(),a.preventDefault(),b&&this.keyboardEnter(b)}},openMessage:function(a,b){b.stopPropagation(),this.executeAction(m.openMessage,{items:this.props.items,index:a})},handleClick:function(a,b){b.stopPropagation(),this._fireRapidStats("srp_file_download",a)},_currentViewType:l.SEARCH_PHOTO_VIEW,_openSlideshow:function(a,b){this.setActiveIndex(b),this.setLastIndex(b),this.setState({canShowSlideView:!0}),this._fireRapidStats("srp_file_view",b)},_fireRapidStats:function(a,b){q.logRapid("mt:click",{action:a,append:{mSrchId:this.props.searchId,mClkIdx:b,mVwType:"photos",mFlType:this.props.items[b].mimeType}})},keyboardNavigateDown:function(){this.keyboardNavigate(!1)},keyboardNavigateUp:function(){this.keyboardNavigate(!0)},keyboardNavigateRight:function(){this.keyboardNavigate(!1);
},keyboardNavigateLeft:function(){this.keyboardNavigate(!0)},keyboardNavigate:function(a){var b=a?this.navigateUp():this.navigateDown(),c=this.props.items[b],d=this.refs[c&&c.id];this.setActiveIndex(b),d.getDOMNode().scrollIntoViewIfNeeded(a)},keyboardEnter:function(){this._openSlideshow(null,this.state.activeIndex)},getActiveIndex:function(){return this.state.activeIndex},setActiveIndex:function(a){this.setState({activeIndex:a})},getActiveItem:function(){var a=this.state.activeIndex;return 0>a?null:this.props.items[a]},isActive:function(a){return this.props.items[this.getActiveIndex()]===a}}),b.exports=d},{"../actions/MessageActions":4,"../common/ComponentUtils":5,"../common/Utils":6,"../utils/Attachment":52,"./ImageWithFallback.jsx":10,"./Spinner.jsx":23,"./mixins/KeyboardNavigationHelper":28,BidiSafeFilepath:"BidiSafeFilepath",Context:"Context",List:"List",ListItem:"ListItem",RelativeDateFormatter:"RelativeDateFormatter",SearchConstants:"SearchConstants",SlideShow:"SlideShow",StatService:"StatService",Utils:"Utils","react/addons":"react/addons"}],17:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("Context"),g=a("../../../artifacts/lang"),h=a("Template"),i=a("./Modal.jsx"),j=a("ProgressStore"),k=a("../actions/MessageActions");d=e.createClass({displayName:"ProgressBar",mixins:[f],getInitialState:function(){return{isOpen:!1,progress:0,title:""}},componentDidMount:function(){this.getStore(j).on("changed",this.handleProgressStoreChange)},componentWillUnmount:function(){this.getStore(j).removeListener("changed",this.handleProgressStoreChange)},cancel:function(){this.executeAction(k.cancelBulkAction,{promise:this.getStore(j).getData().promise})},close:function(){this.setState({progress:0,title:"",isOpen:!1},function(){this.props.onDestroy()}.bind(this))},handleProgressStoreChange:function(){var a,b=this,c=b.getStore(j).getData();a=c.progress&&c.progress>0?c.progress/100:c.total&&c.total>0?(c.total-c.from)/c.total:0,c.progressing?b.setState({isOpen:!0,title:c.title,progress:a}):setTimeout(function(){b.close()},500)},render:function(){return this.state.isOpen?this.props.sleekProgressBarEnabled?this.renderSleekContent():this.renderContent():null},renderContent:function(){var a=Math.round(100*this.state.progress),b={width:a+"%"};return e.createElement(i,null,e.createElement("div",{className:"react-progressbar-dialog react-confirm-dialog modal",role:"dialog"},e.createElement("h2",{className:"modal-hd"},this.state.title),e.createElement("div",{className:"modal-bd"},e.createElement("p",null,e.createElement(h,{percentage:a,tmpl:g.str_modal_message_bulk_action_message}))),e.createElement("div",{className:"progress-indicator"},e.createElement("div",{className:"progress",style:b})),e.createElement("div",{className:"modal-ft"},e.createElement("button",{className:"btn left right default","aria-label":g.str_btn_cancel,onClick:this.cancel},g.str_btn_cancel))))},renderSleekContent:function(){var a=5,b=Math.round(100*this.state.progress),c=a>=b?a:b,d={width:c+"%"};return e.createElement(i,null,e.createElement("div",{className:"react-sleekprogressbar-dialog react-confirm-dialog modal",role:"dialog"},e.createElement("div",{className:"progress-indicator"},e.createElement("div",{className:"progress-background"},e.createElement("div",{className:"progress",style:d}),e.createElement("span",{className:"blink-progress"})),e.createElement("span",{className:"percentage"},e.createElement(h,{percentage:c,tmpl:g.str_sleek_modal_message_bulk_percentage}))),e.createElement("div",{className:"modal-ft"},this.state.title,e.createElement("a",{className:"cancel",onClick:this.cancel},g.str_btn_cancel))))}}),b.exports=d},{"../../../artifacts/lang":2,"../actions/MessageActions":4,"./Modal.jsx":13,Context:"Context",ProgressStore:"ProgressStore",Template:"Template","react/addons":"react/addons"}],18:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("../../../artifacts/lang");d=e.createClass({displayName:"SearchError",render:function(){return e.createElement("div",null,f.str_search_error)}}),b.exports=d},{"../../../artifacts/lang":2,"react/addons":"react/addons"}],19:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("Context"),g=a("Template"),h=a("../../../artifacts/lang");d=e.createClass({displayName:"SearchInsteadOptions",propTypes:{query:e.PropTypes.object,jumpToAdvancedSearch:e.PropTypes.func},mixins:[f],render:function(){return e.createElement("div",{className:"empty-search-result"},this.renderResearchOption(),this.renderAdvancedSearch())},renderAdvancedSearch:function(){return e.createElement("span",{className:"empty-srp-advance-search",onClick:this.handleAdvancedSearch,"data-preventclose":!0},e.createElement(g,{tmpl:h.str_try_advanced_search}))},renderResearchOption:function(){var a,b,c=this.props.query;return a=c.keyword||"",b=c.suggestion&&c.suggestion.displayStr||"",a||b?e.createElement("span",{onClick:this.reSearchInAllMails},e.createElement(g,{tmpl:h.str_try_search_all_mails_instead,people_text:b,keyword_text:a})):void 0},handleAdvancedSearch:function(a){"BUTTON"===a.target.tagName&&this.props.jumpToAdvancedSearch()},reSearchInAllMails:function(a){var b=this.props.query;b.folders=[],"button"!==a.target.parentNode.tagName.toLowerCase()&&"button"!==a.target.tagName.toLowerCase()||this.props.executeSearch(b)}}),b.exports=d},{"../../../artifacts/lang":2,Context:"Context",Template:"Template","react/addons":"react/addons"}],20:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("Context"),h=a("StatService"),i=a("FolderStore"),j=a("ObjectUtils"),k=a("../common/ComponentUtils"),l=a("Utils"),m=a("SearchActions"),n=a("SearchQuery"),o=a("Template"),p=a("SearchConstants"),q=a("../../../artifacts/lang"),r=a("./ConfirmDialog.jsx"),s=a("UserSettingsConstants"),t=a("./message_list/MessageList.jsx"),u=a("./MessageListToolbar.jsx"),v=a("./notifications/DeleteNotification.jsx"),w=a("./notifications/SpamNotification.jsx"),x=a("./notifications/MoveNotification.jsx"),y=a("ActionStore"),z=a("../actions/MessageActions"),A=a("./Spinner.jsx"),B=a("./message_list/MessageListItem.jsx"),C=a("./ads/SearchAd.jsx"),D=a("MessageConstants");d=e.createClass({displayName:"SearchMessageList",propTypes:{searchId:e.PropTypes.string.isRequired,currentFilter:e.PropTypes.string,handleSRPSortChange:e.PropTypes.func,jumpToAdvancedSearch:e.PropTypes.func,sortType:e.PropTypes.string,sortOrder:e.PropTypes.string,unsubscribrEnabled:e.PropTypes.bool.isRequired,showUpcomingTimeChunkLabel:e.PropTypes.bool},mixins:[g],getDefaultProps:function(){return{handleSRPSortChange:f.noop,jumpToAdvancedSearch:f.noop,isProgressBarOpen:f.noop,unsubscribrEnabled:!1,sortType:s.MSG_SORT_TYPE_DATE,sortOrder:s.MSG_SORT_ORDER_DOWN,showUpcomingTimeChunkLabel:!1,isArchive:!1}},getInitialState:function(){return{selectedItemsObj:{deselectedItems:{},selectedItems:{},selectedFilter:void 0},isConfirmDialogOpen:!1,activeIndex:-1}},onAction:function(){var a=this.getStore(y).getActionInfo(),b=j.getValue(a,["data"],{});if(b&&b.searchId===this.props.searchId)switch(a.action){case p.SET_SELECTED_ITEMS:this.setState({selectedItemsObj:{deselectedItems:j.getValue(b,["deselectedItems"],{}),selectedItems:j.getValue(b,["selectedItems"],{}),selectedFilter:j.getValue(b,["selectedFilter"])}})}},onFocus:function(){this.isFocused=!0},onBlur:function(){this.isFocused=!1},_currentViewType:p.SEARCH_MESSAGE_VIEW,executeMessageAction:function(a,b){b=f.merge(b,{searchId:this.props.searchId}),this.executeAction(z[a],b)},componentDidMount:function(){this.getStore(y).on("changed",this.onAction),this.setFocus(),this.setFocusDebounced=k.componentDebounce(this.setFocus,32)},componentDidUpdate:function(){this.setFocusDebounced()},setFocus:function(){this.isFocused||l.requestAnimationFrame(function(){this.isMounted()&&e.findDOMNode(this).focus()}.bind(this))},componentWillUnmount:function(){this.getStore(y).removeListener("changed",this.onAction)},render:function(){return e.createElement("div",{tabIndex:0,onKeyDown:this.handleKeyDown},this.renderContent(),this.props.fetchingMoreItems?this.renderSpinner():null)},renderSpinner:function(){return e.createElement("div",{className:"loading-more"},e.createElement(A,null))},renderContent:function(){var a=[];return a.push(e.createElement("div",{className:"search-messages-container","data-density":this.props.messageDensity},this.renderMsgListToolbar(),this.renderSearchMsgResult())),this.state.isConfirmDialogOpen&&a.push(this.renderConfirmDialog()),a},renderSearchMsgResult:function(){var a=this.props,b=this.state,c=a.items,d=a.recipientNameInSRP,g=j.getValue(this.props,["query","folders",0,"folderIds"],"")||"",h=g?j.getValue(this.getStore(i).findByIndex(g),"types.0",""):"",k=d&&!!f.find(a.query.folders,function(a){return"1"===a.folderIds||"3"===a.folderIds||"SENT"===h||"DRAFT"===h}),l=a.hasMultipleAccounts&&!f.find(a.query.folders,function(a){return!f.isEmpty(a.acctIds)}),m=a.searchType;return e.createElement("div",{onFocus:this.onFocus,onBlur:this.onBlur},e.createElement(t,{ref:"msgList",searchId:a.searchId,query:a.query,searchType:m,items:c,hidden:0===c.length,accounts:a.accounts,currentAccount:a.currentAccount,showRecipient:k,showAccountPrefix:l,isArchive:a.isArchive,currentFilter:a.currentFilter,messageItemComponent:B,shouldShowSnippet:a.snippetsEnabled,selectedItemsObj:b.selectedItemsObj,setSelectedItems:this.setSelectedItems,onMark:this.handleHoverMenuMark,onStar:this.handleHoverMenuStar,onArchive:this.handleHoverMenuArchive,onDelete:this.handleHoverMenuDelete,onSearch:this.handleSearch,showUpcomingTimeChunkLabel:a.showUpcomingTimeChunkLabel,getSelectedMessages:this.getSelectedMessages,handleAddToContacts:this.handleAddToContacts,handleQuickFilter:this.handleQuickFilter,handleReportSpam:this.handleReportSpam,handleArchive:this.handleArchive,handleDelete:this.handleDelete,handleMove:this.handleMove,handleStar:this.handleStar,handleUnsubscribe:this.handleUnsubscribe,handleMark:this.handleMark,handlePrint:this.handlePrint,handleReplyToSender:this.handleReplyToSender,handleReplyToAll:this.handleReplyToAll,handleForward:this.handleForward,setStat:this.setStat,setActiveIndex:this.setActiveIndex,getActiveIndex:this.getActiveIndex,handleDragDropStart:this.handleDragDropStart,scrollIntoViewWhenNeeded:a.scrollIntoViewWhenNeeded,isSearch:!0,sortType:a.sortType,sortOrder:a.sortOrder},this.renderAd()))},renderAd:function(){return NeoConfig.hasAds?e.createElement(C,{ref:"pencilAd",searchId:this.props.searchId,searchAdFaviconHoverEnabled:this.props.searchAdFaviconHoverEnabled,searchAdFlipLabelAndRatingEnabled:this.props.searchAdFlipLabelAndRatingEnabled,searchAdHoverHighlightEnabled:this.props.searchAdHoverHighlightEnabled,searchAdThemeColorEnabled:this.props.searchAdThemeColorEnabled,query:this.props.query}):void 0},renderMsgListToolbar:function(){var a=this.props,b=j.getValue(this.props,["query","folders",0,"folderIds"],"")||"",c=j.getValue(this.getStore(i).findByIndex(b),"types.0","")||"",d="ARCHIVE"===c;return e.createElement(u,{ref:"msgListToolbar",searchId:a.searchId,items:a.items,selectedItemsObj:this.state.selectedItemsObj,currentAccount:a.currentAccount,unsubscribrEnabled:a.unsubscribrEnabled,imapInEnabled:a.imapInEnabled,currentFilter:a.currentFilter,isArchive:a.isArchive,isRefinedByArchiveFolder:d,sortType:a.sortType,sortOrder:a.sortOrder,query:a.query,hasMultipleAccounts:a.hasMultipleAccounts,getSelectedMessages:this.getSelectedMessages,handleQuickFilter:this.handleQuickFilter,handleReportSpam:this.handleReportSpam,handleDelete:this.handleDelete,handleArchive:this.handleArchive,handleMove:this.handleMove,handleRestore:this.handleRestore,handleStar:this.handleStar,handleMark:this.handleMark,handleUnsubscribe:this.handleUnsubscribe,handlePrint:this.handlePrint,handleSortChange:a.handleSRPSortChange,getActiveIndex:this.getActiveIndex,setActiveIndex:this.setActiveIndex})},getSelectedMessages:function(){var a,b,c,d,e=this.getActiveItem();return a=this.state.selectedItemsObj,b=a.deselectedItems,c=a.selectedItems,d="all"===a.selectedFilter,e&&!d&&f.isEmpty(c)&&f.isEmpty(b)?[e]:this.props.items.filter(function(a){return d&&!b[a.id]||!!c[a.id]})},getActiveItem:function(){var a=this.state.activeIndex;return 0>a?null:this.props.items[a]},getActiveIndex:function(){return this.state.activeIndex},setActiveIndex:function(a){this.setState({activeIndex:a})},handleScroll:function(a){this.refs.msgList.handleMessageListScroll(a)},handleDragDropStart:function(a,b){this.draggedMsgs=[],b?this.draggedMsgs=this.getSelectedMessages():this.draggedMsgs.push(a),window.addEventListener("mousemove",this.handleDragDropMoving),window.addEventListener("mouseup",this.handleDragDropEnd)},handleDragDropEnd:function(){this.removeDragDrop(),this.currentDrop&&(this.handleMove(this.currentDrop.getAttribute("data-fid"),{messages:this.draggedMsgs}),this.currentDrop.classList.remove("popping"),this.currentDrop=null)},handleDragDropMoving:function(a){var b,c=4,d=a.target;if(1!==a.which)return void this.removeDragDrop();for(this.currentDrop&&(this.currentDrop.classList.remove("popping"),this.currentDrop=null);d&&"LI"!==d.tagName&&c--;)d=d.parentNode;b=d&&d.getAttribute&&d.getAttribute("data-fid"),b&&this.validateFolder(b)&&(d.classList.add("popping"),this.currentDrop=d),this.dragDropIcon||this.renderDragDropIcon(),this.dragDropIcon.style.top=a.pageY-10+"px",this.dragDropIcon.style.left=a.pageX+10+"px"},removeDragDrop:function(){window.removeEventListener("mousemove",this.handleDragDropMoving),window.removeEventListener("mouseup",this.handleDragDropEnd),this.removeDragDropIcon()},renderDragDropIcon:function(){var a=this.props,b=this.draggedMsgs.length;this.dragDropIcon=document.createElement("div"),"all"===this.state.selectedItemsObj.selectedFilter&&a.totalHits&&(b=a.totalHits),e.render(e.createElement("div",{className:"msgDragProxy"},e.createElement("i",null),e.createElement("b",{className:"counter"},b)),this.dragDropIcon),document.body.appendChild(this.dragDropIcon),this.dragDropIcon.style.position="fixed"},removeDragDropIcon:function(){this.dragDropIcon&&(e.unmountComponentAtNode(this.dragDropIcon),document.body.removeChild(this.dragDropIcon),this.dragDropIcon=null)},validateFolder:function(a){return"Draft"===a||"Sent"===a?!1:f.find(this.getStore(i).fetch(),function(b){return j.getValue(b,["folderInfo","fid"],null)===a})},handleKeyDown:function(a){var b=a.keyCode,c=a.shiftKey,d=a.metaKey,e=a.ctrlKey,f=c||d||e,g=this.getSelectedMessages(),h=this.getActiveItem();if(27!==b&&this.props.isProgressBarOpen())return a.stopPropagation(),void a.preventDefault();if(27===b)this.props.handleEscKeyDown();else if(13===b)a.stopPropagation(),a.preventDefault(),h&&this.keyboardEnter(h);else if(38===b)a.stopPropagation(),a.preventDefault(),this.keyboardNavigateUp(a.shiftKey,a.ctrlKey);else if(32===b&&0===g.length)a.stopPropagation(),a.preventDefault(),this.handleSelection(a);else if(40===b)a.stopPropagation(),a.preventDefault(),this.keyboardNavigateDown(a.shiftKey,a.ctrlKey);else if(this.getSelectedMessages().length>0){switch(b){case 75:if(c&&!d&&!e)return void this.handleMark(!1);if(!f)return void this.handleMark(!0);break;case 32:if(!f&&g.length>0)return a.stopPropagation(),a.preventDefault(),void this.handleMessageSelection(a,j.getValue(g,"0.mid"));break;case 76:if(c&&!d&&!e)return void this.handleStar(!1);if(!f)return void this.handleStar(!0);break;case 8:case 46:if(!f)return void this.handleDelete();break;case 51:if(c)return void this.handleDelete();break;case 80:if(!f)return void this.handlePrint();break;case 67:if(c&&!d&&!e)return void this.handleAddToContacts();break;case 65:if(!f)return void this.handleReplyToAll();break;case 70:if(!f)return void this.handleForward();break;case 69:if(!f&&this.props.isArchive)return void this.handleArchive();break;case 82:if(!f)return void this.handleReplyToSender()}this.refs.msgListToolbar.handleKeyDown(a)}},getSelectedCount:function(){var a=this.props,b=this.state.selectedItemsObj;return"all"===b.selectedFilter?a.totalHits-f.size(b.deselectedItems):this.getSelectedMessages().length},renderConfirmDialog:function(){return e.createElement(r,{ref:"confirm",header:q.str_modal_message_delete_all_title,message:e.createElement(o,{num_selected:this.getSelectedCount(),tmpl:q.str_modal_message_delete_num_question}),onConfirm:this.deleteMessages,onCancel:this.closeConfirmDialog,onClose:this.closeConfirmDialog})},renderProgressMessage:function(a){return e.createElement(o,{messagesCount:this.props.totalHits,tmpl:a})},closeConfirmDialog:function(){this.setState({isConfirmDialogOpen:!1})},handleHoverMenuMark:function(a,b){var c=f.find(this.props.items,{id:b});this.handleMark(!c.isRead,{messages:[c]})},handleHoverMenuStar:function(a,b){var c=f.find(this.props.items,{id:b});this.handleStar(!c.isFlagged,{messages:[c]})},handleHoverMenuArchive:function(a){var b=f.find(this.props.items,{id:a});this.handleArchive({messages:[b]})},handleHoverMenuDelete:function(a,b){var c=f.find(this.props.items,{id:b});this.handleDelete({messages:[c]})},handleSearch:function(a,b){this.props.executeSearch(new n({keyword:b.email?"":b.keyword,typeTag:b.typeTag,displayName:b.email,suggestion:b.email?j.getValue(b,"suggestion",{displayStr:b.email,emailAddresses:[b.email]}):void 0}))},handleDelete:function(a){var b=j.getValue(a,["messages"],this.getSelectedMessages());b.length>=D.MIN_BULK_SIZE?this.setState({isConfirmDialogOpen:!0}):this.deleteMessages(a)},deleteMessages:function(a){var b=this,c=b.props,d=b.state.selectedItemsObj,g=j.getValue(a,["messages"],b.getSelectedMessages());"all"===d.selectedFilter&&g.length>=D.MIN_BULK_SIZE?b.executeMessageAction("deleteAllMessages",{qurl:c.nextPageUrl,accounts:c.accounts,totalHits:c.totalHits,queryResponse:c.queryResponse,notificationFactory:e.createFactory(v),bulkTitle:c.sleekProgressBarEnabled?this.renderProgressMessage(q.str_sleek_modal_message_bulk_delete_title):q.str_modal_message_bulk_delete_title,deselectedItems:d.deselectedItems}):b.executeMessageAction("deleteMessages",{messages:g,isSingleAction:!0,notificationFactory:e.createFactory(v),undoHandler:function(){b.executeMessageAction("undoMessages",{searchId:b.props.searchId,srcFids:f.groupBy(g,"fid"),actionSource:"undo_delete"})}}),b.clearSelectedItems(),b.setStat("delete",g.length)},handleMove:function(a,b){var c=this,d=c.props,g=c.state.selectedItemsObj,h=j.getValue(b,["messages"],c.getSelectedMessages());"all"===g.selectedFilter&&h.length>=D.MIN_BULK_SIZE?(c.executeMessageAction("moveAllMessages",{fid:a,qurl:d.nextPageUrl,totalHits:d.totalHits,queryResponse:d.queryResponse,notificationFactory:e.createFactory(x),bulkTitle:d.sleekProgressBarEnabled?this.renderProgressMessage(q.str_sleek_modal_message_bulk_move_title):q.str_modal_message_bulk_move_title,deselectedItems:g.deselectedItems}),c.clearSelectedItems()):c.executeMessageAction("moveMessages",{fid:a,messages:h,currentFilter:c.props.currentFilter,notificationFactory:e.createFactory(x),undoHandler:function(){c.executeMessageAction("undoMessages",{srcFids:f.groupBy(h,"fid"),destinationFid:a})}}),c.setStat("move",h.length)},handleArchive:function(a){var b=this,c=b.props,d=b.state.selectedItemsObj,g=j.getValue(a,["messages"],b.getSelectedMessages());b.executeMessageAction("archiveMessages",{messages:g,accounts:c.accounts,totalHits:c.totalHits,queryResponse:c.queryResponse,selectedFilter:d.selectedFilter,qurl:c.nextPageUrl,bulkTitle:c.sleekProgressBarEnabled?this.renderProgressMessage(q.str_sleek_modal_message_bulk_archive_title):q.str_modal_message_bulk_archive_title,deselectedItems:d.deselectedItems,notificationFactory:e.createFactory(x),undoHandler:function(){b.executeMessageAction("undoMessages",{srcFids:f.groupBy(g,"fid"),destinationFid:"Inbox"})}}),b.clearSelectedItems(),h.stat({name:"archive",tags:{action:"archive",actionType:g.length>1?"bulk":"single"}})},handleRestore:function(a){this.handleMove(a)},handleReportSpam:function(a,b){var c=this.props,d=this.state.selectedItemsObj,f=j.getValue(b,["messages"],this.getSelectedMessages());"all"===d.selectedFilter&&f.length>=D.MIN_BULK_SIZE?this.executeMessageAction("reportAllAsSpam",{qurl:c.nextPageUrl,totalHits:c.totalHits,queryResponse:c.queryResponse,notificationFactory:e.createFactory(w),type:a,bulkTitle:c.sleekProgressBarEnabled?this.renderProgressMessage(q.str_sleek_modal_message_bulk_spam_title):q.str_modal_message_bulk_move_title,deselectedItems:d.deselectedItems}):this.executeMessageAction("reportSpam",{messages:f,type:a,notificationFactory:e.createFactory(w)}),this.clearSelectedItems(),a===D.SPAM_TYPE_NOTMINE?this.setStat("notmyemail",f.length):this.setStat("spam",f.length)},handleStar:function(a,b){var c=this.props,d=this.state.selectedItemsObj,e=j.getValue(b,["messages"],this.getSelectedMessages());"all"===d.selectedFilter&&e.length>=D.MIN_BULK_SIZE?(this.executeMessageAction("starAllMessages",{qurl:c.nextPageUrl,totalHits:c.totalHits,queryResponse:c.queryResponse,star:a,bulkTitle:a?c.sleekProgressBarEnabled?this.renderProgressMessage(q.str_sleek_modal_message_bulk_star_title):q.str_modal_message_bulk_star_title:c.sleekProgressBarEnabled?this.renderProgressMessage(q.str_sleek_modal_message_bulk_unstar_title):q.str_modal_message_bulk_unstar_title,deselectedItems:d.deselectedItems}),this.clearSelectedItems()):this.executeMessageAction("starMessages",{star:a,messages:e.filter(function(b){return b.isFlagged!==a})}),this.setStat(a?"flag":"unflag",e.length)},handleMark:function(a,b){var c=this.props,d=this.state.selectedItemsObj,e=j.getValue(b,["messages"],this.getSelectedMessages());"all"===d.selectedFilter&&e.length>=D.MIN_BULK_SIZE?(this.executeMessageAction("markAllMessages",{qurl:c.nextPageUrl,totalHits:c.totalHits,queryResponse:c.queryResponse,markRead:a,bulkTitle:a?c.sleekProgressBarEnabled?this.renderProgressMessage(q.str_sleek_modal_message_bulk_markread_title):q.str_modal_message_bulk_markread_title:c.sleekProgressBarEnabled?this.renderProgressMessage(q.str_sleek_modal_message_bulk_markunread_title):q.str_modal_message_bulk_markunread_title,deselectedItems:d.deselectedItems}),this.clearSelectedItems()):this.executeMessageAction("markMessages",{markRead:a,messages:e.filter(function(b){return b.isRead!==a})}),this.setStat(a?"read":"unread",e.length)},handleReplyToSender:function(){var a=this.getSelectedMessages();1===a.length&&(this.executeMessageAction("replyToSender",{message:a[0]}),this.setStat("reply_sender",1))},handleReplyToAll:function(){var a=this.getSelectedMessages();1===a.length&&(this.executeMessageAction("replyToAll",{message:a[0]}),this.setStat("reply_all",1))},handleForward:function(){var a=this.getSelectedMessages();1===a.length&&(this.executeMessageAction("forward",{message:a[0]}),this.setStat("forward",1))},getEmailFromMessage:function(a,b){return j.getValue(a,[b,0,"emails",0],j.getValue(a,[b,0,"id"],null))},handleQuickFilter:function(){var a=this.getSelectedMessages()[0];this.executeAction(z.quickFilter,{from:{email:this.getEmailFromMessage(a,"fromList"),name:j.getValue(a,["fromList",0,"name"],null)},to:this.getEmailFromMessage(a,"toList"),subj:a.subject}),this.setStat("quick_filter",1)},handlePrint:function(){this.executeAction(z.print,this.getSelectedMessages()[0]),this.setStat("print",1)},handleUnsubscribe:function(){this.executeAction(z.unsubscribe,this.getSelectedMessages()),this.setStat("unsubscribe",1)},handleAddToContacts:function(){var a=this.getSelectedMessages()[0],b={name:j.getValue(a,["fromList",0,"name"],null),email:this.getEmailFromMessage(a,"fromList")};this.executeAction(m.addContact,b),this.setStat("addcontact",1)},setSelectedItems:function(a,b,c){this.executeAction(m.setSelectedItems,{searchId:this.props.searchId,selectedItems:a,deselectedItems:b,selectedFilter:c})},clearSelectedItems:function(){this.setSelectedItems({},{},null)},keyboardNavigateUp:function(a,b){this.refs.msgList.keyboardNavigateUp(a,b)},handleMessageSelection:function(a,b){this.refs.msgList.handleMessageSelection(a,b)},handleSelection:function(a){var b,c,d=j.getValue(this.refs,["msgList","state","lastIndex"]);c=j.getValue(this,["props","items",d,"mid"]),b=this.getSelectedMessages(),this.handleMessageSelection(a,c)},keyboardNavigateDown:function(a,b){this.refs.msgList.keyboardNavigateDown(a,b)},keyboardEnter:function(){var a=this.getSelectedMessages();a.length>0&&this.refs.msgList.openMessage(a[0].mid)},setStat:function(a,b){h.stat({name:"srp_context_menu",tags:{action:a,actionType:b>1?"bulk":"single"}})}}),b.exports=d},{"../../../artifacts/lang":2,"../actions/MessageActions":4,"../common/ComponentUtils":5,"./ConfirmDialog.jsx":7,"./MessageListToolbar.jsx":12,"./Spinner.jsx":23,"./ads/SearchAd.jsx":24,"./message_list/MessageList.jsx":25,"./message_list/MessageListItem.jsx":27,"./notifications/DeleteNotification.jsx":31,"./notifications/MoveNotification.jsx":32,"./notifications/SpamNotification.jsx":34,ActionStore:"ActionStore",Context:"Context",FolderStore:"FolderStore",MessageConstants:"MessageConstants",ObjectUtils:"ObjectUtils",SearchActions:"SearchActions",SearchConstants:"SearchConstants",SearchQuery:"SearchQuery",StatService:"StatService",Template:"Template",UserSettingsConstants:"UserSettingsConstants",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}],21:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("../../../artifacts/lang"),h=a("Context"),i=a("List"),j=a("ListItem"),k=a("ObjectUtils"),l=a("StringUtils"),m=a("./mixins/NumberFormatter"),h=a("Context"),n=a("SearchUtils"),o=a("GlobalConstants"),p=a("SearchConstants"),q=a("GlobalActions"),r=a("ActionStore"),s=a("SearchQuery"),t=a("Utils"),u=a("Token"),v=a("StatService");d=e.createClass({displayName:"SearchResultsHeader",propTypes:{searchId:e.PropTypes.string.isRequired,filter:e.PropTypes.string,contentType:e.PropTypes.string,query:e.PropTypes.object,onFilterClick:e.PropTypes.func,onSectionClick:e.PropTypes.func},mixins:[m,h],getInitialState:function(){return{isSavedSearch:!1}},getDefaultProps:function(){return{contacts:[],filter:void 0,contentType:void 0,spellCorrection:null,imapInEnabled:!1,simpleEnabled:!1,linksEnabled:!1,isForceUser:!1}},componentDidMount:function(){this.getStore(r).on("changed",this.onAction)},componentWillUnmount:function(){this.getStore(r).removeListener("changed",this.onAction)},onAction:function(){var a=this.getStore(r).getActionInfo(),b=k.getValue(a,["data"],{});if(b&&b.searchId===this.props.searchId)switch(a.action){case o.SAVE_SEARCH:this.setState({isSavedSearch:!0});break;case o.SEARCH_TAB_ACTIVE:t.requestAnimationFrame(function(){e.findDOMNode(this).focus()}.bind(this));break;case p.CHANGE_SEARCH_FILTER:case p.CHANGE_SEARCH_VIEW:"documents"!==b.contentType&&this.props.hideGDocsCallout()}},render:function(){var a=this.props,b=k.getValue(a,[a.contentType,a.filter,"spellCorrection"]),c=k.getValue(a,[a.contentType,a.filter,"resultsFromTrash"]),d=e.addons.classSet({"srp-header":!0,"srp-header-has-spell-correction":b||c&&!a.isEmptySearchResult});return e.createElement("header",{className:d},this.renderHeaderMessaging(),e.createElement("div",{className:"srp-header-main"},this.renderFilters(),this.renderResultCount(),this.renderCustomSearchButton(),this.renderRefineButton(),this.renderDidYouMean()))},renderLinksButton:function(){var a=this.props;return a.linksEnabled?e.createElement("button",{key:"links","data-action":"links",onClick:a.onSectionClick.bind(this,{contentType:"links",filter:this.props.filter}),onKeyDown:this.handleKeyDown.bind(this,"links"),"aria-pressed":"links"===a.contentType,"aria-label":g.str_links,disabled:a.isForceUser&&k.getValue(a,["links",a.filter,"items"],[]).length<1},g.str_links):null},renderMessageButton:function(){var a=this.props;return e.createElement("button",{key:"messages","data-action":"messages",onClick:a.onSectionClick.bind(this,{contentType:"messages",filter:this.props.filter}),onKeyDown:this.handleKeyDown.bind(this,"messages"),"aria-pressed":"messages"===a.contentType,"aria-label":g.str_messages,disabled:a.isForceUser&&k.getValue(a,["messages",a.filter,"items"],[]).length<1},g.str_messages)},renderFilters:function(){var a,b=this.props,c=b.contentType,d=b.filterOrder||[],f=b.filter,h=[],i=[];return"people"===this.props.searchType&&(a={all:e.createElement("button",{key:"all","data-action":"all",onClick:b.onFilterClick.bind(this,{filter:"all",contentType:c}),onKeyDown:this.handleKeyDown.bind(this,{filter:"all",contentType:c}),"aria-pressed":"all"===b.filter,"aria-label":g.str_all_uppercase,disabled:b.isForceUser&&k.getValue(b,[c,"all","items"],[]).length<1},g.str_all_uppercase),from:e.createElement("button",{key:"from","data-action":"from",onClick:b.onFilterClick.bind(this,{filter:"from",contentType:c}),onKeyDown:this.handleKeyDown.bind(this,{filter:"from",contentType:c}),"aria-pressed":"from"===b.filter,"aria-label":g.str_from_uppercase,disabled:b.isForceUser&&k.getValue(b,[c,"from","items"],[]).length<1},g.str_from_uppercase),to:e.createElement("button",{key:"to","data-action":"to",onClick:b.onFilterClick.bind(this,{filter:"to",contentType:c}),onKeyDown:this.handleKeyDown.bind(this,{filter:"to",contentType:c}),"aria-pressed":"to"===b.filter,"aria-label":g.str_to_uppercase,disabled:b.isForceUser&&k.getValue(b,[c,"to","items"],[]).length<1},g.str_to_uppercase)},d.map(function(b){h.push(a[b])}),i.push(e.createElement("div",{className:"srp-filters-origin"},h))),i.push(e.createElement("div",{className:"srp-filters-type"},this.renderMessageButton(),e.createElement("button",{key:"photos","data-action":"photos",onClick:b.onSectionClick.bind(this,{contentType:"photos",filter:this.props.filter}),onKeyDown:this.handleKeyDown.bind(this,"photos"),"aria-pressed":"photos"===b.contentType,"aria-label":g.str_photos,disabled:b.isForceUser&&k.getValue(b,["photos",f,"items"],[]).length<1},g.str_photos),e.createElement("button",{key:"documents",ref:"documentFilter","data-action":"documents",onClick:b.onSectionClick.bind(this,{contentType:"documents",filter:this.props.filter}),onKeyDown:this.handleKeyDown.bind(this,"documents"),"aria-pressed":"documents"===b.contentType,"aria-label":g.str_documents,disabled:b.isForceUser&&k.getValue(b,["documents",f,"items"],[]).length<1},g.str_documents),this.renderLinksButton())),i},renderRefineButton:function(){return e.createElement("span",{className:"srp-header-refine","data-preventclose":!0,"aria-label":g.str_srch_refine,role:"button",tabIndex:0,onClick:this.openAdvancedSearch.bind(this,"refine"),onKeyDown:this.handleKeyDown.bind(this,"refine")},g.str_srch_refine)},renderResultCount:function(){var a,b,c=this.props,d=k.getValue(c,[c.contentType,c.filter,"totalHits"]);return d>-1&&(a=1===d?g.str_srch_result:g.str_srch_results,b=f.template(a,null)({number:this.toLocalNumberFormat(d)})),e.createElement("span",{className:"srp-header-results"},b)},renderDidYouMean:function(){var a=this.props,b=k.getValue(a,["contacts","keyword","items"],[]);return"keyword"===a.searchType&&b.length?[e.createElement("div",{className:"did-you-mean-label"},g.str_related_searches),e.createElement(i,{className:"did-you-mean-items"},b.map(function(b,c){var d={displayStr:b.name,imageUrl:b.thumbnail?l.addUrlParameters(b.thumbnail,{spsize:"50X50",badge:!0,fallback_url:o.FALLBACK_XOBNI_IMG_URL}):o.FALLBACK_XOBNI_IMG_URL,intent:"PEOPLE",fallbackImageUrl:p.PERSON_TOKEN_FALLBACK_IMG_DATA,keyword:k.getValue(a.query,["keyword"],""),emailAddresses:this.fetchDidYouMeanEmailAddresses(b)};return e.createElement(j,{id:c,onClick:this.handleContactClick,key:c},e.createElement(u,{data:d}))},this))]:void 0},fetchDidYouMeanEmailAddresses:function(a){var b=k.getValue(a,["payload","endpoints"],[]),c=[];return b.forEach(function(a){a.ep&&f.startsWith(a.ep,"smtp:")&&c.push(a.ep.replace("smtp:",""))}),c},renderCustomSearchButton:function(){return this.shouldRenderCustomSearchButton()?e.createElement("span",{className:"srp-save-smartview","aria-label":g.str_save_as_smart_view,role:"button",tabIndex:0,onClick:this.saveCurrentSearch.bind(this,"save"),onKeyDown:this.handleKeyDown.bind(this,"save"),title:g.str_save_as_smart_view},g.str_save):e.createElement("span",{
className:"srp-save-search-disabled","aria-label":g.str_saved_as_smart_view,title:g.str_saved_as_smart_view},g.str_saved)},handleKeyDown:function(a,b){if(13===b.keyCode)switch(b.stopPropagation(),b.preventDefault(),a){case"messages":case"links":case"photos":case"documents":this.props.onSectionClick({contentType:a,filter:this.props.filter});break;case"from":case"to":case"all":this.props.onFilterClick({contentType:this.props.contentType,filter:a});break;case"save":this.saveCurrentSearch();break;case"refine":this.openAdvancedSearch()}},renderHeaderMessaging:function(){var a,b,c,d,f=this.props,h=k.getValue(f,[f.contentType,f.filter,"spellCorrection"]),i=k.getValue(f,[f.contentType,f.filter,"resultsFromTrash"]),j=i&&!this.props.isEmptySearchResult;return h||j?(a=f.query.toString(),h?(b=h,d=j?g.str_spell_correction_search_trash_header:g.str_spell_correction_header,c=l.stringReplace(d,{correctedQuery:e.createElement("strong",null,e.createElement("em",null,this.subMisspellingsInQuery(b,a))),misspelledQuery:e.createElement("em",null,a)})):j&&(c=l.stringReplace(g.str_search_trash_header,{query:e.createElement("strong",null,e.createElement("em",null,a))})),e.createElement("div",{className:"srp-header-spellcorrect"},c)):null},shouldRenderCustomSearchButton:function(){return this.props.simpleEnabled&&this.state.isSavedSearch?!1:this.props.simpleEnabled&&!this.isSavedSearch()},isSavedSearch:function w(){var w,a=n.generateSmartViewId(this.props.query),b=this.props.smartViews||[];return w=f.filter(b,function(b){return n.generateSmartViewId(b.query)===a}),w.length>0},saveCurrentSearch:function(){var a,b=this.props,c=b.searchType,d=b.query,e={},f=k.getValue(d,["keyword"],""),h=k.getValue(d,["folders",0,"displayName"],"");"people"===c&&(e.email=k.getValue(d,["suggestion","emailAddresses",0]),a=k.getValue(d,["suggestion","displayStr"],""),e.type="Contact"),e.name=((a||e.email||h||"")+" "+f).trim()||g.str_saved_search,e.query={keyword:f||"",folders:d.folders||[],smartviews:d.smartviews||[]},e.account=b.currentAccount.id,e.searchId=this.props.searchId,this.executeAction(q.saveSmartView,e),v.stat({name:"srp_header_smartview_custom_save",tags:{type:"people"===c?"contact":"keyword"}})},subMisspellingsInQuery:function(a,b){var c=b;return f.pairs(a).forEach(function(a){c=c.replace(new RegExp("(^|\\s)"+a[0]+"(\\s|$)","gi"),"$1"+a[1]+"$2")}),c},openAdvancedSearch:function(){this.getContext().events.emit("search:advancedSearch:toggle"),this.props.hideGDocsCallout(),v.logRapid("mt:click",{action:"srp_header_refine_clicked",append:{mSrchId:this.props.searchId,mSrchQry:this.props.query.toString(),mSrchTyp:k.getValue(this.props,["searchType"],"keyword")}})},handleContactClick:function(a,b){var c=this.props,d=c.query,e=k.getValue(c,["contacts","keyword","items",b]),g=f.chain(k.getValue(e,["payload","endpoints"],[])).filter(function(a){return a.ep&&0===a.ep.indexOf("smtp:")}).map(function(a){return a.ep.replace("smtp:","")}).value();this.props.executeSearch(new s({folders:d.folders,typeTag:"srp_header_often_cced",suggestion:{displayStr:e.name,intent:"PEOPLE",serviceId:e.payload.id,emailAddresses:g,imageUrl:l.addUrlParameters(e.thumbnail,{spsize:"50X50",badge:!0,fallback_url:o.FALLBACK_XOBNI_IMG_URL})}})),v.stat("search_didyoumean_clicked")}}),b.exports=d},{"../../../artifacts/lang":2,"./mixins/NumberFormatter":30,ActionStore:"ActionStore",Context:"Context",GlobalActions:"GlobalActions",GlobalConstants:"GlobalConstants",List:"List",ListItem:"ListItem",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",SearchQuery:"SearchQuery",SearchUtils:"SearchUtils",StatService:"StatService",StringUtils:"StringUtils",Token:"Token",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}],22:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("Context"),h=a("StatService"),i=a("UserSettingsConstants"),j=a("MenuItem"),k=a("MenuButton"),l=a("MenuItemGroup"),m=a("../../../artifacts/lang"),n=a("StringUtils"),o=yui.common.Utils.features.enabled("force");d=e.createClass({displayName:"SortMenu",propTypes:{sortType:e.PropTypes.string,sortOrder:e.PropTypes.string,handleSortChange:e.PropTypes.func},mixins:[g],getDefaultProps:function(){return{sortType:i.MSG_SORT_TYPE_DATE,sortOrder:i.MSG_SORT_ORDER_DOWN,handleSortTypeChange:f.noop,handleSortOrderChange:f.noop}},render:function(){var a,b=this.props,c=b.sortType,d=i.MSG_SORT_TYPE_DATE,f=i.MSG_SORT_TYPE_RELEVANCE,g=i.MSG_SORT_ORDER_UP,h=i.MSG_SORT_ORDER_DOWN,p=i.MSG_SORT_TYPE_ATTACHMENT,q=c===d,r=b.sortOrder===h;switch(c){case d:a=m.str_menu_sort_date;break;case f:a=m.str_menu_sort_relevance;break;case p:a=m.str_attachments}return e.createElement(k,{className:"button-plain",title:m.str_menu_sort_title,label:n.stringReplace(m.str_menu_sorted_by,{sortTypeName:e.createElement("span",{className:"sortBtn"},a)}),ddClassName:"sort-menu"},e.createElement(l,{value:"menu-sort",togglable:!0},e.createElement(j,{hidden:!o,selected:c===f,onClick:this.updateSort.bind(null,f,null),title:m.str_menu_sort_relevance,value:f},m.str_menu_sort_relevance),e.createElement(j,{selected:q&&r,onClick:this.updateSort.bind(null,d,h),title:m.str_menu_sort_date_down,value:d+h},m.str_menu_sort_date_down),e.createElement(j,{selected:q&&!r,onClick:this.updateSort.bind(null,d,g),title:m.str_menu_sort_date_up,value:d+g},m.str_menu_sort_date_up),e.createElement(j,{selected:c===p,onClick:this.updateSort.bind(null,p,null),title:m.str_attachments,value:p},m.str_attachments)))},updateSort:function(a,b){var c=this.props,d=c.searchId;c.handleSortChange(a,b),h.stat({name:"search_sort_click",tags:{sortType:a}}),h.logRapid("mt:click",{action:"search_sort_click",append:{mSrchId:d,mSrtTyp:a,mSrtOrd:b,mSrchQry:this.props.query.toHumanReadableString(),mYid:NeoConfig.loginId,mIsFrc:NeoConfig.forceDS}})}}),b.exports=d},{"../../../artifacts/lang":2,Context:"Context",MenuButton:"MenuButton",MenuItem:"MenuItem",MenuItemGroup:"MenuItemGroup",StatService:"StatService",StringUtils:"StringUtils",UserSettingsConstants:"UserSettingsConstants",lodash:"lodash","react/addons":"react/addons"}],23:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"Spinner",propTypes:{verticallyCenter:e.PropTypes.bool},mixins:[e.addons.PureRenderMixin],render:function(){var a=e.createElement("div",{className:"s-loader"});return this.props.verticallyCenter?e.createElement("div",{id:"lv-statuses-container",className:"search-loading-container"},e.createElement("div",{className:"list-view-status"},a)):a}}),b.exports=d},{"react/addons":"react/addons"}],24:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("Context"),h=a("SearchConstants"),i=a("ObjectUtils"),j=a("StringUtils"),k=a("ActionStore"),l=a("StatService");d=e.createClass({displayName:"SearchAd",mixins:[g],propTypes:{searchId:e.PropTypes.string.isRequired},getInitialState:function(){return{ads:[]}},componentDidMount:function(){this.getStore(k).on("changed",this.onAction)},componentWillUnmount:function(){this.getStore(k).removeListener("changed",this.onAction)},onAction:function(){var a=this.getStore(k).getActionInfo(),b=i.getValue(a,["data"],{});i.getValue(b,"searchId","")===this.props.searchId&&a.action===h.SEARCH_ADS_SUCCESS&&(this.setState({ads:b.data}),l.retention("searchAdHoverFavicon"),l.retention("searchAdSponsoredRating"),l.retention("searchAdThemeColor"),l.retention("searchAdHoverHighlight"))},render:function(){var a,b,c=(this.state.ads||[])[0];return c?(a=e.addons.classSet({"search-message-container-ad":!0,"search-ad-no-ratings":!c.ad_avg_rating,"flip-ad-and-rating":this.props.searchAdFlipLabelAndRatingEnabled,"search-ad-hover-highlight":this.props.searchAdHoverHighlightEnabled,"search-ad-theme-color":this.props.searchAdThemeColorEnabled}),b=e.addons.classSet({"search-ad-favicon":!0,"search-ad-favicon-toggle":this.props.searchAdFaviconHoverEnabled}),e.createElement("div",{className:a,onClick:this.openAdTarget.bind(null,c.ad_url)},e.createElement("div",{className:"icon icon-sponsored",onClick:this.openAdRelevancyExplainer}),e.createElement("div",{className:b,style:{backgroundImage:"url("+c.ad_favicon_url+")"}}),e.createElement("div",{className:"message-sender"},this._scrapeDomainName(c.ad_pretty_url)),e.createElement("div",{className:"message-subject"},e.createElement("span",{className:"message-subject-text"},j.stripHTML(c.ad_title)),e.createElement("span",{className:"message-snippet"},j.stripHTML(c.ad_description))),this.props.searchAdFlipLabelAndRatingEnabled?[this.renderAdLabel(c),this.renderRating(c)]:[this.renderRating(c),this.renderAdLabel(c)])):null},renderAdLabel:function(a){var b=e.addons.classSet({"message-date":!this.props.searchAdFlipLabelAndRatingEnabled,"message-folder":this.props.searchAdFlipLabelAndRatingEnabled});return a.ad_note?e.createElement("div",{className:b,onClick:this.openAdRelevancyExplainer},a.ad_note):null},renderRating:function(a){var b=e.addons.classSet({"message-folder":!this.props.searchAdFlipLabelAndRatingEnabled,"message-date":this.props.searchAdFlipLabelAndRatingEnabled,"avg-rating":!0});return a.ad_avg_rating?e.createElement("div",{className:b,"data-rating":a.ad_avg_rating,onClick:this.openAdRatingExplainer.bind(this,a)},e.createElement("div",{className:"icon icon-star"}),e.createElement("div",{className:"icon icon-star"}),e.createElement("div",{className:"icon icon-star"}),e.createElement("div",{className:"icon icon-star"}),e.createElement("div",{className:"icon icon-star"})):null},openAdRatingExplainer:function(a,b){a.ad_rating_detail_page&&(b.stopPropagation(),window.open(a.ad_rating_detail_page))},openAdRelevancyExplainer:function(a){var b=f.template(strings.str_cfg_url_about_our_ads,null)({str_cfg_base_intl:strings.str_cfg_base_intl,str_cfg_partner:strings.str_cfg_partner});b&&(a.stopPropagation(),window.open(b))},openAdTarget:function(a){window.open(a)},_scrapeDomainName:function(a){var b,c=a,d=document.createElement("a");return/:\/\//.test(c)||(c="http://"+c),d.href=c,c=d.hostname.split("."),b=c.length>2?c[c.length-1].length>3?c[c.length-2]:c[c.length-1].length<=3&&c[c.length-2].length<=3?c[c.length-3]:c[c.length-2]:c[0],a.match(new RegExp(b,"i"))[0]}}),b.exports=d},{ActionStore:"ActionStore",Context:"Context",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",StatService:"StatService",StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],25:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("Context"),h=a("StatService"),i=a("Utils"),j=a("../mixins/MultiSelectNavigation"),k=a("List"),l=a("ListItem"),m=a("../../actions/MessageActions"),n=a("./MessageListContextMenu.jsx"),o=a("UserSettingsConstants"),p=a("../../../../artifacts/lang"),q=a("../../common/Utils"),r=a("../../common/ComponentUtils"),s=e.addons.batchedUpdates,t=864e5,u=36;d=e.createClass({displayName:"MessageList",propTypes:{searchId:e.PropTypes.string.isRequired,searchType:e.PropTypes.string.isRequired,selectedItems:e.PropTypes.object,setSelectedItems:e.PropTypes.func,items:e.PropTypes.array.isRequired,messageItemComponent:e.PropTypes.func.isRequired,onMark:e.PropTypes.func.isRequired,onStar:e.PropTypes.func.isRequired,onDelete:e.PropTypes.func.isRequired,onSearch:e.PropTypes.func.isRequired,sortType:e.PropTypes.string,sortOrder:e.PropTypes.string,handleReplyToSender:e.PropTypes.func.isRequired,handleReplyToAll:e.PropTypes.func.isRequired,handleForward:e.PropTypes.func.isRequired,setStat:e.PropTypes.func.isRequired,handlePrint:e.PropTypes.func.isRequired,handleMark:e.PropTypes.func.isRequired,handleStar:e.PropTypes.func.isRequired,handleUnsubscribe:e.PropTypes.func.isRequired,handleDelete:e.PropTypes.func.isRequired,handleRedirect:e.PropTypes.func.isRequired,handleReportSpam:e.PropTypes.func.isRequired,handleQuickFilter:e.PropTypes.func.isRequired,handleAddToContacts:e.PropTypes.func.isRequired,getSelectedMessages:e.PropTypes.func.isRequired,shouldShowSnippet:e.PropTypes.bool,showAccountPrefix:e.PropTypes.bool},_anchorNodeHeight:0,getDefaultProps:function(){return{items:[],messageItemComponent:function(){},onMark:f.noop,onStar:f.noop,onDelete:f.noop,onSearch:f.noop,handlePrint:f.noop,handleMark:f.noop,handleStar:f.noop,handleUnsubscribe:f.noop,handleDelete:f.noop,handleReportSpam:f.noop,handleQuickFilter:f.noop,handleAddToContacts:f.noop,getSelectedMessages:f.noop,handleReplyToSender:f.noop,handleReplyToAll:f.noop,handleForward:f.noop,handleRedirect:f.noop,setStat:f.noop,setActiveIndex:f.noop,isSearch:!1,sortType:o.MSG_SORT_TYPE_DATE,sortOrder:o.MSG_SORT_ORDER_DOWN}},mixins:[g,j],getInitialState:function(){var a=this.getSegments(this.props.items),b=this.getSegmentsOrder(a);return{contextMenuOpen:!1,contextCoordinates:{x:0,y:0},segmentedGroup:a,segmentedGroupOrder:b}},componentDidMount:function(){var a=h.timerComplete("doSearchRender");a&&(h.featureLatency("srp_list_render_complete_"+this.props.searchType,a),h.lighthouseBeaconStat("search_latency",a)),this.maybeHideAnchoredDate(),this.debouncedCacheAnchorLabelYOffsets=r.componentDebounce(function(){i.requestAnimationFrame(function(){this.cacheAnchorLabelYOffsets()}.bind(this))}.bind(this),32),this.debouncedCacheAnchorLabelYOffsets()},componentDidUpdate:function(){this.maybeHideAnchoredDate(),this.debouncedCacheAnchorLabelYOffsets()},componentWillReceiveProps:function(a){var b,c;a.items!==this.props.items&&(b=this.getSegments(a.items),c=this.getSegmentsOrder(b),this.setState({segmentedGroup:b,segmentedGroupOrder:c}))},render:function(){return e.createElement("div",{hidden:this.props.hidden},this.renderMessageGroupLabel(),e.createElement(k,{ref:"list",role:"list",onKeyDown:this.handleKeyDown},this.renderSegments()),this.renderContextMenu())},renderMessageGroupLabel:function(){return e.createElement("div",{className:"message-list-group scroll-locked",ref:"anchoredDateLabel"})},renderSegments:function(){var a=this.props,b=this.state,c={nonDateSort:a.items},d=["nonDateSort"],f=[];return a.sortType===o.MSG_SORT_TYPE_DATE&&NeoConfig.timeChunk&&(c=b.segmentedGroup,d=b.segmentedGroupOrder),this.orderedDateLabels=d,f=d.map(function(b,d){var f=this.getDateString(b)||"",g=c[b],h=e.addons.classSet({"message-list-group":!0,"non-date-sort":!f}),i=0===d&&a.children;return e.createElement(k,{className:h,dataTitle:f,role:"presentation",ref:b},i,g.map(function(b){var c=e.createElement(a.messageItemComponent,{key:b.mid,id:b.mid,searchId:a.searchId,showRecipient:a.showRecipient,accounts:a.accounts,showAccountPrefix:a.showAccountPrefix,active:this.isActive(b),selected:this.isSelected(b),data:b,isRead:b.isRead,isFlagged:b.isFlagged,onSelect:this.handleMessageSelection,handleDragDropStart:a.handleDragDropStart,onMark:a.onMark,onStar:a.onStar,onDelete:a.onDelete,onArchive:a.onArchive,onSearch:a.onSearch,isSearch:a.isSearch,shouldShowSnippet:a.shouldShowSnippet});return e.createElement(l,{key:b.mid,ref:b.mid,id:b.mid,role:"listitem",tabIndex:"0",onClick:this.handleMessageClick,onContextMenu:this.openContextMenuExclusively},c)},this))},this)},renderContextMenu:function(){var a=this.props;return this.state.contextMenuOpen?e.createElement(n,{searchId:a.searchId,coordinates:this.state.contextCoordinates,items:a.items,activeItem:this.getActiveItem(),selectedItemsObj:a.selectedItemsObj,currentFilter:a.currentFilter,closeContextMenu:this.closeContextMenu,isArchive:a.isArchive,handlePrint:a.handlePrint,handleMark:a.handleMark,handleStar:a.handleStar,handleUnsubscribe:a.handleUnsubscribe,handleDelete:a.handleDelete,handleArchive:a.handleArchive,handleReportSpam:a.handleReportSpam,handleQuickFilter:a.handleQuickFilter,handleAddToContacts:a.handleAddToContacts,handleReplyToSender:a.handleReplyToSender,handleReplyToAll:a.handleReplyToAll,handleForward:a.handleForward,setStat:a.setStat,getSelectedMessages:a.getSelectedMessages}):void 0},openContextMenu:function(a,b,c){var d=f.find(this.props.items,{id:b});this.isSelected(d)||this.selectItem(d,c),this.setState({contextMenuOpen:!0,contextCoordinates:{x:a.clientX,y:a.clientY}}),a.preventDefault()},openContextMenuExclusively:function(a,b){this.openContextMenu(a,b,!0)},closeContextMenu:function(){this.setState({contextMenuOpen:!1})},getDateString:function(a){var b=["january","february","march","april","may","june","july","august","september","october","november","december"],c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];return 0===a.indexOf("earlier_year_")?f.template(p.str_mail_earlier_year,null)({year:a.substring(13)}):0===a.indexOf("earlier_month_")?f.template(p.str_mail_earlier_month,null)({month:p["str_month_"+b[a.substring(14)]]}):0===a.indexOf("year_")?a.replace("year_",""):0===a.indexOf("weekday_")?p["str_day_"+c[a.substring(8)]]:0===a.indexOf("month_")?p["str_month_"+b[a.substring(6)]]:p["str_mail_"+a]},getSegmentGroup:function(a,b){var c,d=b.creationDate,e=new Date(a).getTime(),f=new Date(e).getFullYear(),g=new Date(e).getMonth(),h=new Date(e).setHours(0,0,0,0),i=h-new Date(e).getDay()*t,j=i-7*t,k=h-t,l=new Date(f,g,1).setHours(0,0,0,0),m=new Date(f,0,1).setHours(0,0,0,0),n=new Date(f-1,0,1).setHours(0,0,0,0),o=new Date(f,g-1,1).setHours(0,0,0,0);return c=g>=5?new Date(f,g-5,1).setHours(0,0,0,0):new Date(f-1,g+7,1).setHours(0,0,0,0),d>=i?this.props.showUpcomingTimeChunkLabel&&d>e?"upcoming_results":this.props.isSearch?"recent_results":d>=h?"today":d>=k?"yesterday":"weekday_"+new Date(d).getDay():d>=j?"last_week":d>=l?"earlier_month_"+new Date(d).getMonth():d>=o?l>j?"earlier_month_"+new Date(d).getMonth():"month_"+new Date(d).getMonth():d>=c?"month_"+new Date(d).getMonth():d>=m?"earlier_year_"+new Date(d).getFullYear():d>=n?c>=m?"year_"+new Date(d).getFullYear():"earlier_year_"+new Date(d).getFullYear():"year_"+new Date(d).getFullYear()},getSegments:function(a){return f.groupBy(a,this.getSegmentGroup.bind(this,Date.now()))},getSegmentsOrder:function(a){var b=Object.keys(a),c=this.props.sortOrder===o.MSG_SORT_ORDER_DOWN?-1:1;return f.sortBy(b,function(b){return c*a[b][0].creationDate})},handleMessageClick:function(a,b){a.shiftKey?this.handleMessageRangeSelection(a,b):a.ctrlKey?this.handleMessageSingleSelection(a,b):this.openMessage(b)},openMessage:function(a){var b=this.props.searchId,c=f.findIndex(this.props.items,{mid:a});this.executeAction(m.openMessage,{items:this.props.items,index:c}),h.stat({name:"srp_msg_open",tags:{msgIndex:c}}),h.logRapid("mt:click",{action:"srp_msg_open",append:{mSrchId:b,mSrchQry:this.props.query.toHumanReadableString(),mClkIdx:c,mYid:NeoConfig.loginId,mClkMid:a}})},handleMessageSelection:function(a,b){a.shiftKey?this.handleMessageRangeSelection(a,b):this.handleMessageSingleSelection(a,b)},handleMessageSingleSelection:function(a,b){var c=f.findIndex(this.props.items,{mid:b});a.stopPropagation(),this.startRange(c),this.toggleItemSelection(this.props.items[c])},handleMessageRangeSelection:function(a,b){a.stopPropagation(),this.selectRange(this.getLastIndex(),f.findIndex(this.props.items,{mid:b}),!1)},handleKeyDown:function(a){var b;" "===a.key&&(a.preventDefault(),b=this.props.getActiveIndex(),this.startRange(b),this.selectIndex(b),this.props.setActiveIndex(b))},keyboardNavigate:function(a,b,c){var d=this;s(function(){var e,f=d.state,g=f.lastIndex,h=d.getItems()[g],i=f.rangeStart;e=a?d.navigateUp():d.navigateDown(),d.scrollIntoViewWhenNeeded(a,e),b?g>i&&a||i>g&&!a?(d.deselectItem(h),d.setLastIndex(e)):(d.selectRange(i,e),d.setLastIndex(e)):c||(d.clearSelection(),d.startRange(e))})},keyboardNavigateUp:function(a,b){this.keyboardNavigate(!0,a,b)},keyboardNavigateDown:function(a,b){this.keyboardNavigate(!1,a,b)},maybeHideAnchoredDate:function(){var a=!f.find(this.props.items,function(a){return"undefined"==typeof a.isVisible||a.isVisible===!0});a&&this.refs.anchoredDateLabel.getDOMNode().removeAttribute("data-title")},cacheAnchorLabelYOffsets:function(){var a,b,c={},d=[];this.props.sortType===o.MSG_SORT_TYPE_DATE&&f.each(this.orderedDateLabels,function(e){this.refs[e]&&(a=this.refs[e].getDOMNode(),b=a.offsetTop,c[b]=a.getAttribute("data-title"),d.push(b))},this),this.anchorLabelOffsets=c,this.anchorLabelOffsetValues=d},findMatchingAnchorIndex:function(a){var b=this.anchorLabelOffsetValues,c=f.findLastIndex(b,function(b){return a>b-u});return c},handleMessageListScroll:function(a){var b,c,d,e,g,h,i;this.props.sortType===o.MSG_SORT_TYPE_DATE&&(b=q.getTransformProp(),c=this.refs.anchoredDateLabel.getDOMNode(),d=this.findMatchingAnchorIndex(a),this.anchorLabelOffsetValues&&this.anchorLabelOffsetValues.length>0&&(0>d&&(d=0),e=this.anchorLabelOffsets[this.anchorLabelOffsetValues[d]],g=this.anchorLabelOffsetValues[d+1]),this._anchorNodeHeight||(this._anchorNodeHeight=c.offsetHeight),f.isNumber(g)&&(h=g-this._anchorNodeHeight-u,i=a-h,i>0?(c.style[b]="translate3d(0, "+-i+"px, 0)",c.style.zIndex=1):c.style[b]&&(c.style[b]="",c.style.zIndex="")),e?c.getAttribute("data-title")!==e&&c.setAttribute("data-title",e):c.removeAttribute("data-title"))},scrollIntoViewWhenNeeded:function(a,b){b=a?b-1:b+1,b=Math.min(b,this.props.items.length-1),b=Math.max(b,0),0!==b&&this.props.scrollIntoViewWhenNeeded(this.refs[this.props.items[b].mid].getDOMNode())}}),b.exports=d},{"../../../../artifacts/lang":2,"../../actions/MessageActions":4,"../../common/ComponentUtils":5,"../../common/Utils":6,"../mixins/MultiSelectNavigation":29,"./MessageListContextMenu.jsx":26,Context:"Context",List:"List",ListItem:"ListItem",StatService:"StatService",UserSettingsConstants:"UserSettingsConstants",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}],26:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("Context"),h=a("Menu"),i=a("MenuItem"),j=a("MenuItemGroup"),k=a("../../../../artifacts/lang"),l=a("../../actions/MessageActions"),m=a("MessageConstants");d=e.createClass({displayName:"MessageListContextMenu",propTypes:{searchId:e.PropTypes.string.isRequired,items:e.PropTypes.array.isRequired,activeItem:e.PropTypes.object,selectedItemsObj:e.PropTypes.object.isRequired,coordinates:e.PropTypes.object.isRequired,closeContextMenu:e.PropTypes.func.isRequired,handleReplyToSender:e.PropTypes.func.isRequired,handleReplyToAll:e.PropTypes.func.isRequired,handleForward:e.PropTypes.func.isRequired,setStat:e.PropTypes.func.isRequired,handleMark:e.PropTypes.func.isRequired,handleStar:e.PropTypes.func.isRequired,handleUnsubscribe:e.PropTypes.func.isRequired,handleDelete:e.PropTypes.func.isRequired,handlePrint:e.PropTypes.func.isRequired,handleReportSpam:e.PropTypes.func.isRequired,handleQuickFilter:e.PropTypes.func.isRequired,getSelectedMessages:e.PropTypes.func.isRequired},mixins:[g],render:function(){var a=this.props,b=this.props.selectedItemsObj.selectedFilter||this.getSelectedCount()>1;return e.createElement(h,{coordinates:a.coordinates,closeMenu:a.closeContextMenu},e.createElement(j,null,e.createElement(i,{onClick:a.handleReplyToSender,value:"reply",title:k.str_menu_reply_sender,disabled:b},e.createElement("kbd",{"aria-hidden":"true"},k.str_menu_accel_r),k.str_menu_reply_sender),e.createElement(i,{onClick:a.handleReplyToAll,value:"reply_all",title:k.str_menu_reply_all,disabled:b},e.createElement("kbd",{"aria-hidden":"true"},k.str_menu_accel_a),k.str_menu_reply_all),e.createElement(i,{onClick:a.handleForward,value:"forward",title:k.str_menu_forward,disabled:b},e.createElement("kbd",{"aria-hidden":"true"},k.str_menu_accel_f),k.str_menu_forward)),e.createElement(j,null,e.createElement(i,{onClick:a.handleMark.bind(null,!0),title:k.str_menu_mark_read,value:"markRead"},e.createElement("kbd",{"aria-hidden":"true"},k.str_menu_accel_k),k.str_menu_mark_read),e.createElement(i,{onClick:a.handleMark.bind(null,!1),title:k.str_menu_mark_unread,value:"markUnread"},e.createElement("kbd",{"aria-hidden":"true"},k.str_menu_accel_shift_k),k.str_menu_mark_unread),e.createElement(i,{onClick:a.handleStar.bind(null,!0),title:k.str_menu_flag,value:"flagStar"},e.createElement("kbd",{"aria-hidden":"true"},k.str_menu_accel_l),k.str_menu_flag),e.createElement(i,{onClick:a.handleStar.bind(null,!1),title:k.str_menu_clear_flag,value:"flagUnstar"},e.createElement("kbd",{"aria-hidden":"true"},k.str_menu_accel_shift_l),k.str_menu_clear_flag),e.createElement(i,{onClick:a.handleUnsubscribe.bind(null,m.UNSUBSCRIBE),title:k.str_block,value:"unsubscribe"},k.str_block)),e.createElement(j,null,e.createElement(i,{title:k.str_menu_this_is_spam,onClick:a.handleReportSpam.bind(null,m.SPAM_TYPE_NORMAL)},k.str_menu_this_is_spam),e.createElement(i,{title:k.str_menu_this_is_notforme,onClick:a.handleReportSpam.bind(null,m.SPAM_TYPE_NOTMINE)},k.str_menu_this_is_notforme),e.createElement(i,{onClick:a.handleArchive,title:k.str_menu_archive_message,hidden:!a.isArchive,value:"archive"},e.createElement("kbd",{"aria-hidden":"true"},k.str_menu_accel_archive),k.str_menu_archive_message),e.createElement(i,{onClick:a.handleDelete,title:k.str_menu_delete_message,value:"delete"},e.createElement("kbd",{"aria-hidden":"true"},k.str_menu_accel_delete),k.str_menu_delete_message),e.createElement(i,{onClick:a.handlePrint,disabled:b,title:k.str_menu_print,value:"print"},e.createElement("kbd",{"aria-hidden":"true"},k.str_menu_accel_p),k.str_menu_print),e.createElement(i,{onClick:a.handleQuickFilter,value:"quickFilter",title:k.str_menu_filter_emails_like_this,disabled:b},k.str_menu_filter_emails_like_this)),e.createElement(j,null,e.createElement(i,{onClick:a.handleAddToContacts,value:"addContact",title:k.str_menu_add_sender_to_contacts,disabled:b},e.createElement("kbd",{"aria-hidden":"true"},k.str_menu_accel_shift_c),e.createElement("span",{className:"search-menuitem-add-sender-to-contact"},k.str_menu_add_sender_to_contacts))),e.createElement(i,{onClick:this.handleRedirect,title:k.str_menu_redirect},k.str_menu_redirect),e.createElement(i,{onClick:this.handleDebug,title:k.str_menu_debugmsg},k.str_menu_debugmsg))},getSelectedCount:function(){return f.chain(this.props.selectedItemsObj.selectedItems).values().concat([this.props.activeItem]).compact().uniq(function(a){return a.id}).size().value()},executeMessageAction:function(a,b){b=f.merge(b,{searchId:this.props.searchId}),this.executeAction(a,b)},handleDebug:function(){this.executeAction(l.debugMessage,this.props.getSelectedMessages()[0].mid),this.props.setStat("debug",1)},handleRedirect:function(){var a=this.props.getSelectedMessages();this.executeAction(l.redirectMessage,{selectedItems:a,fid:"%40S%40Search"}),this.props.setStat("redirect",a.length)}}),b.exports=d},{"../../../../artifacts/lang":2,"../../actions/MessageActions":4,Context:"Context",Menu:"Menu",MenuItem:"MenuItem",MenuItemGroup:"MenuItemGroup",MessageConstants:"MessageConstants",lodash:"lodash","react/addons":"react/addons"}],27:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("../IconButton.jsx"),h=a("RelativeDateFormatter"),i=a("../../../../artifacts/lang"),j=a("StatService"),k=a("FolderStore"),l=a("Context"),m=a("BidiString"),n=a("StringUtils"),o=a("ObjectUtils"),p=a("Checkbox");d=e.createClass({displayName:"MessageListItem",propTypes:{key:e.PropTypes.string.isRequired,data:e.PropTypes.object.isRequired,onSelect:e.PropTypes.func,onMark:e.PropTypes.func,onStar:e.PropTypes.func,onDelete:e.PropTypes.func,onSearch:e.PropTypes.func,isSearch:e.PropTypes.bool,shouldShowSnippet:e.PropTypes.bool,showRecipient:e.PropTypes.bool,showAccountPrefix:e.PropTypes.bool},mixins:[l,e.addons.PureRenderMixin],getDefaultProps:function(){return{isSearch:!1}},componentDidUpdate:function(){f.debounce(function(){this.props.active&&this.getDOMNode().focus()}.bind(this),50)},render:function(){var a,b,c,d,j,l,n,q=this.props,r=q.data,s=e.addons.classSet({"message-list-item":!0,active:q.active,selected:q.selected,unread:!q.isRead,flagged:q.isFlagged}),t=this.getStore(k).findByIndex(r.folderNumber),u=o.getValue(r,["toList"]),v=o.getValue(u,[0],{}),w=o.getValue(u,[u.length-1],{}),x=o.getValue(r,["fromList",0],{}),y=u.length>1?v.name.split(" ").shift()+"..."+w.name.split(" ").shift():v.name,z=y||x.name||x.id||x.email,A=q.showRecipient?z:x.name||x.id,B=u.length>1?v.name+", "+w.name:v.name,C=f.template(i.str_message_from,null)({name:A}),D={icon:!0,"message-attachment-icon":!0},E=e.addons.classSet({"message-action-btn search-btn":!0,"message-action-btn search-btn recipient":q.showRecipient&&u.length>1});return t?(a=o.getValue(t,"id")||o.getValue(t,"folderInfo.index"),b=this.getStore(k).getLocalizedFolderNameById(a),c=o.getValue(t,"acctId"),d=o.getValue(this.props.accounts[c],"description"),j=this.props.showAccountPrefix?d:b,l=this.props.showAccountPrefix?f.compact([d,b]).join("/"):b):(j=r.folderId,l=j),n=f.template(i.str_message_is_in_folder,null)({folderName:j}),r.attachments&&r.attachments.length&&(r.attachments.every(this.isImageAttachment)?D["icon-theme"]=!0:D["icon-attachment"]=!0),e.createElement("div",{tabIndex:"-1",className:s,onMouseDown:this.handleDragDropStart},e.createElement(p,{isSelected:q.selected,onChange:this.handleChange,title:i.str_checkbox_singular,ariaLabel:q.selected?i.str_checkbox_singular_checked:i.str_checkbox_singular_unchecked,tabIndex:"-1"}),e.createElement(g,{iconClass:"info-unread",title:q.isRead?i.str_mark_as_unread:i.str_mark_as_read,ariaLabel:q.isRead?i.str_message_is_read:i.str_message_is_unread,buttonClass:"message-action-btn read-status",tabIndex:-1,onClick:this.handleMark}),e.createElement(m,{str:A,tagName:"div",className:"message-sender",title:B,"aria-label":C}),e.createElement("div",{className:"message-action-btns","aria-hidden":"true"},e.createElement(g,{iconClass:"icon-small-search",title:q.showRecipient?i.str_search_msg_from_recipient:i.str_search_msg_from_sender,tabIndex:-1,buttonClass:E,onClick:this.handleSearchBySender}),e.createElement(g,{iconClass:"icon-small-delete",title:i.str_delete_message,tabIndex:-1,buttonClass:"message-action-btn delete-btn",onClick:this.handleDelete}),e.createElement(g,{iconClass:"flag",title:r.isFlagged?i.str_unstar_message:i.str_star_message,tabIndex:-1,buttonClass:"message-action-btn flag-status",onClick:this.handleStar})),e.createElement("div",{className:"message-subject"},this.renderSubjectText(),this.renderSnippetText()),e.createElement(m,{str:j,tagName:"div",className:"message-folder",title:l,"aria-label":n}),e.createElement("span",{className:e.addons.classSet(D),title:i.str_attachments,"aria-hidden":"true"}),e.createElement(h,{className:"message-date",timestamp:r.creationDate}))},renderSnippetText:function(){var a=this.props,b=a.data.snippet;return a.shouldShowSnippet?(a.isSearch&&a.data.snippet&&(b=this.replaceMatchesWithWrappedBlocks(a.data.snippet)),e.createElement("span",{className:"message-snippet",title:a.data.snippet,"aria-label":a.data.snippet.substr(0,80),dir:n.getTextDirection(a.data.snippet)},b)):void 0},renderSubjectText:function(){var a=this.props,b=a.data.subject||i.str_msg_view_no_subject,c=e.addons.classSet({"message-subject-inner":a.shouldShowSnippet,"message-subject-inner-full-width":!a.shouldShowSnippet});return a.isSearch&&a.data.subject&&(b=this.replaceMatchesWithWrappedBlocks(a.data.subject)),e.createElement("span",{className:c,title:a.data.subject||"",dir:n.getTextDirection(a.data.subject)},e.createElement("span",{className:"message-subject-main"},b),this.renderSearchBySubjectButton())},renderSearchBySubjectButton:function(){return this.props.data.subject?e.createElement(g,{iconClass:"icon-small-search",title:i.str_search_msg_with_subject,ariaHidden:"true",tabIndex:-1,buttonClass:"message-action-btn search-btn",onClick:this.handleSearchBySubject}):void 0},handleDragDropStart:function(a){var b=this.props;0===a.button&&b.handleDragDropStart(b.data,b.selected)},splitByMatchDelimiter:function(a){return a.split(/(\^_[^^]*?\^_)/g)},replaceMatchesWithWrappedBlocks:function(a){var b=/^\^_+|\^_+$/g;return this.splitByMatchDelimiter(a).map(function(a){return 0===a.indexOf("^_")?e.createElement("span",{className:"found"},a.replace(b,"")):a})},handleChange:function(a){this.props.onSelect(a,this.props.id)},handleMark:function(a){var b=this.props;a.stopPropagation(),b.onMark(a,b.data.id),this.setStat(b.isRead?"unread":"read")},handleStar:function(a){var b=this.props;a.stopPropagation(),
b.onStar(a,b.data.id),this.setStat(b.isFlagged?"unflagged":"flagged")},handleDelete:function(a){var b=this.props;a.stopPropagation(),b.onDelete(a,b.data.id),this.setStat("delete")},handleSearchBySender:function(a){var b=this.props.data.fromList[0],c=b.emails&&b.emails[0],d=b.id,e=b.name,f=this.props.data.toList[0],g=f.emails&&f.emails[0],h=f.id,i=f.name,j=this.props.showRecipient?g:c,k=this.props.showRecipient?h:d,l=this.props.showRecipient?i:e;a.stopPropagation(),j||k?this.props.onSearch("email",{email:j||k,keyword:l,typeTag:"srp_msglist_search_from"}):this.props.onSearch("keyword",{keyword:l,typeTag:"srp_msglist_search_from"}),this.setStat("search_from")},handleSearchBySubject:function(a){a.stopPropagation(),this.props.onSearch("keyword",{keyword:'subject:"'+this.sanitizeTitle(this.props.data.subject)+'"',typeTag:"srp_msglist_search_by_subject"}),this.setStat("search_by_subject")},sanitizeTitle:function(a){return a.replace(/"/g,"").replace(/\^_(?!\^)/g,"")},setStat:function(a){j.stat({name:"srp_hover_menu",tags:{action:a}})},isImageAttachment:function(a){return-1!==a.mimeType.indexOf("image/")}}),b.exports=d},{"../../../../artifacts/lang":2,"../IconButton.jsx":9,BidiString:"BidiString",Checkbox:"Checkbox",Context:"Context",FolderStore:"FolderStore",ObjectUtils:"ObjectUtils",RelativeDateFormatter:"RelativeDateFormatter",StatService:"StatService",StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],28:[function(a,b,c){"use strict";var d,e=a("lodash");d={UP_DIRECTION:-1,DOWN_DIRECTION:1,getInitialState:function(){return{lastIndex:-1,rangeStart:0}},getItems:function(){return this.state.items||this.props.items},navigate:function(a){var b=this,c=b.state.lastIndex+a,d=b.getItems();return d.length<1?-1:(c=Math.min(c,d.length-1),c=Math.max(c,0),e.isFunction(b.setActiveIndex)?b.setActiveIndex(c):b.props.setActiveIndex(c),b.setLastIndex(c),c)},navigateDown:function(){return this.navigate(this.DOWN_DIRECTION)},navigateUp:function(){return this.navigate(this.UP_DIRECTION)},setLastIndex:function(a){this.setState({lastIndex:a})},getLastIndex:function(){return this.state.lastIndex}},b.exports=d},{lodash:"lodash"}],29:[function(a,b,c){"use strict";var d,e=a("lodash"),f=a("./KeyboardNavigationHelper.js");d=e.merge({clearSelection:function(){this.props.setSelectedItems({},{},null)},selectItem:function(a,b){var c=e.findIndex(this.getItems(),a);this.setLastIndex(c),this.selectRange(c,c,b)},selectToItem:function(a,b){var c=this.props.getActiveIndex(),d=e.findIndex(this.getItems(),a);this.selectRange(c,d,b)},selectIndex:function(a,b){this.selectRange(a,a,b)},selectRange:function(a,b,c){var d=this,f={},g=d.getItems(),h=d.props.selectedItemsObj.deselectedItems,i=c?{}:d.props.selectedItemsObj.selectedItems,j=Math.min(a,b),k=Math.max(a,b);this.props.setActiveIndex(b),g.slice(j,k+1).forEach(function(a){f[a.id]=a,h[a.id]&&delete h[a.id]}),d.props.setSelectedItems(e.merge(f,i),h)},deselectItem:function(a){var b=this,c=b.props.selectedItemsObj.selectedItems,d={},f=b.props.selectedItemsObj.deselectedItems,g=e.findIndex(this.getItems(),a);d[a.id]=a,this.setLastIndex(g),this.props.setActiveIndex(-1),b.props.setSelectedItems(e.omit(c,a.id),e.merge(d,f))},toggleItemSelection:function(a){this.isSelected(a)?this.deselectItem(a):this.selectItem(a)},startRange:function(a){this.setState({rangeStart:a})},isSelected:function(a){var b=this.props.selectedItemsObj.selectedItems,c=this.props.selectedItemsObj.selectedFilter,d=this.props.selectedItemsObj.deselectedItems,e=!1;switch(c){case"starred":e=a.isFlagged;break;case"unstarred":e=!a.isFlagged;break;case"read":e=a.isRead;break;case"unread":e=!a.isRead;break;case"all":e=!0}return e&&!d[a.id]||!!b[a.id]},getSelectedItems:function(){return e.values(this.props.selectedItemsObj.selectedItems)},getActiveItem:function(){return this.hasActiveItem()&&this.getItems()[this.props.getActiveIndex()]},hasActiveItem:function(){return this.props.getActiveIndex>-1},isActive:function(a){var b=this.props.getActiveIndex(),c=this.getItems()[b];return c===a}},f),b.exports=d},{"./KeyboardNavigationHelper.js":28,lodash:"lodash"}],30:[function(a,b,c){"use strict";var d={characters:{"default":{decimal:".",separator:","},ar:{decimal:",",separator:"."},"ar-AE":{decimal:",",separator:"."},"ar-BH":{decimal:",",separator:"."},"ar-DZ":{decimal:",",separator:"."},"ar-EG":{decimal:",",separator:"."},"ar-IQ":{decimal:",",separator:"."},"ar-JO":{decimal:",",separator:"."},"ar-KW":{decimal:",",separator:"."},"ar-LB":{decimal:",",separator:"."},"ar-LY":{decimal:",",separator:"."},"ar-MA":{decimal:",",separator:"."},"ar-OM":{decimal:",",separator:"."},"ar-QA":{decimal:",",separator:"."},"ar-SA":{decimal:",",separator:"."},"ar-SD":{decimal:",",separator:"."},"ar-SY":{decimal:",",separator:"."},"ar-TN":{decimal:",",separator:"."},"ar-YE":{decimal:",",separator:"."},bg:{decimal:",",separator:" "},"bg-BG":{decimal:",",separator:" "},bn:{decimal:".",separator:","},"bn-BD":{decimal:".",separator:","},"bn-IN":{decimal:".",separator:","},cs:{decimal:",",separator:" "},"cs-CZ":{decimal:",",separator:" "},da:{decimal:",",separator:"."},"da-DK":{decimal:",",separator:"."},de:{decimal:",",separator:"."},"de-AT":{decimal:",",separator:"."},"de-CH":{decimal:",",separator:"."},"de-DE":{decimal:",",separator:"."},el:{decimal:",",separator:"."},"el-GR":{decimal:",",separator:"."},en:{decimal:".",separator:","},"en-AU":{decimal:".",separator:","},"en-CA":{decimal:".",separator:","},"en-GB":{decimal:".",separator:","},"en-IE":{decimal:".",separator:","},"en-IN":{decimal:".",separator:","},"en-JO":{decimal:".",separator:","},"en-MY":{decimal:".",separator:","},"en-NZ":{decimal:".",separator:","},"en-PH":{decimal:".",separator:","},"en-SG":{decimal:".",separator:","},"en-US":{decimal:".",separator:","},"en-ZA":{decimal:".",separator:","},es:{decimal:",",separator:"."},"es-AR":{decimal:",",separator:"."},"es-CL":{decimal:",",separator:"."},"es-CO":{decimal:",",separator:"."},"es-ES":{decimal:",",separator:"."},"es-MX":{decimal:",",separator:"."},"es-PE":{decimal:",",separator:"."},"es-US":{decimal:",",separator:"."},"es-VE":{decimal:",",separator:"."},et:{decimal:",",separator:" "},"et-EE":{decimal:",",separator:" "},fi:{decimal:",",separator:" "},"fi-FI":{decimal:",",separator:" "},fil:{decimal:".",separator:","},"fil-PH":{decimal:".",separator:","},fr:{decimal:",",separator:" "},"fr-BE":{decimal:",",separator:" "},"fr-CA":{decimal:",",separator:" "},"fr-CH":{decimal:",",separator:" "},"fr-FR":{decimal:",",separator:" "},gu:{decimal:".",separator:","},"gu-IN":{decimal:".",separator:","},he:{decimal:".",separator:","},"he-IL":{decimal:".",separator:","},hi:{decimal:".",separator:","},"hi-IN":{decimal:".",separator:","},hr:{decimal:",",separator:"."},"hr-HR":{decimal:",",separator:"."},hu:{decimal:",",separator:" "},"hu-HU":{decimal:",",separator:" "},id:{decimal:",",separator:"."},"id-ID":{decimal:",",separator:"."},it:{decimal:",",separator:"."},"it-CH":{decimal:",",separator:"."},"it-IT":{decimal:",",separator:"."},kn:{decimal:".",separator:","},"kn-IN":{decimal:".",separator:","},ko:{decimal:".",separator:","},"ko-KR":{decimal:".",separator:","},lt:{decimal:".",separator:","},"lt-LT":{decimal:".",separator:","},lv:{decimal:",",separator:" "},"lv-LV":{decimal:",",separator:" "},ml:{decimal:".",separator:","},"ml-IN":{decimal:".",separator:","},mr:{decimal:".",separator:","},"mr-IN":{decimal:".",separator:","},ms:{decimal:".",separator:","},"ms-MY":{decimal:".",separator:","},nb:{decimal:",",separator:" "},"nb-NO":{decimal:",",separator:" "},nl:{decimal:",",separator:"."},"nl-BE":{decimal:",",separator:"."},"nl-NL":{decimal:",",separator:"."},pl:{decimal:",",separator:" "},"pl-PL":{decimal:",",separator:" "},pt:{decimal:",",separator:"."},"pt-BR":{decimal:",",separator:"."},"pt-PT":{decimal:",",separator:"."},ro:{decimal:",",separator:"."},"ro-RO":{decimal:",",separator:"."},ru:{decimal:",",separator:" "},"ru-RU":{decimal:",",separator:" "},sk:{decimal:",",separator:" "},"sk-SK":{decimal:",",separator:" "},sl:{decimal:",",separator:"."},"sl-SI":{decimal:",",separator:"."},sr:{decimal:",",separator:"."},"sr-Cyrl":{decimal:",",separator:"."},"sr-Cyrl-RS":{decimal:",",separator:"."},sv:{decimal:",",separator:" "},"sv-SE":{decimal:",",separator:" "},ta:{decimal:".",separator:","},"ta-IN":{decimal:".",separator:","},te:{decimal:".",separator:","},"te-IN":{decimal:".",separator:","},th:{decimal:".",separator:","},"th-TH":{decimal:".",separator:","},tr:{decimal:",",separator:"."},"tr-TR":{decimal:",",separator:"."},uk:{decimal:",",separator:" "},"uk-UA":{decimal:",",separator:" "},ur:{decimal:".",separator:","},"ur-PK":{decimal:".",separator:","},vi:{decimal:",",separator:"."},"vi-VN":{decimal:",",separator:"."},zh:{decimal:".",separator:","},"zh-Hans":{decimal:".",separator:","},"zh-Hans-CN":{decimal:".",separator:","},"zh-Hant":{decimal:".",separator:","},"zh-Hant-HK":{decimal:".",separator:","},"zh-Hant-TW":{decimal:".",separator:","}},toLocalNumberFormat:function(a){var b,c=this.characters&&this.characters.default;return this.characters[NeoConfig.lang]?c=this.characters[NeoConfig.lang]:NeoConfig.lang&&(b=NeoConfig.lang.match(/(.+)-x-(.+)/i),b&&b[1]&&this.characters[b[1]]&&(c=this.characters[b[1]])),a+="",a=a.replace(".",c.decimal),a=a.replace(/\B(?=(\d{3})+(?!\d))/g,c.separator)}};b.exports=d},{}],31:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("../../../../artifacts/lang");d=e.createClass({displayName:"DeleteNotification",render:function(){var a,b,c=this.props.count;return b=this.props.failure?c>1?g.str_messages_deleted_failure:g.str_message_deleted_failure:c>1?g.str_messages_deleted:g.str_message_deleted,a=f.template(b,null)({count:c}),e.createElement("span",null,a,this.props.disableUndo?null:this.renderLink())},renderLink:function(){return this.props.failure?void 0:e.createElement("a",{ref:"undo","data-action":"undo",href:"#"},g.str_undo)}}),b.exports=d},{"../../../../artifacts/lang":2,lodash:"lodash","react/addons":"react/addons"}],32:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("../../../../artifacts/lang");d=e.createClass({displayName:"MoveNotification",render:function(){var a,b,c=this.props.count;return a=this.props.failure?c>1?g.str_messages_moved_failure:g.str_message_moved_failure:c>1?g.str_messages_moved:g.str_message_moved,b=f.template(a,null)({count:c}),e.createElement("span",null,b,this.props.disableUndo?null:this.renderLink())},renderLink:function(){return this.props.failure?null:e.createElement("a",{ref:"undo","data-action":"undo",href:"#"},g.str_undo)}}),b.exports=d},{"../../../../artifacts/lang":2,lodash:"lodash","react/addons":"react/addons"}],33:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("../../../../artifacts/lang");d=e.createClass({displayName:"RestoredNotification",render:function(){var a=this.props.count>1?g.str_messages_restored:g.str_message_restored,b=f.template(a,null)({count:this.props.count});return e.createElement("span",null,b)}}),b.exports=d},{"../../../../artifacts/lang":2,lodash:"lodash","react/addons":"react/addons"}],34:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("../../../../artifacts/lang");d=e.createClass({displayName:"SpamNotification",render:function(){var a,b,c=this.props.count;return a=this.props.failure?c>1?g.str_messages_reportedspam_failure:g.str_message_reportedspam_failure:c>1?g.str_messages_reportedspam:g.str_message_reportedspam,b=f.template(a,null)({count:c}),e.createElement("span",null,b)}}),b.exports=d},{"../../../../artifacts/lang":2,lodash:"lodash","react/addons":"react/addons"}],35:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("Template"),g=a("../../../../artifacts/lang");d=e.createClass({displayName:"SyncNotification",getDefaultProps:function(){return{mode:"notification",isMultipleAccount:!1,accountName:""}},render:function(){var a="notification"===this.props.mode?"notification-sync":"empty-sync",b=this.props.isMultipleAccount?g.str_notification_multi_account_sync:g.str_notification_account_sync;return e.createElement("div",{className:"search-acct-sync "+a},e.createElement("div",{className:"icon icon-recurring-event"}),e.createElement("div",null,e.createElement(f,{tmpl:b,account:this.props.accountName})))}}),b.exports=d},{"../../../../artifacts/lang":2,Template:"Template","react/addons":"react/addons"}],36:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("Context"),h=a("MenuItem"),i=a("MenuButton"),j=a("ObjectUtils"),k=a("CopyFunctionWrapper"),l=a("../../../../artifacts/lang"),m=a("../../actions/ContactActions"),n=a("../../actions/MessageActions"),o=a("./EmailHistoryRightRail.jsx"),p=a("SearchActions"),q=a("StringUtils"),r=a("../../common/Utils"),s=a("GlobalConstants"),t=a("BidiString"),u=a("ActionStore"),v=a("SearchConstants");d=e.createClass({displayName:"ContactCard",propTypes:{searchId:e.PropTypes.string.isRequired},mixins:[g],getInitialState:function(){return{photoSource:null,hideCard:!1}},render:function(){var a=this.props,b=e.addons.classSet({"contacts-right-rail-wrapper":!0,"right-rail-contact-new-card":a.isEmailHistoryEnabled});return a.contact?e.createElement("div",{className:b,hidden:this.state.hideCard},this.renderContact(a.contact),this.renderEmailHistory()):null},renderEmailHistory:function(){var a=this.props,b=this.props.showEmailHistory&&this.props.isEmailHistoryEnabled&&j.getValue(this.props.history,"histograms.weeks.totals",[]).length;return b?e.createElement(o,{closeEmailHistory:this.props.toggleEmailHistory.bind(this,!1),lmv3Enabled:a.lmv3Enabled,key:"EmailHistoryRightRail",history:a.history,executeSearch:a.executeSearch,query:a.query}):void 0},_getImgTitle:function(a,b){switch(a){case"facebook":return strings.str_hovercard_facebook_profile;case"linkedin":return strings.str_hovercard_linkedin_profile;case"twitter":var c=b,d="@"+c.twitter.slice(c.twitter.lastIndexOf("/")+1);return strings.str_hovercard_twitter_profile+" @"+d;case"corpdir":return strings.str_hovercard_backyard_profile;case"flickr":return strings.str_hovercard_flickr_profile}},_clickSocialProfile:function(){var a={data:{contacts:[this.props.contact]}};this.executeAction(p.getPhotoSource,a)},getPrettyEndpoints:function(a){var b=j.getValue(a,["payload","endpoints"],[]),c={};return b&&(c.smtps=b.filter(function(a){return 0===a.ep.indexOf("smtp:")}).map(function(a){return a.display=a.display||a.ep.substring(5),a}),c.phones=b.filter(function(a){return 0===a.ep.indexOf("tel:")}),c.social=b.filter(function(a){/(facebook|flickr|linkedin|twitter|tumblr):/.test(a.ep)}).map(function(a){var b=a.ep.split(":");return a.id=b[1],a.network=b[0],a})),c},renderContact:function(a){var b,c,d=a.thumbnail?q.addUrlParameters(a.thumbnail,{spsize:r.isRetina()?"300X300":"150X150",badge:!0}):s.FALLBACK_XOBNI_IMG_URL,g={backgroundImage:"url("+d+")"},m=j.getValue(a.payload,["name","name"],""),n=j.getValue(a.payload,["role","position"],""),o=j.getValue(a.payload,["role","company"],""),p=this.state.photoSource,u=this._generateSocialMapping(a.payload||{}),v=this.getPrettyEndpoints(a),w=!this.props.showEmailHistory&&this.props.isEmailHistoryEnabled&&j.getValue(this.props.history,"histograms.weeks.totals",[]).length,x=j.getValue(v,["smtps",0,"display"],""),y=j.getValue(v,["phones",0,"display"],""),z=f.compact([a.name,n+", "+o,x,y]).join("\n");return p?(b=this._getImgTitle(p,u),g.cursor="pointer",c=this.openProfileLink.bind(null,u[p])):(g.cursor="pointer",c=this._clickSocialProfile.bind(this)),e.createElement("div",{className:"business-card",dir:q.getTextDirection(m)},e.createElement("div",{className:"xheader"},e.createElement("div",{className:"business-card-image image icon-attendee",title:b,onClick:c},e.createElement("div",{className:"business-card-background-image",style:g})),e.createElement(t,{str:m,tagName:"div",className:"business-card-name",title:m}),e.createElement(t,{str:n,tagName:"div",className:"business-card-title",title:n})),e.createElement("div",{className:"xfields"},(v.smtps||[]).slice(0,1).map(function(b){var c=b.display;return e.createElement("div",{className:"xcontact-field business-card-email","data-email":c,title:c},e.createElement("i",{className:"icon icon-mail-inbox"}),e.createElement("a",{href:"#",onClick:this.composeMessage.bind(this,a,c),dir:"ltr"},c))},this),(v.phones||[]).map(function(a){if(a.display){var b="icon ",c=j.getValue(a,"type","unknown");return b+=-1!==c.indexOf("mobile")?"icon-mobile-phone":-1!==c.indexOf("work")?"icon-calendar-stickers-work":-1!==c.indexOf("home")?"icon-home":"icon-calendar-stickers-phone",e.createElement("div",{className:"xcontact-field business-card-phone",title:a.display},e.createElement("i",{className:b}),e.createElement("a",{href:"tel:"+a.display.replace(/[^0-9]/g,""),dir:"ltr"},a.display))}}),this.props.isEmailHistoryEnabled?"":this.renderSocialLinks(u)),e.createElement("div",{className:"xfooter"},e.createElement(i,{className:"icon icon-more contact-menu-btn",ddClassName:"contact-card-dd-menu"},e.createElement(h,{onClick:this.onAddContact,className:"add-contact"},l.str_add_contact),e.createElement(h,{onClick:this.onEditContact,className:"edit-contact"},l.str_edit_contact),e.createElement(h,{onClick:this.onCopyEmailAddress.bind(this,x),className:"copy-email"},e.createElement(k,{copyData:x},l.str_copy_email_address)),e.createElement(h,{onClick:this.onCopyAllDetails.bind(this,z),className:"copy-details"},e.createElement(k,{copyData:z},l.str_copy_all_details)),e.createElement(h,{onClick:this.onCopyPhoneNumber.bind(this,y),className:"copy-phone"},e.createElement(k,{copyData:y},l.str_copy_phone_number))),this.renderSources(u),w?e.createElement("div",{className:"icon icon-histogram",onClick:this.props.toggleEmailHistory.bind(this,!0)}):null))},renderSocialLinks:function(a){var b=[];return a.corpdir&&b.push(e.createElement("div",{className:"xcontact-field"},e.createElement("i",{className:"icon icon-logo-backyard"}),e.createElement("a",{href:"#",onClick:this.openProfileLink.bind(null,a.corpdir)},l.str_social_backyard))),a.facebook&&b.push(e.createElement("div",{className:"xcontact-field"},e.createElement("i",{className:"icon icon-facebook"}),e.createElement("a",{href:"#",onClick:this.openProfileLink.bind(null,a.facebook)},l.str_social_facebook))),a.flickr&&b.push(e.createElement("div",{className:"xcontact-field"},e.createElement("i",{className:"icon icon-logo-flickr"}),e.createElement("a",{href:"#",onClick:this.openProfileLink.bind(null,a.flickr)},l.str_social_flickr))),a.linkedin&&b.push(e.createElement("div",{className:"xcontact-field"},e.createElement("i",{className:"icon icon-linkedin"}),e.createElement("a",{href:"#",onClick:this.openProfileLink.bind(null,a.linkedin)},l.str_social_linkedin))),a.twitter&&b.push(e.createElement("div",{className:"xcontact-field"},e.createElement("i",{className:"icon icon-twitter"}),e.createElement("a",{href:"#",onClick:this.openProfileLink.bind(null,a.twitter),dir:"ltr"},"@"+a.twitter.slice(a.twitter.lastIndexOf("/")+1)))),b},renderSources:function(a){var b=[];return a.corpdir&&b.push(e.createElement("i",{className:"icon icon-logo-backyard",onClick:this.openProfileLink.bind(null,a.corpdir)})),a.facebook&&b.push(e.createElement("i",{className:"icon icon-facebook",onClick:this.openProfileLink.bind(null,a.facebook)})),a.flickr&&b.push(e.createElement("i",{className:"icon icon-logo-flickr",onClick:this.openProfileLink.bind(null,a.flickr)})),a.linkedin&&b.push(e.createElement("i",{className:"icon icon-linkedin",onClick:this.openProfileLink.bind(null,a.linkedin)})),a.twitter&&b.push(e.createElement("i",{className:"icon icon-twitter",onClick:this.openProfileLink.bind(null,a.twitter)})),e.createElement("div",{className:"sources"},b)},_generateSocialMapping:function(a){var b,c=j.getValue(a,["sources"],""),d=j.getValue(a,["attributes"],{}),e={};return-1!==c.indexOf("corpdir")&&(b=f.result(f.findWhere(d,{source:"corpdir",key:"user_id"}),"value"),e.corpdir=b?"https://backyard.yahoo.com/profile/index.php?userid="+b:null),-1!==c.indexOf("facebook")&&(b=f.result(f.findWhere(d,{source:"facebook",key:"local_id"}),"value"),e.facebook=b?"https://facebook.com/"+b:null),-1!==c.indexOf("flickr")&&(b=f.result(f.findWhere(d,{source:"flickr",key:"flickr_uri"}),"value"),e.flickr=b||null),-1!==c.indexOf("linkedin")&&(b=f.result(f.findWhere(d,{source:"linkedin",key:"link"}),"value"),e.linkedin=b||null),-1!==c.indexOf("twitter")&&(b=f.result(f.findWhere(d,{source:"twitter",key:"link"}),"value"),e.twitter=b||null),e},_transformContactDataForContactPopup:function(){var a=this.props.contact,b=this.getPrettyEndpoints(a),c=b.smtps,d=a.payload,e=f.filter(d.endpoints,function(a){return 0===a.ep.indexOf("smtp")}),g=f.filter(d.endpoints,function(a){return 0===a.ep.indexOf("tel")}),h=f.filter(d.endpoints,function(a){return 0===a.ep.indexOf("ymessenger")});return{id:d.id,email:j.getValue(c,[0,"display"],""),edit_token:d.edit_token,image_url:a.thumbnail.slice(0,a.thumbnail.indexOf("/v")),updated:d.updated,card_size:1,endpoints:{smtp:e.length?e:void 0,tel:g.length?g:void 0,ymessenger:h.length?h:void 0},location:f.result(f.findWhere(d.attributes,{key:"location"}),"value"),name:j.getValue(d,["name","name"],""),company:j.getValue(d,["role","company"],""),position:j.getValue(d,["role","position"],"")}},onAddContact:function(){this.executeAction(m.addContact,this._transformContactDataForContactPopup())},onCopyEmailAddress:function(a){m.copyEmailAddress(a)},onCopyPhoneNumber:function(a){m.copyPhoneNumber(a)},onCopyAllDetails:function(a){m.copyAllDetails(a)},onEditContact:function(){this.executeAction(m.editContact,this._transformContactDataForContactPopup())},openProfileLink:function(a){a&&window.open(a)},onAction:function(){var a=this.getStore(u).getActionInfo(),b=this.props;switch(a.action){case v.SEARCH_SUCCESS:b.contact&&!b.contact.payload&&this.setState({hideCard:!0})}},composeMessage:function(a,b){this.executeAction(n.composeNewMessage,{email:b,contact:a})},componentDidMount:function(){this.getStore(u).on("changed",this.onAction)},componentWillUnmount:function(){this.getStore(u).removeListener("changed",this.onAction)}}),b.exports=d},{"../../../../artifacts/lang":2,"../../actions/ContactActions":3,"../../actions/MessageActions":4,"../../common/Utils":6,"./EmailHistoryRightRail.jsx":38,ActionStore:"ActionStore",BidiString:"BidiString",Context:"Context",CopyFunctionWrapper:"CopyFunctionWrapper",GlobalConstants:"GlobalConstants",MenuButton:"MenuButton",MenuItem:"MenuItem",ObjectUtils:"ObjectUtils",SearchActions:"SearchActions",SearchConstants:"SearchConstants",StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],37:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("List"),h=a("ListItem"),i=a("Context"),j=a("SlideShow"),k=a("../../../../artifacts/lang"),l=a("RelativeDateFormatter"),m=a("../../utils/DocumentUtils"),n=a("StatService"),o=a("BidiSafeFilepath");d=e.createClass({displayName:"DocumentRightRail",propTypes:{searchId:e.PropTypes.string.isRequired,filter:e.PropTypes.string,contentType:e.PropTypes.string,handleSeeAllClick:e.PropTypes.func},mixins:[i],getInitialState:function(){return{activeIndex:-1,canShowSlideView:!1}},getDefaultProps:function(){return{handleSeeAllClick:f.noop}},closeSlideShow:function(){this.setState({canShowSlideView:!1})},setActiveIndex:function(a){this.setState({activeIndex:a})},render:function(){var a,b,c=this.props.items||[],d=this.props.searchGDocsEnabled;return c.length<1||"documents"===this.props.contentType?null:e.createElement("div",{className:"documents-right-rail-wrapper"},e.createElement(j,{items:this.props.items,activeIndex:this.state.activeIndex,visible:this.state.canShowSlideView,setActiveIndex:this.setActiveIndex,closeSlideShow:this.closeSlideShow}),e.createElement("div",{className:"right-rail-sec-hd"},e.createElement("strong",{className:"right-rail-title"},k.str_documents)),e.createElement(g,{className:"document-right-rail-items"},c.slice(0,5).map(function(c,f){return d&&(a=c.online||"",b=c.onlineContentLink||""),e.createElement(h,{key:f,id:f,onClick:a?this.openGoogleDoc.bind(null,{isGDoc:a,gDocLink:b}):this._openSlideshow,className:"document-right-rail-item"},e.createElement("div",{className:"document-icon","data-type":c.mimeType}),e.createElement(o,{filepath:m.getItemName(c),className:"document-name"}),e.createElement(l,{className:"document-date",timestamp:c.creationDate}))},this)),e.createElement("button",{className:"right-rail-see-all","data-action":"documents","aria-label":k.str_see_more,onClick:this.props.handleSeeAllClick.bind(null,{contentType:"documents",filter:this.props.filter})},k.str_see_more))},_openSlideshow:function(a,b){this.setActiveIndex(b),this.setState({canShowSlideView:!0}),n.logRapid("mt:click",{action:"srp_doc_right_rail",append:{mSrchId:this.props.searchId,mClkIdx:b}})},openGoogleDoc:function(a,b){b.stopPropagation(),window.open(a.gDocLink),n.stat({name:"srp_gdocs_right_rail"})}}),b.exports=d},{"../../../../artifacts/lang":2,"../../utils/DocumentUtils":53,BidiSafeFilepath:"BidiSafeFilepath",Context:"Context",List:"List",ListItem:"ListItem",RelativeDateFormatter:"RelativeDateFormatter",SlideShow:"SlideShow",StatService:"StatService",lodash:"lodash","react/addons":"react/addons"}],38:[function(a,b,c){"use strict";var d,e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},f=a("react/addons"),g=a("lodash"),h=a("Context"),i=a("../../../../artifacts/lang"),j=a("SearchQuery"),k=a("GlobalConstants"),l=a("StringUtils"),m=a("ObjectUtils"),n=a("../../actions/MessageActions"),o=a("RelativeDateFormatter"),p=f.addons.CSSTransitionGroup,q=6048e5;d=f.createClass({displayName:"EmailHistoryRightRail",mixins:[h],getDefaultProps:function(){return{closeEmailHistory:g.noop}},getInitialState:function(){return{chartDateFilter:null}},getChartDateFilter:function(){return this.state.chartDateFilter||(this.isLessThanOneMonth()?1:6)},render:function(){var a,b,c=this,d=this.props.history;return d?(a=d.histograms,b=d.prose,f.createElement("div",{className:"email-history-right-rail-wrapper"},f.createElement("div",{className:"email-history-right-rail-inner-wrapper"},c.renderDateFilter(),c.renderCloseButton(),a?c.renderChart(a):null,b?c.renderInfo(d,b):null))):null},renderDateFilter:function(){var a=this.getChartDateFilter();return f.createElement("div",{className:"email-history-right-rail-date-filter email-history-right-rail-head"},f.createElement("span",{className:1===a?"selected":"",ref:"filter1",onClick:this.selectDateFilter.bind(this,1)},i.str_email_history_one_month),f.createElement("span",{className:6===a?"selected":"",ref:"filter6",onClick:this.selectDateFilter.bind(this,6)},i.str_email_history_six_months),f.createElement("span",{className:12===a?"selected":"",ref:"filter12",onClick:this.selectDateFilter.bind(this,12)},i.str_email_history_one_year))},getTotalWeeksInChart:function(a){return Math.ceil(30*a/7)},selectDateFilter:function(a){this.setState({chartDateFilter:a})},renderCloseButton:function(){return f.createElement("div",{className:"icon icon-close email-history-right-rail-close email-history-right-rail-head",onClick:this.props.closeEmailHistory})},isLessThanOneMonth:function(){var a,b=m.getValue(this.props.history,"histograms.weeks.totals");if(!b)return!1;for(a=5;a<b.length;a++)if(0!==b[a])return!1;return!0},getSelectedWeek:function(a){var b,c,d=m.getValue(this.props,"query.keyword",""),e=d.match(/before:.*(\d\d\d\d\/\d+\/\d+).*/i),f=864e5;return!e||e.length<2?c=-1:(e=new Date(e[1]),e.setDate(e.getDate()-1),b=new Date,c=Math.floor(Math.abs(b.getTime()-e.getTime())/f/7)),a-c-1},renderChart:function(a){var b,c,d=this,e=d.getTotalWeeksInChart(d.getChartDateFilter()),h=m.getValue(a,"weeks.totals"),j=[];return!h||h.length<=0?null:(h=h.slice(0,e),c=Math.max.apply(null,h),b=d.getSelectedWeek(e),j=c>0?h.reverse().map(function(a,h){var j={width:(100/e).toFixed(2)+"%",height:(100*a/c).toFixed(2)+"%"},k=g.template(i.str_email_history_num_emails,null)({number:a}),l=f.addons.classSet({selected:b===h,"right-rail-histogram-bar":!0});return f.createElement("div",{className:l,title:k,style:j,onClick:d.handleContactDateClick.bind(d,e-h-1)})}):[],f.createElement("div",{className:"right-rail-chart-hd"},f.createElement("div",{className:"right-rail-bar-hd"},f.createElement(p,{component:"div",className:"histogram-chart-animation-container",transitionName:"histogram-chart",transitionAppear:!0},f.createElement("div",{className:"histogram-chart-container",key:"histogram-chart-container"},j))),f.createElement("div",{className:"right-rail-history-hd"},f.createElement("span",{className:"right-rail-title-left"},f.createElement(o,{timestamp:Date.now()-q*e,template:strings.str_cfg_dateformat_full_short})),f.createElement("span",{className:"right-rail-title-center"},f.createElement(o,{timestamp:Date.now()-q*e/2,template:strings.str_cfg_dateformat_full_short})),f.createElement("span",{className:"right-rail-title-right"},i.str_mail_today))))},renderInfo:function(a,b){var c,d=[],g=m.getValue(this.props,"query.suggestion.emailAddresses",""),h=a.firstMessageId;for(c=0;c<b.length;c++)"string"==typeof b[c]?d.push(f.createElement("span",null,b[c])):"object"===e(b[c])&&("contact"===b[c].type&&"you"!==b[c].name&&b[c].smtp!==g[0]?d.push(f.createElement("span",{className:"right-rail-history-contact-info","data-action":"renderContact",onClick:this.handleContactClick.bind(this,b[c])},b[c].name)):"subject"===b[c].type?d.push(f.createElement("span",{className:"right-rail-history-contact-info","data-action":"openMessage",onClick:this.openMessage.bind(this,h)},b[c].name)):d.push(f.createElement("span",null,b[c].name||"")));return f.createElement("div",{className:"right-rail-history-info"},d)},handleContactClick:function(a){this.props.executeSearch(new j({suggestion:{displayStr:a.name,intent:"PEOPLE",serviceId:a.id,emailAddresses:[a.smtp],imageUrl:l.addUrlParameters(a.thumbnail,{spsize:"50X50",badge:!0,fallback_url:k.FALLBACK_XOBNI_IMG_URL})},typeTag:"srp_emailhistory_contact_click"}))},formatDate:function(a){var b=a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate();return b},openMessage:function(a){this.executeAction(n.openMessage,{items:[{fid:"Inbox",mid:a}],isPrevNextNavigationDisabled:!0,index:0,typeTag:"srp_emailhistory_open_message"})},handleContactDateClick:function(a){var b,c=this,d=c.props,e=d.query,f=d.lmv3Enabled?'"':"",h=new Date,i=new Date;h.setDate(h.getDate()-7*(a+1)),i.setDate(i.getDate()-7*a+1),h=c.formatDate(h),i=c.formatDate(i),b="after:"+f+h+f+" before:"+f+i+f,(e.keyword||"").indexOf(b)>-1&&(b=""),e.keyword=b,c.props.executeSearch(g.merge(e,e,{typeTag:"srp_emailhistory_bar_click"}))}}),b.exports=d},{"../../../../artifacts/lang":2,"../../actions/MessageActions":4,Context:"Context",GlobalConstants:"GlobalConstants",ObjectUtils:"ObjectUtils",RelativeDateFormatter:"RelativeDateFormatter",SearchQuery:"SearchQuery",StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],39:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("Context"),g=a("StatService"),h=a("BidiString"),i=a("../../../../artifacts/lang"),j=a("StringUtils"),k=a("../../actions/MessageActions"),l=a("RelativeDateFormatter");d=e.createClass({displayName:"ExtractionCard",mixins:[f,e.addons.PureRenderMixin],render:function(){var a,b,c,d,f,g,k,m=this.props.extractionCardGroup||[];return m.length?(b=m[0],d=b.cardData,c=d.itemImgUrl||d.vendorImgUrl||this.props.defaultImage,f=d.itemName||b.name,g=d.orderNumber,k=e.addons.classSet({xfields:!0,"extraction-with-item-image":c}),a=d.shipDate?d.shipDate>Date.now()?i.str_srp_extraction_ships_dates:i.str_srp_extraction_shipped_date:i.str_srp_extraction_ordered_date,e.createElement("div",{className:"extraction-card"},e.createElement("div",{className:k},c?e.createElement("div",{className:"extraction-card-item-img",style:{backgroundImage:"url("+c+")"}}):null,e.createElement("div",{className:"extraction-card-item-info"
},e.createElement(h,{str:d.vendorName,tagName:"div",className:"extraction-card-item-vendor ell",title:d.vendorName}),e.createElement("div",{className:"extraction-card-item-order ell"},g&&/^(http|https):/.test(g)?e.createElement("a",{target:"_blank",onClick:this.orderNumberTracking,href:d.orderNumber},i.str_srp_extraction_view_order):j.stringReplace(i.str_srp_extraction_order_number,{order_number:g})))),e.createElement("div",{className:"extraction-card-item-details"},e.createElement(h,{str:f,tagName:"div",className:"extraction-card-item-name ell",title:f}),d.shipDate>Date.now()?e.createElement(h,{str:i.str_srp_extraction_view_status_shipped,tagName:"span",className:"extraction-card-item-status",title:i.str_srp_extraction_view_status_shipped}):null,e.createElement(l,{timestamp:d.shipDate||d.orderDate,template:a})),e.createElement("div",{className:"xfooter"},e.createElement("a",{className:"extraction-card-actions",href:"#",title:"View email",onClick:this.openMessage.bind(this,d.parentMsgId||b.messageId),dir:"ltr"},e.createElement("i",{className:"icon icon-mail-inbox"}),i.str_srp_extraction_view_email),d.trackingUrl?e.createElement("a",{className:"extraction-card-actions",target:"_blank",onClick:this.packageTracking,href:d.trackingUrl},e.createElement("i",{className:"icon icon-package"}),i.str_srp_extraction_track_package):null))):null},openMessage:function(a){this.executeAction(k.openMessage,{items:[{fid:"Inbox",mid:a}],isPrevNextNavigationDisabled:!0,index:0,typeTag:"srp_extraction_open_message"})},packageTracking:function(){g.stat({name:"srp_extractions_package_tracking"})},orderNumberTracking:function(){g.stat({name:"srp_extractions_order_number_tracking"})}}),b.exports=d},{"../../../../artifacts/lang":2,"../../actions/MessageActions":4,BidiString:"BidiString",Context:"Context",RelativeDateFormatter:"RelativeDateFormatter",StatService:"StatService",StringUtils:"StringUtils","react/addons":"react/addons"}],40:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("Context"),h=a("StatService"),i=a("ObjectUtils"),j=a("./ExtractionCard.jsx"),k=a("./PastExtractionCard.jsx"),l=a("../../common/Utils"),m=a("StringUtils"),n=7,o=Date.now()-24*n*60*60*1e3,p=5;d=e.createClass({displayName:"ExtractionCards",mixins:[g,e.addons.PureRenderMixin],normalizeExtractionCards:function(a){return f.groupBy(a,function(a){return a.id})},filterValidExtraction:function(a){return f.filter(a,function(a){var b=a.cardData;return a.messageId&&b.itemName&&(b.shipDate||b.orderDate)})},isCurrentCard:function(a){return i.getValue(a,[0,"cardData","shipDate"])>o||i.getValue(a,[0,"cardData","orderDate"])>o},extractDefaultImage:function(a){return a&&a.thumbnail?m.addUrlParameters(a.thumbnail,{spsize:l.isRetina()?"72X72":"36X36",badge:!0}):null},render:function(){var a=this.filterValidExtraction(this.props.extractions),b=this.normalizeExtractionCards(a),c=this.extractDefaultImage(this.props.contact),d=[],g=[],l=[],m=this;return f.size(b)?(h.stat({name:"srp_extractions_render",tags:{extractionsNum:b.length}}),f.values(b).sort(function(a,b){var c=i.getValue(a,[0,"cardData","shipDate"])||i.getValue(a,[0,"cardData","orderDate"]),d=i.getValue(b,[0,"cardData","shipDate"])||i.getValue(b,[0,"cardData","orderDate"]);return d>c?1:c>d?-1:0}).map(function(a){return m.isCurrentCard(a)?d.push(a):g.push(a)}),d=d.splice(0,p),g=g.splice(0,p),f.map(d,function(a,b){l.push(e.createElement("li",null,e.createElement(j,{key:b,extractionCardGroup:a,defaultImage:c})))}),e.createElement("ol",null,l,e.createElement(k,{extractionCardGroups:g,defaultImage:c}))):null}}),b.exports=d},{"../../common/Utils":6,"./ExtractionCard.jsx":39,"./PastExtractionCard.jsx":43,Context:"Context",ObjectUtils:"ObjectUtils",StatService:"StatService",StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],41:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("List"),g=a("ListItem"),h=a("Context"),i=a("../../../../artifacts/lang"),j=a("StringUtils"),k=a("StatService"),l=a("BidiString");d=e.createClass({displayName:"LinkRightRail",propTypes:{searchId:e.PropTypes.string.isRequired,filter:e.PropTypes.string,contentType:e.PropTypes.string,handleSeeAllClick:e.PropTypes.func},mixins:[h],render:function(){var a,b,c=document.createElement("a"),d=this.props.items||[],h="";return d.length<1||"links"===this.props.contentType?null:e.createElement("div",{className:"links-right-rail-wrapper"},e.createElement("div",{className:"right-rail-sec-hd"},e.createElement("strong",{className:"right-rail-title"},i.str_links)),e.createElement(f,{className:"link-right-rail-items"},d.slice(0,3).map(function(d,f){return a=d.title||d.subject,b=d.thumbnail?d.thumbnail:"",d.onlineContentLink&&(c.href=d.onlineContentLink,h=c.hostname),e.createElement(g,{key:f,id:f,onClick:this.openLink.bind(null,d.onlineContentLink,f),title:a},e.createElement("div",{className:"link-right-rail-item",style:{backgroundImage:"url("+b+")"}},e.createElement(l,{str:a,className:"link-right-rail-item-title"}),e.createElement("span",{className:"link-right-rail-item-link"},j.stringReplace(i.str_links_view_on,{url:e.createElement("b",null,h)}))))},this)),e.createElement("button",{className:"right-rail-see-all","data-action":"links","aria-label":i.str_see_more,onClick:this.props.handleSeeAllClick.bind(null,{contentType:"links",filter:this.props.filter})},i.str_see_more))},openLink:function(a,b){a&&window.open(a,"_blank"),k.logRapid("mt:click",{action:"srp_link_right_rail",append:{mSrchId:this.props.searchId,mClkIdx:b}})}}),b.exports=d},{"../../../../artifacts/lang":2,BidiString:"BidiString",Context:"Context",List:"List",ListItem:"ListItem",StatService:"StatService",StringUtils:"StringUtils","react/addons":"react/addons"}],42:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("Context"),h=a("List"),i=a("ListItem"),j=a("../../../../artifacts/lang"),k=a("RelativeDateFormatter"),l=a("StatService"),m=a("../../actions/MessageActions"),n=a("BidiString");d=e.createClass({displayName:"MessageListRightRail",propTypes:{searchId:e.PropTypes.string.isRequired,filter:e.PropTypes.string,contentType:e.PropTypes.string,handleSeeAllClick:e.PropTypes.func},mixins:[g],getDefaultProps:function(){return{handleSeeAllClick:f.noop}},render:function(){var a=this.props.items||[];return a.length<1||"messages"===this.props.contentType?null:e.createElement("div",{className:"messages-right-rail-wrapper"},e.createElement("div",{className:"right-rail-sec-hd"},e.createElement("strong",{className:"right-rail-title"},j.str_messages)),e.createElement(h,{className:"message-right-rail-items"},a.slice(0,5).map(function(a){return e.createElement(i,{className:"message-right-rail-item",key:a.mid,id:a.mid,onClick:this._openMessage},e.createElement(n,{str:a.subject||j.str_msg_view_no_subject,className:"message-subj"}),e.createElement(k,{className:"message-date",timestamp:a.creationDate}))},this)),e.createElement("button",{className:"right-rail-see-all","data-action":"messages","aria-label":j.str_see_more,onClick:this.props.handleSeeAllClick.bind(null,{contentType:"messages",filter:this.props.filter})},j.str_see_more))},_openMessage:function(a,b){var c=f.findIndex(this.props.items,{id:b});this.executeAction(m.openMessage,{items:this.props.items,index:c,searchId:this.props.searchId}),l.logRapid("mt:click",{action:"srp_msg_right_rail",append:{mSrchId:this.props.searchId,mClkIdx:c,mClkMid:b}})}}),b.exports=d},{"../../../../artifacts/lang":2,"../../actions/MessageActions":4,BidiString:"BidiString",Context:"Context",List:"List",ListItem:"ListItem",RelativeDateFormatter:"RelativeDateFormatter",StatService:"StatService",lodash:"lodash","react/addons":"react/addons"}],43:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("Context"),g=a("BidiString"),h=a("../../../../artifacts/lang"),i=a("RelativeDateFormatter"),j=a("../../actions/MessageActions"),k=a("lodash");d=e.createClass({displayName:"PastExtractionCard",mixins:[f,e.addons.PureRenderMixin],render:function(){var a,b,c,d,f=this.props.extractionCardGroups||[],j=this;return f.length?e.createElement("div",{className:"extraction-card past-extraction-card"},j.renderHeader(),k.map(f,function(f){return b=f[0],c=b.cardData,d=c.itemName||b.name,a=c.shipDate?c.shipDate>Date.now()?h.str_srp_extraction_ships_dates:h.str_srp_extraction_shipped_date:h.str_srp_extraction_ordered_date,e.createElement("div",{className:"extraction-card-item-details",onClick:j.openMessage.bind(j,c.parentMsgId||b.messageId)},e.createElement(g,{str:d,tagName:"div",className:"extraction-card-item-name ell",title:d}),e.createElement(i,{timestamp:c.shipDate||c.orderDate,template:a}))})):null},renderHeader:function(){var a,b=this.props.extractionCardGroups[0],c=b[0],d=c.cardData,f=d.vendorImgUrl||this.props.defaultImage;return a=e.addons.classSet({xfields:!0,"extraction-with-item-image":f}),e.createElement("div",{className:a},f?e.createElement("div",{className:"extraction-card-item-img",style:{backgroundImage:"url("+f+")"}}):null,e.createElement("div",{className:"extraction-card-item-info"},e.createElement(g,{str:d.vendorName,tagName:"div",className:"extraction-card-item-vendor ell",title:d.vendorName}),e.createElement("div",{className:"extraction-card-item-subtitle"},"Past Orders")))},openMessage:function(a){this.executeAction(j.openMessage,{items:[{fid:"Inbox",mid:a}],isPrevNextNavigationDisabled:!0,index:0,typeTag:"srp_extraction_open_message"})}}),b.exports=d},{"../../../../artifacts/lang":2,"../../actions/MessageActions":4,BidiString:"BidiString",Context:"Context",RelativeDateFormatter:"RelativeDateFormatter",lodash:"lodash","react/addons":"react/addons"}],44:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("List"),h=a("ListItem"),i=a("Context"),j=a("SlideShow"),k=a("../../../../artifacts/lang"),l=a("StatService"),m=a("../ImageWithFallback.jsx"),n=a("../../utils/Attachment").convertThumbnailURL,o=a("StringUtils");d=e.createClass({displayName:"PhotoRightRail",propTypes:{searchId:e.PropTypes.string.isRequired,filter:e.PropTypes.string,contentType:e.PropTypes.string,handleSeeAllClick:e.PropTypes.func},mixins:[i],getInitialState:function(){return{activeIndex:-1,canShowSlideView:!1}},getDefaultProps:function(){return{handleSeeAllClick:f.noop}},closeSlideShow:function(){this.setState({canShowSlideView:!1})},setActiveIndex:function(a){this.setState({activeIndex:a})},render:function(){var a=this.props.items||[];return a.length<1||"photos"===this.props.contentType?null:e.createElement("div",{className:"photos-right-rail-wrapper"},e.createElement(j,{items:this.props.items,activeIndex:this.state.activeIndex,visible:this.state.canShowSlideView,setActiveIndex:this.setActiveIndex,closeSlideShow:this.closeSlideShow}),e.createElement("div",{className:"right-rail-sec-hd"},e.createElement("strong",{className:"right-rail-title"},k.str_photos)),e.createElement(g,{className:"photo-right-rail-items"},a.slice(0,5).map(function(a,b){var c=o.getFileName(a.name)+"‪"+o.getFileExtension(a.name)+"‬";return e.createElement(h,{key:b,id:b,onClick:this._openSlideshow,className:"photo-right-rail-item",title:c},e.createElement(m,{url:n(a.thumbnail,150)}))},this)),e.createElement("button",{className:"right-rail-see-all","data-action":"photos","aria-label":k.str_see_more,onClick:this.props.handleSeeAllClick.bind(null,{contentType:"photos",filter:this.props.filter})},k.str_see_more))},_openSlideshow:function(a,b){this.setActiveIndex(b),this.setState({canShowSlideView:!0}),l.logRapid("mt:click",{action:"srp_photo_right_rail",append:{mSrchId:this.props.searchId,mClkIdx:b}})}}),b.exports=d},{"../../../../artifacts/lang":2,"../../utils/Attachment":52,"../ImageWithFallback.jsx":10,Context:"Context",List:"List",ListItem:"ListItem",SlideShow:"SlideShow",StatService:"StatService",StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],45:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("Context"),h=a("../../../../artifacts/lang"),i=a("GlobalConstants"),j=a("SearchQuery"),k=a("../../common/Utils"),l=a("StringUtils"),m=a("BidiString"),n=a("List"),o=a("StatService"),p=a("ListItem");d=e.createClass({displayName:"RelatedContactsRightRail",propTypes:{searchId:e.PropTypes.string.isRequired},mixins:[g],getInitialState:function(){return{relatedContactsCount:3}},render:function(){var a=(this.props.relatedContacts||[]).map(function(a){return a.emailAddresses=f.chain(a.payload.endpoints).filter(function(a){return a.ep&&0===a.ep.indexOf("smtp:")}).map(function(a){return a.ep.replace("smtp:","")}).value(),a});return a.length?e.createElement("div",{className:"related-right-rail-wrapper"},e.createElement("div",{className:"right-rail-sec-hd"},e.createElement("strong",{className:"right-rail-title"},h.str_related_contacts)),e.createElement(n,{className:"related-right-rail-items"},a.slice(0,this.state.relatedContactsCount).map(function(a,b){return e.createElement(p,{key:b,id:b,title:a.name,onClick:this.handleContactClick.bind(this,a,b)},this.renderContactSuggestion(a))},this)),e.createElement("button",{className:"right-rail-see-all","data-action":"related",disabled:!this.isShowMoreAvailable(a),"aria-label":h.str_see_more_more,onClick:this.handleSeeAllClick},h.str_see_more_more)):null},isShowMoreAvailable:function(a){return a.length>this.state.relatedContactsCount},handleSeeAllClick:function(){var a=this.state.relatedContactsCount;a=10>a?10:a+10,this.setState({relatedContactsCount:a})},renderContactSuggestion:function(a){var b=a.thumbnail?l.addUrlParameters(a.thumbnail,{spsize:k.isRetina?"80X80":"40X40",badge:!0,fallback_url:i.FALLBACK_XOBNI_IMG_URL}):i.FALLBACK_XOBNI_IMG_URL;return e.createElement("div",{className:"related-right-rail-item",style:{backgroundImage:"url("+b+")"}},e.createElement(m,{str:a.name,tagName:"strong",className:"related-right-rail-item-name"}),e.createElement(m,{str:this.getContactSecondLine(a.emailAddresses),className:"related-right-rail-item-detail"}))},getContactSecondLine:function(a){var b;switch(a.length){case 1:b=h.str_contact_email_singular;break;case 2:b=h.str_contact_other_email_singular;break;default:b=h.str_contact_other_email_plural}return f.template(b,null)({emailAddress:l.getBidiString(a[0]),number:a.length-1})||""},handleContactClick:function(a,b){this.props.executeSearch(new j({suggestion:{displayStr:a.name,intent:"PEOPLE",serviceId:a.payload.id,emailAddresses:a.emailAddresses,imageUrl:l.addUrlParameters(a.thumbnail,{spsize:"50X50",badge:!0,fallback_url:i.FALLBACK_XOBNI_IMG_URL})},typeTag:"srp_oftenCC_right_rail"})),o.logRapid("mt:click",{action:"srp_oftenCC_right_rail",append:{mSrchId:this.props.searchId,mClkIdx:b}})}}),b.exports=d},{"../../../../artifacts/lang":2,"../../common/Utils":6,BidiString:"BidiString",Context:"Context",GlobalConstants:"GlobalConstants",List:"List",ListItem:"ListItem",SearchQuery:"SearchQuery",StatService:"StatService",StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],46:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("Context"),g=a("./ContactCard.jsx"),h=a("./ExtractionCards.jsx"),i=a("./PhotoRightRail.jsx"),j=a("./MessageListRightRail.jsx"),k=a("./DocumentRightRail.jsx"),l=a("./LinkRightRail.jsx"),m=a("./RelatedContactsRightRail.jsx"),n=a("./TwitterFeed.jsx"),o=a("ObjectUtils"),p=a("GlobalActions");d=e.createClass({displayName:"SearchRightRail",propTypes:{searchId:e.PropTypes.string.isRequired,contentType:e.PropTypes.string,filter:e.PropTypes.string,getMoreItems:e.PropTypes.func,handleSeeAllClick:e.PropTypes.func,hasMorePhotos:e.PropTypes.bool,hasMoreDocuments:e.PropTypes.bool},mixins:[f],getInitialState:function(){var a=this.props,b=o.getValue(a.extractions,"from.items",[]);return{showEmailHistory:a.showEmailHistory&&0===b.length}},render:function(){var a="",b=this.props,c=b.searchId,d=b.contentType,f=b.filter,p=b.lmv3Enabled,q=b.query,r=o.getValue(b,["contacts","keyword","items",0,"relationshipHistory"],null),s=o.getValue(this.props.extractions,["from","items"],[]);return b.rightRailSearchAdEnabled?e.createElement("div",{ref:"right-rail-container",className:"right-rail"},e.createElement("div",{ref:"inner",className:"right-rail-inner"},e.createElement("div",{className:"hipmunk-right-rail"}),e.createElement("div",{className:"searchds-right-rail"}))):"keyword"===b.searchType?e.createElement("div",{ref:"right-rail-container",className:"right-rail"},e.createElement("div",{ref:"inner",className:"right-rail-inner"})):(b.searchResultsLinks&&(a=e.createElement(l,{searchId:c,key:"LinkRightRail",items:o.getValue(this.props.links,[f,"items"],[]),contentType:d,filter:f,handleSeeAllClick:b.handleSeeAllClick})),e.createElement("div",{ref:"right-rail-container",className:"right-rail"},e.createElement("div",{ref:"inner",className:"right-rail-inner"},e.createElement(g,{searchId:c,contact:o.getValue(this.props.contacts,["keyword","items",0],{}),key:"ContactCard",history:r,lmv3Enabled:p,query:q,toggleEmailHistory:this.toggleEmailHistory,executeSearch:b.executeSearch,isEmailHistoryEnabled:b.isEmailHistoryEnabled,showEmailHistory:this.state.showEmailHistory}),e.createElement(h,{contact:o.getValue(this.props.contacts,["keyword","items",0],{}),extractions:s}),e.createElement(j,{key:"MessageListRightRail",searchId:c,items:o.getValue(b.messages,[f,"items"],[]),contentType:d,filter:f,handleSeeAllClick:b.handleSeeAllClick}),e.createElement(i,{key:"PhotoRightRail",searchId:c,items:o.getValue(b.photos,[f,"items"],[]),hasMore:b.hasMorePhotos,contentType:d,filter:f,getMore:b.getMoreItems,handleSeeAllClick:b.handleSeeAllClick}),e.createElement(k,{key:"DocumentRightRail",searchId:c,items:o.getValue(b.documents,[f,"items"],[]),searchGDocsEnabled:b.searchGDocsEnabled,hasMore:b.hasMoreDocuments,contentType:d,filter:f,getMore:b.getMoreItems,handleSeeAllClick:b.handleSeeAllClick}),a,e.createElement(m,{key:"RelatedContactsRightRail",executeSearch:b.executeSearch,relatedContacts:o.getValue(this.props.contacts,["related","items"],[]),searchId:c}),e.createElement(n,{key:"TwitterFeed",contacts:o.getValue(b.contacts,["keyword","items"],[]),searchId:c}))))},handleSeeAllClick:function(a,b){b.preventDefault(),this.props.handleSeeAllClick(a,b)},toggleEmailHistory:function(a){this.setState({showEmailHistory:a}),this.executeAction(p.setMetaData,{showEmailHistory:a?"true":"false",typeTag:"srp_emailhistory_close_btn"})}}),b.exports=d},{"./ContactCard.jsx":36,"./DocumentRightRail.jsx":37,"./ExtractionCards.jsx":40,"./LinkRightRail.jsx":41,"./MessageListRightRail.jsx":42,"./PhotoRightRail.jsx":44,"./RelatedContactsRightRail.jsx":45,"./TwitterFeed.jsx":47,Context:"Context",GlobalActions:"GlobalActions",ObjectUtils:"ObjectUtils","react/addons":"react/addons"}],47:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("Context");d=e.createClass({displayName:"TwitterFeed",propTypes:{searchId:e.PropTypes.string.isRequired},mixins:[g,e.addons.PureRenderMixin],render:function(){var a,b=this.props,c="https://s.yimg.com/tq/searchresults/150317164046/assets/twitterFeed.html?twitterId=";return(b.contacts||[]).length&&(a=f.result(f.findWhere(b.contacts[0].payload.endpoints,{source:"twitter"}),"display"))?e.createElement("div",{className:"contact-twitter-right-rail-wrapper"},e.createElement("iframe",{className:"contact-twitter-right-rail",target:"_blank",allowTransparency:"true",frameBorder:"0",src:c+a.replace("@","")})):null}}),b.exports=d},{Context:"Context",lodash:"lodash","react/addons":"react/addons"}],48:[function(a,b,c){"use strict";YUI.add("tictac-searchresults",function(b){function c(){window.React=window.React||a("react/addons"),a("../../artifacts/css/main.css")}b.namespace("Tictac").searchresults={loader:function(){b.Tictac.search?c():yui.on("search:loaded",c)}}},"1.0.0",{requires:["tictac-lib","tictac-search","mail-controller-messages"]})},{"../../artifacts/css/main.css":1,"react/addons":"react/addons"}],49:[function(a,b,c){"use strict";function d(a){return Array.isArray(a)?a:[a]}function e(){this._queuedTransactions={}}var f=a("lodash"),g=a("EnhancedPromise");e.prototype={_checkForSupersededRequests:function(a,b){var c=[],d=[];b.forEach(function(b){var c=[],d=[];b.superseded||b.processed||!f.isEqual(Object.keys(b.newVals),Object.keys(a.newVals))||(b.models.forEach(function(e,g){var h=f.findIndex(a.models,function(a){return a.id===e.id});-1===h?(c.push(e),d.push(b.prevVals[g])):(a.prevVals[h]=b.prevVals[g],b.supersededModels.push(e))}),b.models=c,b.prevVals=d,b.superseded=0===b.models.length)}),a.models.forEach(function(b,e){f.isEqual(a.prevVals[e],a.newVals)?a.supersededModels.push(b):(c.push(b),d.push(a.prevVals[e]))}),a.models=c,a.prevVals=d,a.superseded=0===a.models.length},_removeTransaction:function(a,b){var c=this._queuedTransactions[a],d=c.indexOf(b);c.splice(d,1),c.length||delete this._queuedTransactions[a]},_addTransaction:function(a){var b,c=this,d=[];return a.supersededModels=[],a.models.forEach(function(b){var e,f;e=b.id,f=c._queuedTransactions[e]||[],c._checkForSupersededRequests(a,f),d.push(f.length>0?f[f.length-1].promise:g.resolve()),f.push(a),c._queuedTransactions[e]=f}),b=d.length>1?g.all(d):d[0],a.promise=b.then(function(){var b=a.expectsArray?a.models:a.models[0],d=a.expectsArray?a.prevVals:a.prevVals[0];return a.superseded?void 0:(a.processed=!0,c._runTransaction(a.type,b,a.newVals,d))}).then(function(b){return a.models.concat(a.supersededModels).forEach(function(b){c._removeTransaction(b.id,a)}),b},function(b){throw a.models.concat(a.supersededModels).forEach(function(b){c._removeTransaction(b.id,a)}),b}),a.promise},_runTransaction:function(){throw new Error("subclass must define _runTransaction returning a Promise")},queueTransaction:function(a,b,c){var e,g=d(b);return e=g.map(function(a){var b={};return f.each(c,function(c,d){b[d]=a[d]}),b}),this._addTransaction({type:a,models:g,newVals:c,prevVals:e,expectsArray:Array.isArray(b)})}},b.exports=e},{EnhancedPromise:"EnhancedPromise",lodash:"lodash"}],50:[function(a,b,c){"use strict";function d(a){return Array.isArray(a)?a:[a]}function e(a){if(this.folderMeta=a.folderMeta,!this.folderMeta)throw new Error("V3 api needs folder meta to get fid");i.call(this)}function f(a){h||(h=m.context.getStore(n)),a.forEach(function(a){a.fid||(a.fid=p.getValue(h.findByIndex(a.folderNumber),["folderInfo","fid"]))})}function g(a){return"string"==typeof a?a.replace(/\+/g,"-").replace(/\//g,"_"):a}var e,h,i=a("./BaseService"),j=a("IO"),k=a("lodash"),l=a("MessageConstants"),m=a("AppDispatcher"),n=a("FolderStore"),o=a("EnhancedPromise"),p=a("ObjectUtils"),q="/ws/v3/mailboxes/@.id=={mailboxid}/messages/{query}",r=NeoConfig.imapIn;e.prototype=k.create(i.prototype,{constructor:e,_getUpdateMessagePayload:function(a,b){var c={message:{}},d=this;switch(a){case"Flag":c.message.flags=b;break;case"Move":c.message.folder={id:d.folderMeta.getByFid(b.fid).id};break;case"Spam":c.message.folder={id:d.folderMeta.getByFid(l.SPAM_FID).id},c.message.flags={read:!0,spam:!0}}return c},_buildBatchPayloadForMidArray:function(a,b){var c,d={requests:[]},e=0,f="UpdateMessage",g=0,h=b.templateURL||"",i=b.payload||{},j=[],k="",l=0,m=b&&b.maxMidInOneRequest||25;if(!Array.isArray(a))throw new Error("midArray is required");if(h.indexOf("{query}")<0)throw new Error("templateURL must contain {query}");if(1===a.length)return h=h.replace("{query}","@.id=="+a[0]),d.requests.push({uri:h,method:"POST",payload:i,id:f}),d;for(c=d;e<a.length;){for(j=[],l=Math.min(e+m,a.length),g=e;l>g;g++)j.push(a[g]);k=h.replace("{query}","@.select==q?q="+window.escape(j.map(function(a){return"id:"+a}).join(" "))),c.requests||(c.requests=[]),c.requests.push({uri:k,method:"POST",payload:i,id:f+"_"+e}),c=c.requests[0],e=g}return d},_runTransaction:function(a,b,c){var d,e,f=k.map(k.pluck(b,"mid"),function(a){return g(a)}),h=q.replace("{mailboxid}",NeoConfig.V3MailboxId);return e=this._getUpdateMessagePayload(a,c),d=this._buildBatchPayloadForMidArray(f,{templateURL:h,payload:e,maxMidInOneRequest:25}),j.sendBatch(d.requests).then(function(b){var c=p.getValue(b.response,["Status","body","failedRequests"]),d=c&&c.length>0;if(d)throw{failedMids:f,type:a}})},markFlagged:function(a){return f(a.messages),this.queueTransaction("Flag",d(a.messages),{flagged:!0})},markUnflagged:function(a){return f(a.messages),this.queueTransaction("Flag",d(a.messages),{flagged:!1})},markRead:function(a){return f(a.messages),this.queueTransaction("Flag",d(a.messages),{read:!0})},markUnread:function(a){return f(a.messages),this.queueTransaction("Flag",d(a.messages),{read:!1})},move:function(a){var b;switch(f(a.messages),a._actionSource){case"undo_delete":b=r?p.getValue(h.getFoldersByTypeAndAccount("TRASH",h.findByIndex(a.fid).acctId),[0,"folderInfo","fid"],l.TRASH_FID):l.TRASH_FID,a.messages=k.map(a.messages,function(a){return k.defaults({fid:b},a)})}return this.queueTransaction("Move",d(a.messages),{fid:a.fid})},archive:function(a){var b,c,e=this,g=null,i=null;return h||(h=m.context.getStore(n)),c=h,f(a.messages),i=k.memoize(k.bind(c.getFoldersByTypeAndAccount,c),function(){var a=Array.prototype.slice.call(arguments);return a.join("-")}),g=k.memoize(k.bind(c.findByIndex,c)),b=k.groupBy(d(a.messages),function(a){var b=g(a.folderNumber).acctId,c=i("ARCHIVE",b);return p.getValue(c,[0,"folderInfo","fid"],a.fid)}),o.all(k.map(b,function(a,b){return e.move({messages:a,fid:b})}))},del:function(a){var b,c=this;return f(a.messages),b=k.groupBy(d(a.messages),function(a){return r?p.getValue(h.getFoldersByTypeAndAccount("TRASH",h.findByIndex(a.folderNumber).acctId),[0,"folderInfo","fid"],l.TRASH_FID):l.TRASH_FID}),o.all(k.map(b,function(a,b){return c.move({messages:a,fid:b||l.TRASH_FID})}))},getTotal:function(a){return j.get(a.qurl)},getMids:function(a){var b=a.qurl;return b=b.replace(/limit=[0-9]*/,"limit="+a.size),b+="&limit="+a.size,b+="&offset="+a.from,j.get(b)},cancelBulkAction:function(a){return a&&a.promise&&a.promise.cancel?a.promise.cancel():void 0},reportSpam:function(a){var b,c=this,e={read:!0};switch(f(a.messages),b=k.groupBy(d(a.messages),function(a){return r?p.getValue(h.getFoldersByTypeAndAccount("BULK",h.findByIndex(a.folderNumber).acctId),[0,"folderInfo","fid"],l.SPAM_FID):l.SPAM_FID}),a.type){case l.SPAM_TYPE_NORMAL:e.spam=!0;break;case l.SPAM_TYPE_PHISH:e.phished=!0;break;case l.SPAM_TYPE_HACKED:e.sendercompromised=!0;break;case l.SPAM_TYPE_NOTMINE:e.notmymail=!0,e.spam=!0}return o.all(k.map(b,function(a,b){return c.queueTransaction("Spam",a,k.defaults({fid:b},e))}))},open:function(a){yui.fire("openMessage",{msg:a,fid:a.fid})}}),b.exports=e},{"./BaseService":49,AppDispatcher:"AppDispatcher",EnhancedPromise:"EnhancedPromise",FolderStore:"FolderStore",IO:"IO",MessageConstants:"MessageConstants",ObjectUtils:"ObjectUtils",lodash:"lodash"}],51:[function(a,b,c){"use strict";function d(a,b){var c=k.getValue(b,["refinements"],[]),d=h.pluck(k.getValue(b,["smartviews"],[]),"keyword"),e=h.chain(h.pluck(b.folders,"folderIds")).compact().flatten().uniq().value(),f=!0;return h.forEach([].concat(c,d),function(b){switch(b){case"is:unread":a.isRead===!0&&(f=!1);break;case"is:read":a.isRead===!1&&(f=!1);break;case"is:starred":case"is:flagged":a.isFlagged===!1&&(f=!1)}}),e.length>0&&a.folderNumber&&(f=-1!==e.indexOf(a.folderNumber.toString())),f}function e(a,b,c){var e=[];return h.forIn(b,function(b){var f=h.merge(h.clone(b),c);"undefined"!=typeof c.isVisible||d(f,a)||(f.isVisible=!1),e.push(f)}),e}function f(a,b,c,d){var f={},g=["from","to","all","keyword"];return h.forEach(g,function(g){var i,j=[],k=[];b[g]&&(c?(k=e(a,c,d),j=h.map(b[g].items,function(a){var b=h.find(k,h.matchesProperty("imid",a.imid));return b?b:a})):j=e(a,b[g].items,d),f[g]=b[g],f[g].items=j,i=h.filter(j,{isVisible:!1})||[],f[g].totalHits=b[g].totalHits-i.length)}),f}function g(a,b){var c,d,e,f,g,i;for(d in b){if(!a||!a[d])return!0;f=b[d],c=a[d];for(e in f){if(!c[e])return!0;if(i=k.getValue(f,[e,"items"],[]),g=k.getValue(c,[e,"items"],[]),i.length>g.length||0===i.length||!h.isEqual(h.map(i,"id"),h.map(g.slice(0,i.length),"id")))return!0}}return!1}var h=a("lodash"),i=a("SearchConstants"),j=a("MessageConstants"),k=a("ObjectUtils"),l={};l[i.CHANGE_SEARCH_VIEW]=function(a,b,c){return{contentType:c.contentType}},l[i.CHANGE_SEARCH_FILTER]=function(a,b,c){return{filter:c.filter}},l[i.FETCH_MORE_SUCCESS]=function(a,b,c){var d=k.getValue(b,["data",c.contentType,c.filter],{}),e=c.data&&c.data.items||[],f=c.data&&c.data.offset,g={};return g[c.contentType]={},g[c.contentType][c.filter]=d,g[c.contentType][c.filter].items=(d.items||[]).concat(e),g[c.contentType][c.filter].offset=f,{data:h.merge(b.data,g)}},l[i.FILL_SCREEN_SUCCESS]=l[i.FETCH_MORE_SUCCESS],l[i.SEARCH_UPDATE]=function(a,b,c){var d=k.getValue(c,["metaData"],{}),e=a.searchCacheNoFlash&&b.hasMain&&a.isForceUser&&!g(b.data,c.data);return e?b:d.hasMain?{data:c.data,hasMain:d.hasMain,contentType:k.getValue(d,["main","contentType"]),filter:k.getValue(d,["main","filter"]),main:k.getValue(d,"main",b.main||{})}:void 0},l[i.CHANGE_VIEW_FETCH_SUCCESS]=l[i.FETCH_MORE_SUCCESS],l[i.CHANGE_FILTER_FETCH_SUCCESS]=l[i.FETCH_MORE_SUCCESS],l[j.MARK_READ]=function(a,b,c){var d=k.getValue(b,["data","messages"],{});return f(a.query,d,c.messages,{isRead:!0})},l[j.MARK_UNREAD]=function(a,b,c){var d=k.getValue(b,["data","messages"],{});return f(a.query,d,c.messages,{isRead:!1})},l[j.MARK_READ_FAILURE]=l[j.MARK_UNREAD],l[j.MARK_UNREAD_FAILURE]=l[j.MARK_READ],l[j.STAR]=function(a,b,c){var d=k.getValue(b,["data","messages"],{});return f(a.query,d,c.messages,{isFlagged:!0})},l[j.UNSTAR]=function(a,b,c){var d=k.getValue(b,["data","messages"],{});return f(a.query,d,c.messages,{isFlagged:!1})},l[j.DELETE]=function(a,b,c){var d=k.getValue(b,["data","messages"],{});return f(a.query,d,c.messages,{isVisible:!1})},l[j.DELETE_FAILURE]=function(a,b,c){var d=k.getValue(b,["data","messages"],{});return f(a.query,d,c.messages,{isVisible:!0})},l[j.REPORT_SPAM]=l[j.DELETE],l[j.REPORT_SPAM_FAILURE]=l[j.DELETE_FAILURE],l[j.MOVE]=function(a,b,c){var d=k.getValue(b,["data","messages"],{});return f(a.query,d,c.messages,{fid:c.fid,folderNumber:c.folderNumber})},l[j.UNDO]=l[j.MOVE],l[j.ARCHIVE]=function(a,b,c){var d=k.getValue(b,["data","messages"],{}),e=h.groupBy(c.messages,function(a){return a.accountId});return h.forEach(e,function(b,e){d=f(a.query,d,b,{fid:c.archiveFoldersInfo[e].fid,folderNumber:c.archiveFoldersInfo[e].folderNumber})}),d},b.exports=l},{MessageConstants:"MessageConstants",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",lodash:"lodash"}],52:[function(a,b,c){"use strict";function d(a,b,c){var d="&w="+b+"&h="+(c||b),e=/&w=\d*&h=\d*$/;return a?a.match(e)?a.replace(e,d):a+d:""}b.exports={convertThumbnailURL:d}},{}],53:[function(a,b,c){"use strict";var d={};d={getItemName:function(a){var b=a.name;return a.online&&(b.indexOf("Document:")||b.indexOf("Spreadhsheet:")||-1!==b.indexOf("Presentation:"))&&(b=b.split("'")[1]||b),b}},b.exports=d},{}],54:[function(a,b,c){"use strict";function d(a){var b,c=a.mid;return a.imid&&(b=a.mid.replace(a.imid,"{imid}"),c=a.imid.replace(/_/g,"/").replace(/-/g,"+"),c=b.replace(/\{imid\}/,c)),c}var e=a("lodash");b.exports={convertToStormMsg:function(a){return{folderInfo:{fid:a.fid},sourceFolderInfo:{fid:a.fid},fnum:a.folderNumber,mid:d(a),header:{receivedDate:a.creationDate/1e3,subject:a.subject,from:e.get(a.fromList&&a.fromList.map(function(a){return{displayName:a.name,address:a.emails?a.emails[0]:a.id,email:a.emails?a.emails[0]:a.id}}),[0]),to:a.toList&&a.toList.map(function(a){return{displayName:a.name,address:a.emails?a.emails[0]:a.id,email:a.emails?a.emails[0]:a.id}})},cid:"",categores:[],flags:{flagged:a.isFlagged,read:a.isRead,isFlagged:a.isFlagged,isRead:a.isRead},receivedDate:a.creationDate/1e3,snippet:a.snippet}}}},{lodash:"lodash"}],55:[function(a,b,c){function d(a,b,c){var d=a.getElementById(b);if(d)c(d);else{var e=a.getElementsByTagName("head")[0];d=a.createElement("style"),d.id=b,c(d),e.appendChild(d)}return d}b.exports=function(a,b,c){var e=b||document;if(e.createStyleSheet){var f=e.createStyleSheet();return f.cssText=a,f.ownerNode}return d(e,c,function(b){
b.styleSheet?b.styleSheet.cssText=a:b.innerHTML=a})},b.exports.byUrl=function(a){if(document.createStyleSheet)return document.createStyleSheet(a).ownerNode;var b=document.getElementsByTagName("head")[0],c=document.createElement("link");return c.rel="stylesheet",c.href=a,b.appendChild(c),c}},{}],SearchTabContent:[function(a,b,c){"use strict";var d,e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=a("react/addons"),g=a("lodash"),h=a("Utils"),i=a("DOMUtils"),j=a("../utils/ActionUtils"),k=a("MessageConstants"),l=a("UserSettingsConstants"),m=a("ObjectUtils"),n=a("../common/Utils"),o=a("Context"),p=a("GlobalConstants"),q=a("GlobalActions"),r=a("SearchActions"),s=a("SearchConstants"),t=a("StatService"),u=a("./Spinner.jsx"),v=a("./SearchInsteadOptions.jsx"),w=a("./DocumentGrid.jsx"),x=a("./right_rail/SearchRightRail.jsx"),y=a("./SearchMessageList.jsx"),z=a("./SearchError.jsx"),A=a("./SearchResultsHeader.jsx"),B=a("ActionStore"),C=a("FolderStore"),D=a("./notifications/SyncNotification.jsx"),E=a("./PhotoGrid.jsx"),F=a("./LinkGrid.jsx"),G=a("../../../artifacts/lang"),H=a("./ProgressBar.jsx"),I=a("./mixins/NumberFormatter");d=f.createClass({displayName:"SearchTabContent",propTypes:{searchId:f.PropTypes.string.isRequired,unsubscribrEnabled:f.PropTypes.bool.isRequired},mixins:[o,I],getInitialState:function(){var a=this.props;return this.scrollTop=0,this.scrollTicking=!1,this.backToScrollRendered=!1,this.fillingPageWithResults=!1,this.refreshAfterTabActive=!1,{data:a.data,contentType:a.contentType,filter:a.filter,hasMain:a.hasMain,snippetsEnabled:a.snippetsEnabled,messageDensity:a.messageDensity,timestamp:g.now(),showEmailHistory:a.showEmailHistory}},getDefaultProps:function(){return{imapInEnabled:!1,isArchive:!1,simpleEnabled:!1,unsubscribrEnabled:!1,searchResultsLinks:!1,isForceUser:!0}},shouldComponentUpdate:function(a,b){return b!==this.state},componentDidMount:function(){this.getStore(B).on("changed",this.onAction),h.requestAnimationFrame(function(){this.getDOMNode().focus()}.bind(this))},componentDidUpdate:function(){this.fillPageWithResults()},componentWillUnmount:function(){this.getStore(B).removeListener("changed",this.onAction),this._toggleKeyboardListener(!1),this.props.onClose&&this.props.onClose(this.props,this.state)},refresh:function(){this.setState({timestamp:g.now()})},getArchiveFolderInfo:function(){var a,b,c={},d=this.getStore(C),e=d.getFoldersByType("ARCHIVE"),f=e.length;if(f>0)for(b=0;f>b;b+=1)a=m.getValue(e[b],["folderInfo","fid"]),a&&(c[e[b].acctId]={fid:a,folderNumber:m.getValue(d.findByFID(a),["folderInfo","index"])});return c},onAction:function(){var a=this.getStore(B).getActionInfo(),b=m.getValue(a,["data"],{}),c=m.getValue(b,["metaData"],{}),d=m.getValue(c,["main","isEmpty"]),e=this.props.syncingAccounts&&this.props.syncingAccounts.length>0;switch(a.action){case p.SEARCH_WINDOW_RESIZE:this.scrollTicking=!1,this.scrollContainerScrollHeight=void 0,this.scrollContainerClientHeight=void 0,this.refresh();break;case p.SETTINGS_CHANGE:case p.METADATA_CHANGE:this.setState(b);break;case p.SET_TAB_DIRTY:this.refreshAfterTabActive=!0}if(m.getValue(b,"searchId","")===this.props.searchId)switch(k.FILL_SEARCH_RESULTS.indexOf(a.action)>-1&&(this.fillingPageWithResults=!1),a.action){case s.SEARCH_UPDATE:case s.SEARCH_FAILURE:case s.FETCH_MORE_SUCCESS:case s.FETCH_MORE_FAILURE:case s.CHANGE_SEARCH_FILTER:case s.CHANGE_FILTER_FETCH_START:case s.CHANGE_FILTER_FETCH_SUCCESS:case s.CHANGE_FILTER_FETCH_FAILURE:case s.CHANGE_SEARCH_VIEW:case s.CHANGE_VIEW_FETCH_START:case s.CHANGE_VIEW_FETCH_SUCCESS:case s.CHANGE_VIEW_FETCH_FAILURE:case k.MARK_READ:case k.MARK_READ_FAILURE:case k.MARK_UNREAD:case k.MARK_UNREAD_FAILURE:case k.STAR:case k.UNSTAR:case k.REPORT_SPAM:case k.REPORT_SPAM_FAILURE:case k.DELETE:case k.DELETE_FAILURE:this.scrollTicking=!1,this.scrollContainerScrollHeight=void 0,this.scrollContainerClientHeight=void 0,j[a.action]?this.setState(j[a.action](this.props,this.state,b)):this.refresh();break;case s.FILL_SCREEN_SUCCESS:this.fillingPageWithResults=!1,this.setState(j[a.action](this.props,this.state,b));break;case k.MOVE:case k.UNDO:this.setState(j[a.action](this.props,this.state,g.merge(b,{folderNumber:m.getValue(this.getStore(C).findByFID(b.fid),["folderInfo","index"])})));break;case k.ARCHIVE:b.archiveFoldersInfo=this.getArchiveFolderInfo(),this.setState(j[a.action](this.props,this.state,b));break;case p.SMARTVIEWS_LOADED:this.setState(b);break;case s.FETCH_MORE:case s.FILL_SCREEN:this.refresh();break;case s.SEARCH_SUCCESS:c.hasMain||this.refresh(),!d&&e&&this._showSyncNotification();break;case p.SEARCH_TAB_ACTIVE:this._toggleKeyboardListener(!0),this.refreshAfterTabActive&&(this.refreshAfterTabActive=!1,this.reload());break;case p.SEARCH_TAB_INACTIVE:this._toggleKeyboardListener(!1)}},render:function(){var a=this.getStore(B).getActionInfo(),b=f.addons.classSet({"srp-outer-container":!0,"has-right-rail":this.props.hasRightRail,"no-archive":!this.props.isArchive});return a.action!==s.SEARCH_START&&a.action!==p.SMARTVIEWS_LOADED&&a.action!==s.SEARCH_UPDATE||this.state.hasMain?f.createElement("div",{className:b,tabIndex:"0",role:"main"},f.createElement("div",{"aria-live":"polite",className:"aria-offscreen"},this._getResultsCountString()),this.renderHeader(),f.createElement("div",{ref:"main",className:"search-tab-container"},f.createElement("div",{ref:"scrollContainer",className:"scroll-content",onScroll:g.throttle(this.handleScroll.bind(this),32)},this.renderContent()),f.createElement(H,{ref:"progressBar",onDestroy:this.reload,sleekProgressBarEnabled:this.props.sleekProgressBarEnabled})),f.createElement("div",{ref:"backToScrollContainer"})):f.createElement("div",{className:b,tabIndex:"0",role:"main"},f.createElement("div",{"aria-live":"polite",className:"aria-offscreen"},G.str_search_results_loading),this.renderOuterSpinner())},isProgressBarOpen:function(){return m.getValue(this.refs.progressBar,"state.isOpen",!1)},handleEscKeyDown:function(){var a=this.refs.progressBar,b=this.isProgressBarOpen();b?a.cancel():this.executeAction(r.closeCurrentTab,{searchId:this.props.searchId})},renderContent:function(){var a=this.props,b=this.state,c=this.getVisibleItems(m.getValue(b,["data",b.contentType,b.filter,"items"],[])),d=m.getValue(b,["data",b.contentType,b.filter,"totalHits"]),e=m.getValue(b,["data",b.contentType,b.filter,"url"]),g=m.getValue(b,["data",b.contentType,b.filter,"queryResponse"]),h=this.getStore(B).getActionInfo(),i=[],j=a.hasRightRail?" has-right-rail":"",k=h.action===s.FETCH_MORE||h.action===s.FILL_SCREEN;if(h.action===s.SEARCH_FAILURE)return f.createElement(z,null);if(h.action===s.CHANGE_FILTER_FETCH_START||h.action===p.METADATA_CHANGE&&!a.isForceUser||h.action===s.CHANGE_VIEW_FETCH_START)i.push(f.createElement(u,null));else{switch(b.contentType){case"messages":i.push(f.createElement(y,{key:"messageList",ref:"infiniteScrollContent",items:c,totalHits:d,queryResponse:g,nextPageUrl:e,query:a.query,searchId:a.searchId,accounts:a.accounts,executeSearch:this.executeSearch,currentAccount:a.currentAccount,unsubscribrEnabled:a.unsubscribrEnabled,imapInEnabled:a.imapInEnabled,sleekProgressBarEnabled:a.sleekProgressBarEnabled,hasMultipleAccounts:a.hasMultipleAccounts,currentFilter:b.filter,messageDensity:b.messageDensity,snippetsEnabled:b.snippetsEnabled,searchType:a.searchType,recipientNameInSRP:a.recipientNameInSRP,isArchive:a.isArchive,fetchingMoreItems:k,handleEscKeyDown:this.handleEscKeyDown,handleSRPSortChange:this.handleSRPSortChange,jumpToAdvancedSearch:this.jumpToAdvancedSearch,scrollIntoViewWhenNeeded:this.scrollIntoViewWhenNeeded,searchAdFaviconHoverEnabled:a.searchAdFaviconHoverEnabled,searchAdFlipLabelAndRatingEnabled:a.searchAdFlipLabelAndRatingEnabled,searchAdHoverHighlightEnabled:a.searchAdHoverHighlightEnabled,searchAdThemeColorEnabled:a.searchAdThemeColorEnabled,sortType:a.sortType,sortOrder:a.sortOrder,isProgressBarOpen:this.isProgressBarOpen}));break;case"photos":i.push(f.createElement(E,{key:"photoList",ref:"infiniteScrollContent",items:c,searchId:a.searchId,executeSearch:this.executeSearch,fetchingMoreItems:k,currentFilter:b.filter,searchType:a.searchType}));break;case"documents":i.push(f.createElement(w,{key:"documentList",ref:"infiniteScrollContent",items:c,searchId:a.searchId,searchGDocsEnabled:a.searchGDocsEnabled,executeSearch:this.executeSearch,currentFilter:b.filter,fetchingMoreItems:k,searchType:a.searchType}));break;case"links":i.push(f.createElement(F,{key:"linkList",ref:"infiniteScrollContent",items:c,searchId:a.searchId,executeSearch:this.executeSearch,currentFilter:b.filter,fetchingMoreItems:k,searchType:a.searchType}))}i.push(this.renderSearchInsteadOptions())}return f.createElement("div",{key:"container",className:"srp-container"},f.createElement("div",{className:"main-content"+j},i),this.renderRightRail())},renderOuterSpinner:function(){return f.createElement(u,{verticallyCenter:!0})},renderHeader:function(){var a=this.props,b=this.state;return f.createElement(A,e({},b.data,{query:a.query,searchType:a.searchType,searchId:a.searchId,filterOrder:a.filterOrder,filter:b.filter,smartViews:b.smartViews,contentType:b.contentType,linksEnabled:a.searchResultsLinks,hideGDocsCallout:a.hideGDocsCallout,executeSearch:this.executeSearch,onFilterClick:this.handleFilterClick,onSectionClick:this.handleSectionClick,isEmptySearchResult:this.isEmptySearchResult(),currentAccount:a.currentAccount,imapInEnabled:a.imapInEnabled,simpleEnabled:a.simpleEnabled,isForceUser:a.isForceUser}))},renderSearchInsteadOptions:function(){var a=this.props,b=this.state,c=a.syncingAccounts,d=c&&c.length>0,e=this.getVisibleItems(m.getValue(b,["data",b.contentType,b.filter,"items"],[]));return e.length<=0?d?f.createElement("div",{className:"empty-search-result"},f.createElement(D,{mode:"emptySearch",isMultipleAccount:c.length>1,accountName:c[0].description||c[0].email})):f.createElement(v,{query:a.query,executeSearch:this.executeSearch,jumpToAdvancedSearch:this.jumpToAdvancedSearch}):void 0},_showSyncNotification:function(){var a=this.props.syncingAccounts;g.defer(function(){this.executeAction(q.showNotification,{component:f.createFactory(D)({isMultipleAccount:a.length>1,accountName:a[0].description||a[0].email}),duration:7e3,close:!0})}.bind(this))},_getResultsCountString:function(){var a,b,c=this.state,d=m.getValue(c,["data",c.contentType,c.filter,"totalHits"]);return d>-1&&(a=1===d?G.str_srch_result:G.str_srch_results,b=g.template(a,null)({number:this.toLocalNumberFormat(d)})),b},executeSearch:function(a){this.executeAction(r.executeSearch,{query:a})},reload:function(){this.executeSearch(this.props.query)},_toggleKeyboardListener:function(a){window[a?"addEventListener":"removeEventListener"]("keydown",this.handleWindowKeydown)},handleShowBackToTop:function(a){var b=this.refs&&this.refs.backToScrollContainer&&this.refs.backToScrollContainer.getDOMNode();a>50&&!this.backToScrollRendered?(this.backToScrollRendered=!0,f.render(this.renderScrollButtons(),b)):50>=a&&this.backToScrollRendered&&(f.unmountComponentAtNode(b),this.backToScrollRendered=!1)},handleScroll:function(){var a=this.refs.scrollContainer.getDOMNode(),b=a.scrollTop,c=b-this.scrollTop>0?"down":"up",d=!1,e=this.refs.infiniteScrollContent;this.scrollContainerScrollHeight||(this.scrollContainerScrollHeight=a.scrollHeight),this.scrollContainerClientHeight||(this.scrollContainerClientHeight=a.clientHeight),this.scrollTop=b,this.handleShowBackToTop(b),d=this.scrollContainerScrollHeight-(this.scrollContainerClientHeight+b),this.props.sortType===l.MSG_SORT_TYPE_DATE&&e&&e.handleScroll&&e.handleScroll(b),this.scrollTick({scrollDir:c,scrollTop:b,scrollBottom:d,scrollContainerClientHeight:this.scrollContainerClientHeight})},scrollTick:function(a){!this.scrollTicking&&"down"===a.scrollDir&&a.scrollBottom<.5*a.scrollContainerClientHeight&&(this.scrollTicking=!0,h.requestAnimationFrame(function(){this.fetchMoreItems()}.bind(this)))},fetchMoreItems:function(){var a=this.props,b=this.state,c=m.getValue(b,["data",b.contentType,b.filter],{}),d=m.getValue(c,["totalHits"]),e=m.getValue(c,["offset"]),f=!!e,h=m.getValue(c,["url"]);f&&(g.defer(function(){this.executeAction(r.fetchMoreSearchResults,{searchId:a.searchId,url:h,offset:encodeURIComponent(e),contentType:b.contentType,filter:b.filter,searchType:a.searchType})}.bind(this)),"messages"===b.contentType&&t.logRapid("mt:view",{action:"srp_msg_list_display",append:{mSrchSrl:"1",mSrchId:a.searchId,mSrtTyp:a.sortType,mSrtOrd:a.sortOrder,mSrchTtl:d}}))},fillPageWithResults:function(){var a,b=this.props,c=this.state,d=this.props.searchTabDimension,e=m.getValue(c,["data",c.contentType,c.filter],{}),f=m.getValue(e,["offset"]),h=this.getVisibleItems(m.getValue(e,["items"],[])),i=!!f,j=m.getValue(e,["url"]);switch(c.contentType){case"messages":a=Math.round(d.height/21);break;case"photos":a=Math.round(d.height/120)*Math.round(d.width/120);break;default:return}i&&a>h.length&&!this.fillingPageWithResults&&h.length>0&&(this.fillingPageWithResults=!0,m.getValue(e,"items.length")!==h.length?this.reload():g.defer(function(){var d=a-h.length;this.executeAction(r.fillPageWithResults,{searchId:b.searchId,url:j,offset:encodeURIComponent(f),contentType:c.contentType,filter:c.filter,searchType:b.searchType,limit:50>d?50:d})}.bind(this)))},handleSectionClick:function(a){var b,c=this.props.searchId,d=this.state.data;this.executeAction(r.changeSearchView,{searchId:c,currentFilter:a.filter,newView:a.contentType,contentType:a.contentType,filter:a.filter,searchType:this.props.searchType,query:this.props.query,url:m.getValue(d,[a.contentType,a.filter,"url"]),resultCount:{count:m.getValue(d,[a.contentType,a.filter,"items"],[]).length}}),b=a.source||"srp_header_section_clicked",this.scrollToTop(),t.stat({name:b,tags:{type:a.contentType}}),t.logRapid("mt:click",{action:b,append:{mSrchId:c,mSrchQry:this.props.query.toString(),mScTyp:a.contentType}})},handleFilterClick:function(a){var b=this.props.searchId,c=this.state.data;this.executeAction(r.changeSearchFilter,{searchId:b,newFilter:a.filter,type:a.contentType,contentType:a.contentType,filter:a.filter,searchType:this.props.searchType,query:this.props.query,isForceUser:this.props.isForceUser,resultCount:{count:m.getValue(c,[a.contentType,a.filter,"items"],[]).length},sortType:this.props.sortType,sortOrder:this.props.sortOrder}),this.executeAction(q.setMetaData,{srpDefaultFilter:a.filter}),this.scrollToTop(),t.stat({name:"srp_header_filterClicked",tags:{type:a.filter}}),t.logRapid("mt:click",{action:"srp_header_filter_clicked",append:{mSrchId:b,mSrchQry:this.props.query.toString(),myFltTyp:a.filter}})},handleWindowKeydown:function(a){var b=this.refs.infiniteScrollContent,c=m.getValue(b,["refs","msgListToolbar","onSelectAll"]),d=n.getOS(),e=a.ctrlKey,f=a.metaKey;if(27!==a.keyCode&&this.isProgressBarOpen())return a.stopPropagation(),void a.preventDefault();if(!i.isTextInput(a.target)&&b)switch(a.keyCode){case 65:(e&&"macintosh"!==d||f&&"macintosh"===d)&&(a.preventDefault(),"function"==typeof c&&c())}},handleSeeAllClick:function(a){this.handleSectionClick({filter:a.filter,contentType:a.contentType,source:"srp_right_rail_see_all_clicked"})},handleSRPSortChange:function(a,b){this.executeAction(r.executeSearch,{query:this.props.query,sortType:a,sortOrder:b,filter:this.state.filter,smartViews:this.state.smartViews})},renderScrollButtons:function(){return f.createElement("div",{className:"search-tab-scroll-buttons"},f.createElement("button",{className:"button-theme-transparent","data-preventclose":!0,"aria-label":G.str_srch_refine,onClick:this.jumpToAdvancedSearch},f.createElement("span",{className:"icon icon-search"}),f.createElement("span",{className:"icon-text"},G.str_srch_refine)),f.createElement("button",{className:"button-theme-transparent","aria-label":G.str_scroll_to_top,onClick:this.scrollToTop},f.createElement("span",{className:"icon icon-back-to-top"})))},renderRightRail:function(){return this.props.hasRightRail?f.createElement(x,e({lmv3Enabled:this.props.lmv3Enabled,searchGDocsEnabled:this.props.searchGDocsEnabled,isEmailHistoryEnabled:this.props.isEmailHistoryEnabled,showEmailHistory:"false"!==this.state.showEmailHistory,ref:"rightRail",key:"rightRail"},this.state.data,{searchId:this.props.searchId,query:this.props.query,executeSearch:this.executeSearch,contentType:this.state.contentType,filter:this.state.filter,searchType:this.props.searchType,handleSeeAllClick:this.handleSeeAllClick,rightRailSearchAdEnabled:this.props.rightRailSearchAdEnabled,searchResultsLinks:this.props.searchResultsLinks})):void 0},scrollToTop:function(){this.refs.scrollContainer.getDOMNode().scrollTop=0},jumpToAdvancedSearch:function(){this.getContext().events.emit("search:advancedSearch:toggle"),t.logRapid("mt:click",{action:"srp_scroll_refine_clicked",append:{mSrchId:this.props.searchId,mSrchQry:this.props.query.toString(),mSrchTyp:this.props.searchType}}),t.stat("srp_scroll_refinement")},getVisibleItems:function(a){return a.filter(function(a){var b=a.isVisible;return"undefined"==typeof b||b})},isEmptySearchResult:function(){var a=this.state,b=this.getVisibleItems(m.getValue(a,["data",a.contentType,a.filter,"items"],[]));return 0===b.length},scrollIntoViewWhenNeeded:function(a){var b,c,d,e,f,g=this.refs,h=g.main&&g.main.getDOMNode(),i=g.scrollContainer&&g.scrollContainer.getDOMNode(),j=36,k=26;return a&&h&&i?(c=h.getBoundingClientRect().top+j+k,d=h.getBoundingClientRect().top+h.clientHeight,b=a.offsetTop+a.offsetParent.offsetTop,f=b-h.clientHeight+a.clientHeight,e=b-k-j,void(a.getBoundingClientRect().top<c?i.scrollTop=e:a.getBoundingClientRect().bottom>d&&(i.scrollTop=f))):void(i&&(i.scrollTop=0))}}),b.exports=d},{"../../../artifacts/lang":2,"../common/Utils":6,"../utils/ActionUtils":51,"./DocumentGrid.jsx":8,"./LinkGrid.jsx":11,"./PhotoGrid.jsx":16,"./ProgressBar.jsx":17,"./SearchError.jsx":18,"./SearchInsteadOptions.jsx":19,"./SearchMessageList.jsx":20,"./SearchResultsHeader.jsx":21,"./Spinner.jsx":23,"./mixins/NumberFormatter":30,"./notifications/SyncNotification.jsx":35,"./right_rail/SearchRightRail.jsx":46,ActionStore:"ActionStore",Context:"Context",DOMUtils:"DOMUtils",FolderStore:"FolderStore",GlobalActions:"GlobalActions",GlobalConstants:"GlobalConstants",MessageConstants:"MessageConstants",ObjectUtils:"ObjectUtils",SearchActions:"SearchActions",SearchConstants:"SearchConstants",StatService:"StatService",UserSettingsConstants:"UserSettingsConstants",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}]},{},[48]);