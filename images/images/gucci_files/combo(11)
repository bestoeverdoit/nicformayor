"use strict";YUI.add("tictac-base",function(a){function b(){var b=!0;try{/[\&|\?]dev=1/.test(window.location.href)&&(b=!1)}catch(c){a.Tictac.base.utils.log("tictac-base caught exception setting combo looking for dev=1:",c)}return b}function c(){return a.config.groups.tictacs.base}function d(){var b=a.config.groups.tictacs.base,c=b.split("/"),d=c[c.length-1],e=b.replace(d,"zz")+"/combo?";return e}function e(){var b=a.config.groups.tictacs.base,c=b.split("/"),d=c[c.length-1];return d}function f(b,d,e){var f=c(),g=a.config.groups.tictacs.modules,h=g[d||"tictac-base"].path.split("/",3).join("/");return"/"!==b.substring(0,1)&&(h+="/"),e?f+h+b:h+b}function g(a){var b,c,d,e,f=!(NeoConfig.isAMT||NeoConfig.isInternal),g=window.location.search.substring(1).split("&"),h={},i=/[\&|\?]dev=1/.test(window.location.href)?"debug":"min";for(d=0,e=g.length;e>d;d++)c=g[d].split("="),2===c.length&&(f?c[0]!==a+"raw"&&c[0]!==a+"debug"&&c[0]!==a+"perf"||(h[c[0]]=c[1]):h[c[0]]=c[1]);return b=!!h[a+"perf"],i=b?"min":i,h[a+"raw"]?i="raw":h[a+"debug"]?i="debug":h[a+"min"]&&(i="min"),{enablePerf:b,filter:i,urlParams:h}}function h(f,g){g="undefined"==typeof g?b():g&&b();var h={combine:g,groups:{tictacs:{combine:g,comboBase:d(),base:c(),root:e(),modules:f}}};window.YUI_config=a.mix(window.YUI_config||{},h,!0,null,0,!0)}function i(f,g,h){h="undefined"==typeof h?b():h&&b();var i={combine:h,groups:{}};g.combine=h,g.comboBase=d(),g.base=c(),g.root=e(),i.groups[f]=g,window.YUI_config=a.mix(window.YUI_config||{},i,!0,null,0,!0)}function j(f,g,h){h="undefined"==typeof h?b():h&&b();var i={combine:h,groups:{}};g.combine=h,g.comboBase=d(),g.base=c(),g.root=e(),i.groups[f]=g,a.applyConfig(i)}function k(a){return m?a.replace(/\.css$/,"_bidi.css"):a}a.namespace("Tictac.base").loader=function(){};var l=window.NeoConfig&&window.NeoConfig.lang.substring(0,2),m="ar"===l||"he"===l||"ur"===l,n=g("base"),o=f("css/");i("tictacs",{filter:n.filter,modules:{"tictac-base-formatter":{path:f("js/formatter-min.js")},"tictac-base-utils":{path:f("js/utils-min.js"),requires:["tictac-base-formatter","json","tictac-base-strings"]},"tictac-base-stats":{path:f("js/stats-min.js"),requires:["ymma-stats","json-stringify"]},"tictac-base-strings":{path:f("js/strings/lang_"+window.NeoConfig.lang+"-min.js")},"tictac-base-rollups":{path:f("js/tictac-base-rollups_"+window.NeoConfig.lang+"-min.js"),requires:["handlebars-base"]},"tictac-base-mailutils":{path:f("js/mailutils-min.js"),requires:["tictac-base-strings","json-parse"]},"tictac-base-viewutils":{path:f("js/viewutils-min.js"),requires:["tictac-base-rollups","tictac-base-strings","comms-bidi-textentry","comms-intl-bidi","base-view-css"]},"tictac-base-view":{path:f("js/view-min.js"),requires:["node","base-view-css","tictac-base-viewutils","backbone"]},"tictac-base-dialogview":{path:f("js/dialogview-min.js"),requires:["tictac-base-view","tictac-base-viewutils","tictac-base-rollups","tictac-base-strings"]},"tictac-base-model":{path:f("js/model-min.js"),requires:["backbone"]},"tictac-base-mailpreferences":{path:f("js/mailpreferences-min.js"),requires:["mail-persist-meta-data","json","tictac-base-utils"]},"tictac-base-richselect":{path:f("js/richselect-min.js"),requires:["base","node","tictac-base-rollups","tictac-base-viewutils","tictac-richselect-css"]},"tictac-base-richmenu":{path:f("js/richmenu-min.js"),requires:["base","node","tictac-base-rollups","tictac-base-viewutils","tictac-richselect-css"]},"tictac-base-richtexteditor":{path:f("js/richtexteditor-min.js"),requires:["base","node","tictac-base-utils","tictac-base-rollups","tictac-base-richselect","escape","base-bidi","tictac-base-strings","tictac-base-viewutils","tictac-richtexteditor-css","tictac-base-mailutils"]},"tictac-base-batch-transport":{path:f("js/batchtransport-min.js"),requires:["tictac-base-utils","mail-common-utils-settings"]},"tictac-base-mail-io":{path:f("js/mailio-min.js"),requires:["tictac-base-utils","io","common-net-sessionmgr","common-net-error"]},"tictac-base-assist-container":{path:f("js/assistcontainer-min.js"),requires:["node","event-custom"]}}}),i("base_css",{filter:n.filter,modules:{"base-view-css":{type:"css",path:k(o+"view.css")},"tictac-richselect-css":{type:"css",path:k(o+"richselect.css")},"tictac-richtexteditor-css":{type:"css",path:k(o+"rte.css")}}},!0),i("tictacs_lib",{modules:{"base-bidi":{path:f("lib/bidi.js")},underscore:{path:f("lib/underscore.js")},backbone:{path:f("lib/backbone.js"),requires:["underscore"]}}},!0),a.mix(a.Tictac.base,{isRTL:m,getCombo:b,getBase:c,getComboBase:d,getComboRoot:e,getAssetURL:f,getTictacVersion:g,defineModules:h,defineModuleGroup:i,addModuleGroup:j})},"1.0.0",{requires:["node","event"]});require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=".search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ui-token{border:1px solid #1C89FF;border-radius:3px;box-shadow:0 1px 1px #CDCDCD;-moz-box-sizing:border-box;box-sizing:border-box;color:#1C89FF;cursor:pointer;display:inline-block;line-height:0;max-width:150px;padding:1px 10px;position:relative;zoom:1}.ui-token:not(.ui-token-selected):active .icon-close,.ui-token:not(.ui-token-selected):focus .icon-close,.ui-token:not(.ui-token-selected):hover .icon-close{opacity:1}.ui-token.ui-token-selected{background-color:#D5E8FF;border-color:#1567BF;box-shadow:none;color:#1567BF}.ui-token.ui-token-destroyable{padding-right:28px}.ui-token.ui-token-type-people{max-width:220px}.ui-token.icon{font-family:inherit;font-size:inherit;padding-left:28px}.ui-token.icon::before{font-family:mail;line-height:1;position:absolute;top:50%;margin-top:-6px;left:10px}.ui-token.icon-folder{max-width:150px}.ui-token>*{display:inline-block;line-height:20px;vertical-align:middle}.ui-token .icon-close{font-size:1em;line-height:1;opacity:.4;padding:3px;position:absolute;top:50%;margin-top:-9px;right:7px;-webkit-transition:opacity .2s ease-in-out;-moz-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.ui-token .icon-close:active,.ui-token .icon-close:focus,.ui-token .icon-close:hover{opacity:1}.ui-token-thumbnail{background-position:center;background-repeat:no-repeat;background-size:cover;border-top-left-radius:2px;border-bottom-left-radius:2px;margin:0;padding:0;position:absolute;top:0;bottom:0;left:0;width:22px}.ui-token-thumbnail+*{padding-left:20px}.ui-token-text{-moz-box-sizing:border-box;box-sizing:border-box;display:block;max-width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}.search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.typeahead-list>li{overflow:hidden}.typeahead-list>li:hover{background-color:#E5E5E5}.tokenized-typeahead{-moz-box-sizing:border-box;box-sizing:border-box;position:relative}.tokenized-typeahead .typeahead-list li:last-child,.tokenized-typeahead .typeahead-list li:last-child .menu-active-item{background-color:#fff}#Stencil .typeahead-input{margin:0;border:0;box-shadow:none;bottom:0;left:0;width:100%;padding:6px 26px 6px 10px;font-size:1.4rem;display:inline-block;position:relative;height:32px}#Stencil .typeahead-list{border-width:1px;border-width:0;border-style:solid;border-color:#e2e2e6;box-shadow:0 5px 10px rgba(0,0,0,.36);position:absolute;background-color:#fff;left:1px;right:1px;z-index:1;margin-top:0;top:100%}#Stencil .adv-search-container .typeahead-content-box{position:relative}#Stencil .lt .typeahead-input-container{border:0 none}#Stencil .typeahead-input-container{position:relative;overflow:hidden}#Stencil .lt .typeahead-list{border-width:1px 0}#Stencil .adv-search-container .typeahead-content-box{border:0;margin:4px 0}#Stencil .adv-search-container .typeahead-input{padding:6px;font-size:1.3rem;border:1px solid #CCC;border-radius:2px}#Stencil .typeahead-input-usertext{position:relative;margin:0;background-color:transparent}#Stencil .typeahead-input-usertext:-moz-placeholder,#Stencil .typeahead-input-usertext::-moz-placeholder,#Stencil .typeahead-input-usertext::-webkit-input-placeholder{color:silver}#Stencil .typeahead-input-usertext:-ms-input-placeholder{color:silver}#Stencil .typeahead-input-grayhint{position:absolute;top:0;left:0;margin:0;color:silver;-webkit-text-fill-color:silver;background-color:transparent}#Stencil .typeahead-input-grayhint[dir=rtl]{text-align:left!important}#Stencil .tokenized-typeahead-container{border:1px solid #7590F5;background-color:#fff}#Stencil .search-autocomplete .tokenized-typeahead-container{height:32px}.tokensSelected .typeahead-input{color:transparent;text-shadow:0 0 0 #000}.typeahead-token-list{display:inline;float:left;margin:4px 0 4px 4px!important;outline:0}.typeahead-token-list li{display:inline-block;vertical-align:middle}.typeahead-token-list li+li{margin-left:5px}.search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.search-menu{background-color:rgba(255,255,255,.95);color:#000;box-shadow:0 5px 10px rgba(0,0,0,.36);-moz-box-sizing:border-box;box-sizing:border-box;padding:10px 0;max-height:100%;overflow:auto;overflow-x:hidden;position:relative}.search-menu-group{border-bottom:1px solid #D8D8D8;padding-bottom:10px}.search-menu-group:first-child{margin-top:-10px;padding-top:10px}.search-menu-group:last-child{border-bottom:0;padding-bottom:0}.search-menu-group+.search-menu-group,.search-menu-group+.search-menuitem{margin-top:10px}.search-menu-group.search-menu-togglable .search-menuitem{position:relative;padding-left:40px}.search-menu-group.search-menu-togglable .icon{position:absolute;top:4px}.search-menu-group.search-menu-togglable .icon.icon-checkmark{left:16px}.search-menu-group-title{color:#AAA;font-weight:700}.search-menu-group-overflow{max-height:200px;overflow:auto;overflow-x:hidden;position:relative}.search-menu-group-title,.search-menuitem{line-height:2.5rem;padding:0 20px}.search-menuitem{-moz-box-sizing:border-box;box-sizing:border-box;cursor:pointer;max-width:300px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.search-menuitem:focus,.search-menuitem:hover:not([data-disabled]){background-color:rgba(0,0,0,.1)}.search-menuitem:active{background-color:rgba(0,0,0,.15)}.search-menuitem.selected{font-weight:700}.search-menuitem.selected::before{content:\"\\e018\";font-family:mail;font-size:21px;font-weight:400;margin-top:-.55em;position:absolute;right:-webkit-calc(100% - 36px);right:-moz-calc(100% - 36px);right:calc(100% - 36px);top:50%}.search-menuitem[data-disabled]{color:#999;pointer-events:none}.search-menuitem kbd{float:right;font-family:inherit;margin-left:20px}.search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ui-onboarding{font-size:12px}.ui-onboarding.convstooltip .modal.tooltips-text{border:1px solid #0078ff;border-radius:3px}.ui-onboarding .modal::after,.ui-onboarding .modal::before{content:'';position:absolute;width:0;height:0;border:8px solid transparent}.ui-onboarding .modal.top-arrow::before{top:-16px;left:20px;border-bottom-color:#0078ff}.ui-onboarding .modal.top-arrow::after{top:-15px;left:20px;border-bottom-color:#fff}.ui-onboarding .modal.bottom-arrow::before{bottom:-16px;left:20px;border-top-color:#0078ff}.ui-onboarding .modal.bottom-arrow::after{bottom:-15px;left:20px;border-top-color:#fff}.ui-onboarding .modal.left-arrow::before{left:-16px;top:20px;border-right-color:#0078ff}.ui-onboarding .modal.left-arrow::after{left:-15px;top:20px;border-right-color:#fff}.ui-onboarding .modal.right-arrow::before{right:-16px;top:20px;border-left-color:#0078ff}.ui-onboarding .modal.right-arrow::after{right:-15px;top:20px;border-left-color:#fff}.ui-onboarding .hd{font-size:16px;font-weight:700;margin-bottom:7px}.ui-onboarding .bd{line-height:16px}.ui-onboarding .modal-bd{margin-top:13px}.ui-onboarding .modal.tooltips-text .modal-ft{padding:11px 20px 17px}.ui-onboarding .modal-ft .onboarding-btn{font-size:12px;line-height:12px;height:25px;padding:0;margin:0;min-width:50px;box-shadow:none}.parens::before{content:'('}.parens::after{content:')'}.label-text{color:#7f7f7f}.button-plain{background:none repeat scroll 0 0 transparent;border:none;margin:0;outline:0;padding:0}#Stencil .custom-select select{background-color:transparent!important}#Stencil .offscreen{position:absolute;left:-9999px}.negate-font-size{font-size:0}";a("./../../../jarvis/node_modules/cssify")(d,void 0,"/var/builds/workspace/49938-v3-package/BUILD_CONTAINER/container/label/DOCKER-LOW/app_root/artifacts/css/main.css"),b.exports=d},{"./../../../jarvis/node_modules/cssify":11}],2:[function(a,b,c){"use strict";var d={str_dateformat_AM_l10n:"AM",str_dateformat_PM_l10n:"PM",str_dayabbr_friday:"Fri",str_dayabbr_monday:"Mon",str_dayabbr_saturday:"Sat",str_dayabbr_sunday:"Sun",str_dayabbr_thursday:"Thu",str_dayabbr_tuesday:"Tue",str_dayabbr_wednesday:"Wed",str_day_friday:"Friday",str_day_monday:"Monday",str_day_saturday:"Saturday",str_day_sunday:"Sunday",str_day_thursday:"Thursday",str_day_tuesday:"Tuesday",str_day_wednesday:"Wednesday",str_folder_allmail:"All Mail",str_folder_chats:"Instant Messages",str_folder_drafts:"Drafts",str_folder_inbox:"Inbox",str_folder_sent:"Sent",str_folder_spam:"Spam",str_folder_trash:"Trash",str_monthabbr_april:"Apr",str_monthabbr_august:"Aug",str_monthabbr_december:"Dec",str_monthabbr_february:"Feb",str_monthabbr_january:"Jan",str_monthabbr_july:"Jul",str_monthabbr_june:"Jun",str_monthabbr_march:"Mar",str_monthabbr_may:"May",str_monthabbr_november:"Nov",str_monthabbr_october:"Oct",str_monthabbr_september:"Sep",str_month_april:"April",str_month_august:"August",str_month_december:"December",str_month_february:"February",str_month_january:"January",str_month_july:"July",str_month_june:"June",str_month_march:"March",str_month_may:"May",str_month_november:"November",str_month_october:"October",str_month_september:"September",str_suggestion_other_email_plural:"{{emailAddress}} & {{number}} more emails",str_suggestion_other_email_singular:"{{emailAddress}} & 1 more email",last:null};b.exports=d},{}],3:[function(a,b,c){"use strict";b.exports.leftJoiner=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0847\u0848\u084A-\u084E\u0850-\u0853\u0855\u08A0-\u08A9\u08AF\u08B0\u1807\u1820-\u1877\u1887-\u18A8\u18AA\uA840-\uA872]|\uD802[\uDEC0-\uDEC4\uDECD\uDED3-\uDEDC\uDEDE-\uDEE0\uDEEB-\uDEEE\uDF80\uDF82\uDF86-\uDF88\uDF8A\uDF8B\uDF8D\uDF90\uDFAD\uDFAE]/,b.exports.rightJoiner=/[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0855\u08A0-\u08AC\u08AE-\u08B2\u1807\u1820-\u1877\u1887-\u18A8\u18AA\uA840-\uA871]|\uD802[\uDEC0-\uDEC5\uDEC7\uDEC9\uDECA\uDECE-\uDED6\uDED8-\uDEE1\uDEE4\uDEEB-\uDEEF\uDF80-\uDF91\uDFA9-\uDFAE]/},{}],4:[function(a,b,c){"use strict";b.exports="[\x00-@[-`{-©«-´¶-¹»-¿×÷ʹʺ˂-ˏ˒-˟˥-˭˯-ͯʹ͵;΄΅·϶҃-҉֊֍-֏֑-ׇֽֿׁׂׅׄ؀-؇؉؊،؎-ًؚ-٬ٰۖ-ۤۧ-ۭ۰-۹ܑܰ-݊ަ-ް߫-߳߶-߹ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣤ-ंऺ़ु-ै्॑-ॗॢॣঁ়ু-ৄ্ৢৣ৲৳৻ਁਂ਼ੁੂੇੈੋ-੍ੑੰੱੵઁં઼ુ-ૅેૈ્ૢૣ૱ଁ଼ିୁ-ୄ୍ୖୢୣஂீ்௳-௺ఀా-ీె-ైొ-్ౕౖౢౣ౸-౾ಁ಼ೌ್ೢೣഁു-ൄ്ൢൣ්ි-ුූัิ-ฺ฿็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷-༽ཱ-ཾྀ-྄྆྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္်ွှၘၙၞ-ၠၱ-ၴႂႅႆႍႝ፝-፟᎐-᎙᐀ ᚛᚜ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴឵ិ-ួំ៉-៓៛៝៰-៹᠀-᠎ᢩᤠ-ᤢᤧᤨᤲ᤹-᤻᥀᥄᥅᧞-᧿ᨘᨗᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀᮁᮢ-ᮥᮨᮩ᮫-ᮭ᯦ᯨᯩᯭᯯ-ᯱᰬ-ᰳᰶ᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸᳹᷀-᷵᷼-᷿᾽᾿-῁῍-῏῝-῟῭-`´῾ -‍‐-\u2029 -⁤⁨⁪-⁰⁴-⁾₀-₎₠-₽⃐-⃰℀℁℃-℆℈℉℔№-℘℞-℣℥℧℩℮℺℻⅀-⅄⅊-⅍⅐-⅟↉←-⌵⍻-⎔⎖-⏺␀-␦⑀-⑊①-⒛⓪-⚫⚭-⟿⤀-⭳⭶-⮕⮘-⮹⮽-⯈⯊-⯑⳥-⳪⳯-⳱⳹-⳿⵿ⷠ-⹂⺀-⺙⺛-⻳⼀-⿕⿰-⿻　-〄〈-〠〪-〭〰〶〷〽-〿゙-゜゠・㇀-㇣㈝㈞㉐-㉟㉼-㉾㊱-㊿㋌-㋏㍷-㍺㏞㏟㏿䷀-䷿꒐-꓆꘍-꘏꙯-ꙿꚟ꛰꛱꜀-꜡ꞈꠂ꠆ꠋꠥꠦ꠨-꠫꠸꠹꡴-꡷꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱꨲꨵꨶꩃꩌꩼꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫬꫭ꫶ꯥꯨ꯭ﬞ﬩﴾﴿﷽︀-︙︠-︭︰-﹒﹔-﹦﹨-﹫\ufeff！-＠［-｀｛-･￠-￦￨-￮￹-�]|�[��-��-����-��-�]|�[��-����-��-�����-�]|�[�-�]|[��][��-��-��-��-����-��-��-�����-��-������-�����-��-�]|�[�-�������-������-�������-��]|�[�-��-�]|�[�-�]|�[���-�]|�[�-��-��-��-��-��-�]|�[������-�]|�[�-�]|�[��]|�[�-��-��-��-��-��-��-����-��-��-��-�]|�[�-��-��-��-��-��-��-��-��-��-�]|�[�-��-��-��-��-�]"},{}],5:[function(a,b,c){"use strict";b.exports="[־׀׃׆א-תװ-״؈؋؍؛؜؞-ي٭-ٯٱ-ەۥۦۮۯۺ-܍܏ܐܒ-ܯݍ-ޥޱ߀-ߪߴߵߺࠀ-ࠕࠚࠤࠨ࠰-࠾ࡀ-ࡘ࡞ࢠ-ࢲ‏‫‮⁧יִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-﯁ﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼ﹰ-ﹴﹶ-ﻼ]|�[�-���-�����-��-��-��-��-���-�����-��-��-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-�]|�[�-��-�]|�[�-��-������-��-��������-�������������-��-��-��-���-��-��-��-��-�]"},{}],6:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"OnboardingText",propTypes:{id:e.PropTypes.string,title:e.PropTypes.node,body:e.PropTypes.node,buttonText:e.PropTypes.node,dir:e.PropTypes.string,width:e.PropTypes.string},render:function(){var a=this.props,b={width:a.width+"px"},c={modal:!0,"tooltips-text":!0};return a.dir&&(c[a.dir+"-arrow"]=!0),e.createElement("div",{className:"convstooltip yui3-tooltips ui-onboarding",id:a.id},e.createElement("div",{className:e.addons.classSet(c),style:b},e.createElement("div",{className:"modal-bd"},e.createElement("div",{className:"hd"},a.title),e.createElement("div",{className:"bd"},a.body)),e.createElement("div",{className:"modal-ft"},e.createElement("button",{className:"btn left right default onboarding-btn","data-action":"ok"},a.buttonText))))}}),b.exports=d},{"react/addons":"react/addons"}],7:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash");d=e.createClass({displayName:"Input",propTypes:{value:e.PropTypes.string,disabled:e.PropTypes.bool,onFocus:e.PropTypes.func,onClick:e.PropTypes.func,onSelect:e.PropTypes.func,onChange:e.PropTypes.func,onKeyUp:e.PropTypes.func,onKeyDown:e.PropTypes.func,onKeyPress:e.PropTypes.func,onCompositionStart:e.PropTypes.func,onCompositionEnd:e.PropTypes.func},shouldComponentUpdate:function(a){return!f.isEqual(this.props,a)},getDefaultProps:function(){return{className:"",value:"",onCompositionStart:f.noop,onCompositionEnd:f.noop}},componentDidMount:function(){var a=this,b=a.getDOMNode();b.addEventListener("compositionstart",a.handleCompositionStart),b.addEventListener("compositionend",a.handleCompositionEnd)},componentWillUnmount:function(){var a=this,b=a.getDOMNode();b.removeEventListener("compositionstart",a.handleCompositionStart),b.removeEventListener("compositionend",a.handleCompositionEnd)},componentDidUpdate:function(){var a=this;a.props.dir||a.getDOMNode().removeAttribute("dir")},render:function(){var a=this.props;return e.createElement("input",{className:"typeahead-input "+a.className,spellCheck:"false",autoComplete:"false",placeholder:a.placeholder,disabled:a.disabled?"disabled":!1,value:a.value,onFocus:a.onFocus,onClick:a.onClick,onSelect:a.onSelect,onChange:this.handleChange,onKeyUp:a.onKeyUp,onKeyDown:a.onKeyDown,onKeyPress:a.onKeyPress,dir:a.dir})},handleChange:function(a){a.target.value!==this.props.value&&this.props.onChange(a)},handleCompositionStart:function(){this.props.onCompositionStart()},handleCompositionEnd:function(){this.props.onCompositionEnd()},setSelectionRange:function(a,b){this.getDOMNode().setSelectionRange(a,b)},getSelectionEnd:function(){return this.getDOMNode().selectionEnd},getSelectionStart:function(){return this.getDOMNode().selectionStart},focus:function(){this.getDOMNode().focus()},blur:function(){this.getDOMNode().blur()}}),b.exports=d},{lodash:"lodash","react/addons":"react/addons"}],8:[function(a,b,c){"use strict";b.exports=function(){function b(a){a=a||{},this.dispatcher=new c({}),this.actionContext=this.getActionContext(),this.componentContext=this.getComponentContext()}var c=a("dispatchr")();return b.prototype.getComponentContext=function(){var a=this;return{executeAction:function(b,c){b(a.actionContext,c,function(a){})},getStore:a.dispatcher.getStore.bind(a.dispatcher)}},b.prototype.getActionContext=function(){var a=this;return{dispatch:a.dispatcher.dispatch.bind(a.dispatcher),executeAction:function(b,c,d){b(a.actionContext,c,d)},getStore:a.dispatcher.getStore.bind(a.dispatcher)}},b.prototype.dehydrate=function(){return{dispatcher:this.dispatcher.dehydrate()}},b.prototype.rehydrate=function(a){this.dispatcher.rehydrate(a.dispatcher||{})},{registerStore:c.registerStore.bind(c),contextInst:new b}}},{dispatchr:"dispatchr"}],9:[function(a,b,c){"use strict";YUI.add("tictac-lib",function(){var b=a("lodash"),c=a("AppDispatcher"),d=a("FolderStore");a("../../artifacts/css/main.css"),[d].forEach(c.registerStore),b.templateSettings.escape=/{{([\s\S]+?)}}/g,b.templateSettings.interpolate=/{{{([\s\S]+?)}}}/g,window.React=window.React||a("react/addons"),window.ReactContext=window.ReactContext||a("./context.js")()},"1.0.0",{requires:["tictac-base"]})},{"../../artifacts/css/main.css":1,"./context.js":8,AppDispatcher:"AppDispatcher",FolderStore:"FolderStore",lodash:"lodash","react/addons":"react/addons"}],10:[function(a,b,c){"use strict";var d={findJavaScriptIndexEndForUTF8ByteCount:function(a,b,c){var d,e,f=a;for(d=c;d<b.length&&f>0;d+=1)e=b.charCodeAt(d),f-=128>e?1:2048>e?2:3;return 0===f?d:-1},getNextResponsePartInfo:function(a,b){for(var c,d,e;a.indexOf("\r\n",b)===b;)b+=2;return c=a.indexOf("\r\n",b),d=a.substring(b,c),e=parseInt(d,16),{startIndex:c,endIndex:this.findJavaScriptIndexEndForUTF8ByteCount(e,a,c+2)}},parse:function(a,b){for(var c,d=b||0,e=[];d<a.length-2&&(c=this.getNextResponsePartInfo(a,d),-1!==c.endIndex);)e.push(c),d=c.endIndex;return{lastStartIndex:d,data:e.map(function(b){return a.substring(b.startIndex,b.endIndex)}).map(function(a){return JSON.parse(a)})}}};b.exports=d},{}],11:[function(a,b,c){function d(a,b,c){var d=a.getElementById(b);if(d)c(d);else{var e=a.getElementsByTagName("head")[0];d=a.createElement("style"),d.id=b,c(d),e.appendChild(d)}return d}b.exports=function(a,b,c){var e=b||document;if(e.createStyleSheet){var f=e.createStyleSheet();return f.cssText=a,f.ownerNode}return d(e,c,function(b){b.styleSheet?b.styleSheet.cssText=a:b.innerHTML=a})},b.exports.byUrl=function(a){if(document.createStyleSheet)return document.createStyleSheet(a).ownerNode;var b=document.getElementsByTagName("head")[0],c=document.createElement("link");return c.rel="stylesheet",c.href=a,b.appendChild(c),c}},{}],12:[function(a,b,c){(function(a){!function(d){function e(a){throw new RangeError(H[a])}function f(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function g(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(G,".");var e=a.split("."),g=f(e,b).join(".");return d+g}function h(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:w}function k(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(c=a.lastIndexOf(D),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;q>f;){for(g=r,h=1,k=w;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&e("overflow"),r+=m*h,n=t>=k?x:k>=t+y?y:k-t,!(n>m);k+=w)o=w-n,h>J(v/o)&&e("overflow"),h*=o;b=p.length+1,t=l(r-g,b,0==g),J(r/b)>v-s&&e("overflow"),s+=J(r/b),r%=b,p.splice(r++,0,s)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,b=C,c=0,g=B,i=0;q>i;++i)p=a[i],128>p&&u.push(K(p));for(d=f=u.length,f&&u.push(D);q>d;){for(j=v,i=0;q>i;++i)p=a[i],p>=b&&j>p&&(j=p);for(r=d+1,j-b>J((v-c)/r)&&e("overflow"),c+=(j-b)*r,b=j,i=0;q>i;++i)if(p=a[i],b>p&&++c>v&&e("overflow"),p==b){for(m=c,n=w;o=g>=n?x:n>=g+y?y:n-g,!(o>m);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(c,r,d==f),c=0,++d}++c,++b}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c&&!c.nodeType&&c,r="object"==typeof b&&b&&!b.nodeType&&b,s="object"==typeof a&&a;s.global!==s&&s.window!==s&&s.self!==s||(d=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^\x20-\x7E]/,G=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.4.1",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return t});else if(q&&r)if(b.exports==q)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else d.punycode=t}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],14:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],15:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":13,"./encode":14}],16:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=a("punycode"),j=a("./util");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","	"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s=255,t=/^[+a-z0-9A-Z_-]{0,63}$/,u=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=a("querystring");d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=-1!==d&&d<a.indexOf("#")?"?":"#",f=a.split(e),g=/\\/g;f[0]=f[0].replace(g,"/"),a=f.join(e);var h=a;if(h=h.trim(),!c&&1===a.split("#").length){var l=m.exec(h);if(l)return this.path=h,this.href=h,this.pathname=l[1],l[2]?(this.search=l[2],b?this.query=y.parse(this.search.substr(1)):this.query=this.search.substr(1)):b&&(this.search="",this.query={}),this}var n=k.exec(h);if(n){n=n[0];var o=n.toLowerCase();this.protocol=o,h=h.substr(n.length)}if(c||n||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var z="//"===h.substr(0,2);!z||n&&w[n]||(h=h.substr(2),this.slashes=!0)}if(!w[n]&&(z||n&&!x[n])){for(var A=-1,B=0;B<r.length;B++){var C=h.indexOf(r[B]);-1!==C&&(-1===A||A>C)&&(A=C)}var D,E;E=-1===A?h.lastIndexOf("@"):h.lastIndexOf("@",A),-1!==E&&(D=h.slice(0,E),h=h.slice(E+1),this.auth=decodeURIComponent(D)),A=-1;for(var B=0;B<q.length;B++){var C=h.indexOf(q[B]);-1!==C&&(-1===A||A>C)&&(A=C)}-1===A&&(A=h.length),this.host=h.slice(0,A),h=h.slice(A),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var G=this.hostname.split(/\./),B=0,H=G.length;H>B;B++){var I=G[B];if(I&&!I.match(t)){for(var J="",K=0,L=I.length;L>K;K++)J+=I.charCodeAt(K)>127?"x":I[K];if(!J.match(t)){var M=G.slice(0,B),N=G.slice(B+1),O=I.match(u);O&&(M.push(O[1]),N.unshift(O[2])),N.length&&(h="/"+N.join(".")+h),this.hostname=M.join(".");break}}}this.hostname.length>s?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=i.toASCII(this.hostname));var P=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+P,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!v[o])for(var B=0,H=p.length;H>B;B++){var R=p[B];if(-1!==h.indexOf(R)){var S=encodeURIComponent(R);S===R&&(S=escape(R)),h=h.split(R).join(S)}}var T=h.indexOf("#");-1!==T&&(this.hash=h.substr(T),h=h.slice(0,T));var U=h.indexOf("?");if(-1!==U?(this.search=h.substr(U),this.query=h.substr(U+1),b&&(this.query=y.parse(this.query)),h=h.slice(0,U)):b&&(this.search="",this.query={}),h&&(this.pathname=h),x[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",V=this.search||"";this.path=P+V}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=y.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||x[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return x[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!x[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||w[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),t=s||r||c.host&&a.pathname,u=t,v=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!x[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===v[0]?v[0]=c.host:v.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),t=t&&(""===o[0]||""===v[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,v=o;else if(o.length)v||(v=[]),v.pop(),v=v.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=v.shift();var z=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!v.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=v.slice(-1)[0],B=(c.host||a.host||v.length>1)&&("."===A||".."===A)||""===A,C=0,D=v.length;D>=0;D--)A=v[D],"."===A?v.splice(D,1):".."===A?(v.splice(D,1),C++):C&&(v.splice(D,1),C--);if(!t&&!u)for(;C--;C)v.unshift("..");!t||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),B&&"/"!==v.join("/").substr(-1)&&v.push("");var E=""===v[0]||v[0]&&"/"===v[0].charAt(0);if(y){c.hostname=c.host=E?"":v.length?v.shift():"";var z=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return t=t||c.host&&v.length,t&&!E&&v.unshift(""),v.length?c.pathname=v.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":17,punycode:12,querystring:15}],17:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],18:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],AppDispatcher:[function(a,b,c){"use strict";var d,e,f,g,h=a("dispatchr")(),i=a("events").EventEmitter;d=new h({}),e={dispatch:function(){d.dispatch.apply(d,arguments)}},f={executeAction:function(){var a=[].slice.call(arguments,1),b=arguments[0];b.apply(null,[e].concat(a))},getStore:function(a){return d.getStore(a)},events:new i},g=function(a){h.registerStore.apply(null,arguments),window._stores=window._stores||{},window._stores[a.storeName]=d.getStore(a)},b.exports={registerStore:g,context:f}},{dispatchr:"dispatchr",events:"events"}],AriaStatus:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"AriaStatus",propTypes:{message:e.PropTypes.string.isRequired,ariaLive:e.PropTypes.string},getDefaultProps:function(){return{ariaLive:"polite"}},componentDidMount:function(){var a=this;a.setText(a.props.message)},componentDidUpdate:function(){var a=this;a.setText(a.props.message)},render:function(){return e.createElement("span",{className:"offscreen",ref:"notificationNode",role:"status","aria-live":this.props.ariaLive})},setText:function(a){this.refs.notificationNode.getDOMNode().textContent=a}}),b.exports=d},{"react/addons":"react/addons"}],BidiSafeFilepath:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("StringUtils");d=e.createClass({displayName:"BidiSafeFilepath",propTypes:{filepath:e.PropTypes.string,tagName:e.PropTypes.string,className:e.PropTypes.string,title:e.PropTypes.string},mixins:[e.addons.PureRenderMixin],
getDefaultProps:function(){return{tagName:"div"}},render:function(){var a,b=this.props.filepath;return"string"==typeof b?(a=f.getFileName(b),e.createElement(this.props.tagName,{className:this.props.className,title:this.props.title,dir:f.getTextDirection(a)},a,this.renderExtension(f.getFileExtension(b)))):null},renderExtension:function(a){return a?e.createElement("span",{ref:"extension",dir:"ltr"},a):void 0}}),b.exports=d},{StringUtils:"StringUtils","react/addons":"react/addons"}],BidiString:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("StringUtils");d=e.createClass({displayName:"BidiString",propTypes:{str:e.PropTypes.string,tagName:e.PropTypes.string},mixins:[e.addons.PureRenderMixin],getDefaultProps:function(){return{tagName:"span"}},render:function(){var a=this.props.str;return"string"==typeof a?e.createElement(this.props.tagName,f.merge({dir:g.getTextDirection(a),children:a},f.omit(this.props,["tagName","dir"]))):null}}),b.exports=d},{StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],BodyDropdown:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("Dropdown");d=e.createClass({displayName:"BodyDropdown",propTypes:{className:e.PropTypes.string,closeDropdown:e.PropTypes.func.isRequired,parentNode:e.PropTypes.instanceOf(HTMLElement),anchorNode:e.PropTypes.instanceOf(HTMLElement),coordinates:e.PropTypes.shape({x:e.PropTypes.number,y:e.PropTypes.number}),dropdownXOrigin:e.PropTypes.oneOf(["left","right"]),dropdownYOrigin:e.PropTypes.oneOf(["top","bottom"])},getDefaultProps:function(){return{dropdownXOrigin:"left",dropdownYOrigin:"top"}},componentWillMount:function(){var a=this;a.container=document.createElement("div"),window.addEventListener("resize",a.props.closeDropdown,!0)},componentDidMount:function(){var a=this,b=a.props,c=a.container;a.dropdown=e.render(e.createElement(f,{className:b.className,anchorNode:b.anchorNode,parentNode:b.parentNode,closeDropdown:b.closeDropdown,onClick:b.onClick},b.children),c),document.body.appendChild(c),a.positionDropdown()},componentWillUnmount:function(){var a=this,b=a.container;e.unmountComponentAtNode(b),document.body.removeChild(b),window.removeEventListener("resize",a.props.closeDropdown,!0)},componentDidUpdate:function(){var a=this;a.dropdown.setProps({parentNode:a.props.parentNode,closeDropdown:a.props.closeDropdown,children:a.props.children})},render:function(){return e.createElement("div",null)},getRTLAwareDirection:function(a){return NeoConfig.isRTL?"left"===a?"right":"left":a},positionDropdown:function(){var a=this,b=a.container,c=a.props.coordinates,d=a.props.anchorNode;if(!c&&!d)throw new Error("Must provide coordinates or an anchorNode");c?a.positionDropdownToCoordinates(c):d&&a.positionDropdownToNode(d),b.clientHeight>=window.innerHeight&&(b.style.top="20px",b.style.bottom="20px"),b.clientWidth>=window.innerWidth&&(b.style.left="20px",b.style.right="20px")},positionDropdownToNode:function(a){var b,c,d=this,e=a.getBoundingClientRect(),f=d.container.style,g=d.getRTLAwareDirection(d.props.dropdownXOrigin),h=window.innerWidth;f.position="fixed",f.zIndex="100000",b=d.dropdown.getDOMNode().scrollWidth,"right"===g?e.right>h+window.scrollX?f.right=h-b-10+"px":e.right<b?f.right=Math.ceil(h-e.left-b)+"px":f.right=Math.ceil(h-e.right)+"px":document.body.clientWidth-window.scrollX<e.left+b?f.left=h-b-10+"px":f.left=e.left+"px",c="bottom"===d.props.dropdownYOrigin?e[d.props.dropdownYOrigin]-a.offsetHeight:e[d.props.dropdownYOrigin]+a.offsetHeight,f.top=c+"px",f.height=window.innerHeight-c-a.offsetHeight+"px"},positionDropdownToCoordinates:function(a){var b,c,d=this,e=d.container,f=e.style;f.position="fixed",f.zIndex="100000",a.x=a.x>0?a.x:0,a.y=a.y>0?a.y:0,b=e.clientWidth+a.x,c=e.clientHeight+a.y,b>window.innerWidth&&(a.x=a.x-(b-window.innerWidth)),c>window.innerHeight&&(a.y=a.y-(c-window.innerHeight)),f.left=a.x+"px",f.top=a.y+"px"}}),b.exports=d},{Dropdown:"Dropdown","react/addons":"react/addons"}],BootcampAPIUtilsV2:[function(a,b,c){"use strict";function d(a){var b={keyword:"WITH_KEYWORD"};return(b[a]||a).toUpperCase()}function e(a){return{url:q.getValue(a,["url"],!1),xTiming:q.getValue(a,["resHeaders","xTiming"],!1),status:a.status,duration:q.getValue(a,["elapsedTime"])}}function f(a){var b="desc",c=a.sortType,d=a.sortOrder;switch(c){case v.MSG_SORT_TYPE_DATE:b="down"===(d||v.MSG_SORT_ORDER_DOWN)?"desc":"asc";break;case v.MSG_SORT_TYPE_ATTACHMENT:b="attachment";break;case v.MSG_SORT_TYPE_RELEVANCE:b="relevance"}return b}function g(a,b,c){var e=q.getValue(a,"response.contentBlock",!1),f=q.getValue(a,"response.srpType"),g=q.getValue(a,"response.heroBlockType"),h=q.getValue(e,"content","");switch(f){case"PLAYING_IT_SAFE":if("NONE"===g&&e.blockType===u.MESSAGES)return!0;if((e.blockType===u.MAIN||e.blockType===g)&&(h.items||[]).length>0)return!0;break;case"LIST":if((e.blockType===u.MAIN||e.blockType===g)&&(h.items||[]).length>0)return!0;break;case"PERSON_SRP":case"people":if(e.blockType===u.MESSAGES)if(c){if(e.filter===d(b)&&(h.items||[]).length>0)return!0}else if(e.filter===d(b))return!0;break;default:if(e.blockType===u.MESSAGES)return!0}return!1}function h(a){var b={MIXED:"links"};return(b[a]||a).toLowerCase()}function i(a){var b={WITH_KEYWORD:"keyword"};return(b[a]||a||"").toLowerCase()}function j(a){var b=w.context.getStore(x);return a.forEach(function(a){var c;"undefined"!=typeof a.folderNumber||"undefined"!=typeof a.folderId?(c=b.findByIndex(a.folderNumber),a.fid=q.getValue(c,["folderInfo","fid"],a.folderId)):"undefined"!=typeof a.mid&&(a.fid="Inbox"),"MESSAGE"===a.itemType&&(a.mid=a.mid||a.id.slice(2),a.id=a.mid),a.creationDate>21459168e5&&(a.creationDate/=1e3)}),a}function k(a,b){var c,d={metaData:e(a),data:{},error:{}},f=!1,k=!1,l=p.parse(a.text,0);return d.metaData.searchType=b.searchType,!l.data||a.status<200||a.status>=300?(d.error={status:a.status,message:a.text},d):(l.data.forEach(function(e){var l,m,n,o,p=q.getValue(e,"response.contentBlock",!1);return 200===e.status&&p?(m=q.getValue(p,"content",""),n=h(q.getValue(p,["content","contentType"],q.getValue(p,"blockType"))),o=i(q.getValue(p,"filter")||"WITH_KEYWORD"),void(n&&(d.data[n]||(d.data[n]={}),d.data[n][o]={totalHits:m.totalHits,offset:(m.items||[]).length?m.offset:void 0,url:q.getValue(p,"url",""),items:j(m.items||[]),spellCorrection:q.getValue(p,"content.suggestedWords",null),resultsFromTrash:q.getValue(m,"resultsFromTrash",null),queryResponse:q.getValue(m,"queryResponse",null)},200===a.status&&n.toUpperCase()===u.MESSAGES&&o===b.defaultFilter&&(c={contentType:n,filter:b.defaultFilter,isEmpty:(m.items||[]).length<=0}),k||(k=g(e,b.defaultFilter,b.isForceUser),k&&(d.metaData.hasMain=!0,d.metaData.main={contentType:n,filter:o,isEmpty:(m.items||[]).length<=0}))))):(401===e.status&&(f=!0),n=h(q.getValue(e,"response.blockType")),o=i(q.getValue(e,"response.filter")),l=q.getValue(e,"response.message",""),void(n&&o&&(d.error[n]||(d.error[n]={}),d.error[n][o]={status:e.status,message:l})))}),200===a.status&&!d.metaData.hasMain&&c&&(d.metaData.hasMain=!0,d.metaData.main=c,"people"===b.searchType&&q.getValue(d,["metaData","main","isEmpty"],!1)&&q.getValue(d,["data",c.contentType,"all","items"],[]).length>0&&(d.metaData.main.filter="all",d.metaData.main.isEmpty=!1)),d.metaData.reAuthenticate=f,d)}function l(a){this.wssid=a.wssid,this.mailboxId=a.mailboxId,this.lmv3Enabled=a.lmv3Enabled,this.searchGDocsEnabled=a.searchGDocsEnabled,this.searchInTrashEnabled=a.searchInTrashEnabled,this.hasMultipleAccounts=a.hasMultipleAccounts,this.bucketId=a.bucketId,this.isForceUser=a.isForceUser,this.searchResultsLinksEnabled=a.searchResultsLinksEnabled,this.searchExtractionsEnabled=a.searchExtractionsEnabled,this.clientId=a.clientId||B,this.bcHost=a.bcHost||"https://prod1.psearch.yahoo.com"}var m,l,n=a("IO"),o=a("lodash"),p=a("./BootcampResponseParser"),q=a("ObjectUtils"),r=a("Utils"),s=a("StringUtils"),t=a("GlobalConstants"),u=a("SearchConstants"),v=a("UserSettingsConstants"),w=a("AppDispatcher"),x=a("FolderStore"),y=a("EnhancedPromise"),z=a("timeUtils").getTimezone(),A=(new Date).getTimezoneOffset(),B="mailsearch";m={SUGG_CACHE_MAX_SIZE:500,SUGG_CACHE_MAX_AGE:3e5,generateKey:function(a){return JSON.stringify(a)},buildCache:function(a,b,c){var d={},e=o.now();return o.size(a)>m.SUGG_CACHE_MAX_SIZE&&(o.each(a,function(a,b){e-a.timestamp<m.SUGG_CACHE_MAX_AGE&&(d[b]=a)}),a=d),a[b]||(a[b]={timestamp:e,data:c}),a},getDataFromCache:function(a,b){if(a[b]){if(o.now()-a[b].timestamp<m.SUGG_CACHE_MAX_AGE)return a[b].data;delete a[b]}},normalizeResponse:function(a,b,c){var d={metaData:e(a),data:{},error:{}},f=[],g=p.parse(a.text,0);return(!g.data||a.status<200||a.status>=300)&&(d.error={status:a.status,message:a.text}),f=q.getValue(g.data[0],["response","suggestions"],[]).filter(function(a){return"PEOPLE"===a.intent}).map(function(a){var b,c=o.values(a.entities)[0];if(c)return b=c.imageUrl?s.addUrlParameters(c.imageUrl,{spsize:"50X50",badge:!0,fallback_url:t.FALLBACK_XOBNI_IMG_URL}):t.FALLBACK_XOBNI_IMG_URL,o.merge({},c,{imageUrl:b,displayStr:c.name,intent:a.intent,emailAddresses:c.emailIds})}),m.buildCache(c,b,f),d.data=f,d}},l.CONSTANTS={PEOPLE_SEARCHTYPE:"people",KEYWORD_SEARCHTYPE:"keyword"},l.CONTENT_TYPES=["messages","photos","documents","links","people","extractions"],l.getSearchType=function(a){var b=l.CONSTANTS;return q.getValue(a,["emailAddresses"],!1)?b.PEOPLE_SEARCHTYPE:b.KEYWORD_SEARCHTYPE},l.prototype.getDefaultUrlParams=function(){var a={timezone:z,tzoffset:A,clientid:this.clientId,mailboxid:this.mailboxId};return(this.lmv3Enabled||this.hasMultipleAccounts)&&(a.lmv3=1,a.oldSearchV2Mids=1),this.searchGDocsEnabled&&(a.allowGoogleDocs=1),this.searchInTrashEnabled&&(a.searchInTrash=1),a},l.prototype.search=function(a){var b,c,e="/v2/srp?",g=this.bcHost+e,h=l.CONSTANTS,i=this.getDefaultUrlParams(),j=l.getSearchType(a),m=this.isForceUser,o=j===h.PEOPLE_SEARCHTYPE,p=function(b){return k(b,{defaultFilter:a.defaultFilter,searchType:j,isForceUser:m})},q={headers:{"Content-Type":"application/json"}},s=["HERO","PEOPLE_RELATED"],t=[];return i.ymreqid=a.reqId,i.bucketid=this.bucketId,i.order=f(a.sortInfo),i.query=[].concat(a.query,a.refinements||[]).join(" "),i.limit=a.limit,a.folders&&a.folders.length?i.folders=a.folders.join(","):a.accountIds&&a.accountIds.length&&(i.accountIds=a.accountIds.join(",")),this.isForceUser||o?(c=["MESSAGES","PHOTOS","DOCUMENTS"],this.searchExtractionsEnabled&&c.push("EXTRACTIONS"),this.searchResultsLinksEnabled&&c.push("LINKS")):c=["MESSAGES"],o?(b=this.isForceUser?["FROM","TO","ALL"]:[d(a.defaultFilter)],a.emailAddresses?i.contentId="smtp:"+a.emailAddresses[0]:a.serviceId&&(i.contentId="x:"+a.serviceId)):(c.push("PEOPLE"),b=["WITH_KEYWORD"]),c.forEach(function(a){b.forEach(function(b){s.push(a+"_"+b)})}),i.expand=s.join(","),g=r.appendToUrl(g,i),n.get(g,t.join(""),q).then(p,p,p)},l.prototype.getSuggestions=function(a){var b,c,d="/v2/suggestions?",e=this.bcHost+d,f=this.getDefaultUrlParams(),g=function(b){return m.normalizeResponse(b,c,a.suggestionsCache)};return c=m.generateKey({query:a.query,email:a.accountemail}),(b=m.getDataFromCache(a.suggestionsCache,c))?y.resolve({metaData:{fromCache:!0},data:b}):(f.ymreqid=a.reqId,f.query=a.query,""!==a.accountemail&&(f.accountemail=a.accountemail),a.fechnpsy&&(f.fechnpsy=a.fechnpsy),e=r.appendToUrl(e,f),n.get(e).then(g,g))},l.prototype.searchItems=function(a){var b,c=this.getDefaultUrlParams(),d=function(a){var b,c={metaData:e(a),data:{},error:{}};try{b=JSON.parse(a.text)}catch(d){}return!b||!b.items||a.status<200||a.status>=300?(c.error={status:a.status,message:a.text},c):(c.data={items:j(b.items),offset:(b.items||[]).length?b.offset:void 0},c)};return b=r.appendToUrl(a.url,c),n.get(b).then(d,d)},l.prototype.batch=function(a,b){var c,d="/v2/batch?",f=this.bcHost+d+a.url,g=this.getDefaultUrlParams(),h={headers:{"Content-Type":"text/plain; charset=utf-8"}},i=function(a){var b={metaData:e(a),data:{},error:{}},c=p.parse(a.text,0);return!c.data||a.status<200||a.status>=300?(b.error={status:a.status,message:a.text},b):(b.data=c.data,b)};for(f=r.appendToUrl(f,g),c=0;c<b.length;c++)b[c].url=b[c].url+"&mailboxid="+this.mailboxId;return n.post(f,b,h).then(i)},l.prototype.getShareableLink=function(a){var b="/v2/items/{id}/shareableLink",c=this.getDefaultUrlParams(),d=this.bcHost+b.replace("{id}",encodeURIComponent(a.id)),e=function(a){var b,c;try{b=JSON.parse(a.text)}catch(d){}return c=!b||!b.shareableLink||a.status<200||a.status>=300?{error:a.text,status:a.status}:{data:b,status:a.status}};return d=r.appendToUrl(d,c),n.get(d).then(e,e)},l.prototype.hideItems=function(a){var b="/v2/items/hide",c=this.bcHost+b,d=this.getDefaultUrlParams(),e={headers:{"Content-Type":"application/json"}},f=function(a){return a},g={itemIds:a};return c=r.appendToUrl(c,d),n.post(c,g,e).then(f)},l.prototype.getExternalAccounts=function(){var a="/v2/contentProviders",b=this.bcHost+a,c=this.getDefaultUrlParams(),d=function(a){var b,c;try{b=JSON.parse(a.text)}catch(d){}return c=!b||a.status<200||a.status>=300?{error:a.text,status:a.status}:{data:b,status:a.status}};return b=r.appendToUrl(b,c),n.get(b).then(d)},l.prototype.disconnectExternalAccount=function(a){var b="/v2/contentProviders/"+encodeURIComponent(a)+"/remove",c=this.bcHost+b,d=this.getDefaultUrlParams(),e={headers:{"Content-Type":"application/json"}},f=function(a){var b,c;try{b=JSON.parse(a.text)}catch(d){}return c=!b||a.status<200||a.status>=300?{error:a.text,status:a.status}:{data:b,status:a.status}};return c=r.appendToUrl(c,d),n.post(c,null,e).then(f)},l.prototype.connectExternalAccount=function(a,b){var c="/v2/contentProviders/"+encodeURIComponent(a),d=this.bcHost+c,e=this.getDefaultUrlParams(),f={headers:{"Content-Type":"application/json"}},g=function(a){var b,c;try{b=JSON.parse(a.text)}catch(d){}return c=!b||a.status<200||a.status>=300?{error:a.text,status:a.status}:{data:b,status:a.status}};return b=b||{},d=r.appendToUrl(d,e),n.post(d,b,f).then(g)},l.prototype._test_={createBootcampFilter:d,createBootcampOrder:f,isSRPMainChunk:g,normalizeContentType:h,normalizeFilter:i,normalizeItems:j,normalizeSearchResponse:k,suggestionsUtils:m},b.exports=l},{"./BootcampResponseParser":10,AppDispatcher:"AppDispatcher",EnhancedPromise:"EnhancedPromise",FolderStore:"FolderStore",GlobalConstants:"GlobalConstants",IO:"IO",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",StringUtils:"StringUtils",UserSettingsConstants:"UserSettingsConstants",Utils:"Utils",lodash:"lodash",timeUtils:"timeUtils"}],Checkbox:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"Checkbox",propTypes:{disabled:e.PropTypes.bool,isMixed:e.PropTypes.bool,isSelected:e.PropTypes.bool,onChange:e.PropTypes.func,title:e.PropTypes.string},mixins:[e.addons.PureRenderMixin],getDefaultProps:function(){return{disabled:!1,isMixed:!1,isSelected:!1,onChange:function(){},title:""}},render:function(){var a=e.addons.classSet({icon:!0,"ui-checkbox":!0,"icon-checkbox-mixed":this.props.isMixed,"icon-checkbox-selected":this.props.isSelected,"icon-checkbox-empty":!(this.props.isMixed||this.props.isSelected)});return e.createElement("span",{tabIndex:this.props.tabIndex||"0",role:"checkbox",className:a,onChange:this.props.onChange,onClick:this.handleSelectionChange,onKeyDown:this.handleSelectionChange,title:this.props.title,"aria-checked":this.getAriaCheckedStatus(),"aria-label":this.props.ariaLabel||this.props.title,disabled:this.props.disabled})},getAriaCheckedStatus:function(){return this.props.isSelected?"true":this.props.isMixed?"mixed":"false"},handleSelectionChange:function(a){"click"!==a.type&&" "!==a.key||this.props.disabled||(a.preventDefault(),this.props.onChange(a))}}),b.exports=d},{"react/addons":"react/addons"}],Context:[function(a,b,c){"use strict";var d=a("react/addons");b.exports={contextTypes:{executeAction:d.PropTypes.func,getStore:d.PropTypes.func,events:d.PropTypes.object},childContextTypes:{executeAction:d.PropTypes.func,getStore:d.PropTypes.func,events:d.PropTypes.object},getContext:function(){return this.context.getStore&&this.context.executeAction&&this.context.events?this.context:this.props.context},getChildContext:function(){var a=this.getContext();return{executeAction:a.executeAction,getStore:a.getStore,events:a.events}},getStore:function(){var a=this.getContext();return a.getStore.apply(a,arguments)},executeAction:function(){var a=this.getContext();return a.executeAction.apply(a,arguments)}}},{"react/addons":"react/addons"}],CopyFunctionWrapper:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash");d=e.createClass({displayName:"CopyFunctionWrapper",propTypes:{copyData:e.PropTypes.string,onClick:e.PropTypes.func,setDisabled:e.PropTypes.func,setActive:e.PropTypes.func},getDefaultProps:function(){return{onClick:f.noop}},getInitialState:function(){return{classes:"",disabled:!1}},componentDidMount:function(){this.state.disabled||this._setUpClipBoard()},componentWillUpdate:function(){this.state.disabled&&this._cleanClipBoard()},componentWillUnmount:function(){this._cleanClipBoard()},render:function(){return e.createElement("div",{className:"copy-func-wrapper"},this.props.children)},_setUpClipBoard:function(){var a=this;yui.use("swfdetect","comms-ui-clipboard-plugin",function(b){return b.SWFDetect.isFlashVersionAtLeast(10,1,0)?void(a.clipboardTimeoutHandle=setTimeout(function(){var c,d=b.comms.ui.ClipBoard;a.isMounted()&&(c=yui.one(a.getDOMNode()),c.plug(d,{moviepath:NeoConfig.copySwfMoviePath}).on("clipboard:load",function(){this.clipboard._movie.setAttribute("data-preventClose","true"),this.on("mouseenter",function(){this.setAttribute("copy",a.props.copyData)},this),this.clipboard.setEvent("mouseOver",function(){a.props.setActive(!0)}),this.clipboard.setEvent("mouseOut",function(){a.props.setActive(!1)}),a.clipboard=this.clipboard,this.clipboard.setEvent("click",function(){c.simulate("click")},!0)}))},0)):void a.props.setDisabled(!0)})},_cleanClipBoard:function(){var a=this;a.clipboardTimeoutHandle&&clearTimeout(a.clipboardTimeoutHandle),a.clipboard&&a.clipboard.hide()}}),b.exports=d},{lodash:"lodash","react/addons":"react/addons"}],DOMUtils:[function(a,b,c){"use strict";var d,e=a("lodash");d={cloneEvent:function(a){return e.clone(a,!0)},halt:function(a){a.stopPropagation(),a.preventDefault()},isDescendant:function(a,b){for(;b&&b!==a;)b=b.parentNode;return!!b},isTextInput:function(a){return a&&("INPUT"===a.tagName||"TEXTAREA"===a.tagName)}},b.exports=d},{lodash:"lodash"}],DateTimeFormatter:[function(a,b,c){"use strict";var d,e=a("lodash"),f=a("../../../../artifacts/lang");d={FULL:strings.str_cfg_dateformat_full_human_readable,COMPACT:strings.str_cfg_dateformat_compact,INFORMAL:strings.str_cfg_dateformat_informal,TIME:strings.str_cfg_dateformat_simple_time,FULL_WITH_SHORTMONTH:strings.str_cfg_dateformat_full_short_month,transform:function(a,b){var c=this;return e.template(b,null,{interpolate:/{([\s\S]+?)}/g})({F:c.getFullMonth(a.getMonth()+1),m:c.toDoubleDigit(a.getMonth()+1),M:c.getAbbrMonth(a.getMonth()+1),n:a.getMonth()+1,d:c.toDoubleDigit(a.getDate()),D:c.getAbbrDay(a.getDay()+1),j:a.getDate(),l:c.getFullDay(a.getDay()+1),y:c.toDoubleDigit(a.getYear()%100),Y:a.getFullYear(),g:c.toInformalHours(a.getHours()),G:a.getHours(),i:c.toDoubleDigit(a.getMinutes()),s:c.toDoubleDigit(a.getSeconds()),A:c.getAMPM(a)})},getAMPM:function(a){return a.getHours()>11?f.str_dateformat_PM_l10n:f.str_dateformat_AM_l10n},getFullMonth:function(a){var b={1:f.str_month_january,2:f.str_month_february,3:f.str_month_march,4:f.str_month_april,5:f.str_month_may,6:f.str_month_june,7:f.str_month_july,8:f.str_month_august,9:f.str_month_september,10:f.str_month_october,11:f.str_month_november,12:f.str_month_december};return b[a]},getAbbrMonth:function(a){var b={1:f.str_monthabbr_january,2:f.str_monthabbr_february,3:f.str_monthabbr_march,4:f.str_monthabbr_april,5:f.str_monthabbr_may,6:f.str_monthabbr_june,7:f.str_monthabbr_july,8:f.str_monthabbr_august,9:f.str_monthabbr_september,10:f.str_monthabbr_october,11:f.str_monthabbr_november,12:f.str_monthabbr_december};return b[a]},getFullDay:function(a){var b={1:f.str_day_sunday,2:f.str_day_monday,3:f.str_day_tuesday,4:f.str_day_wednesday,5:f.str_day_thursday,6:f.str_day_friday,7:f.str_day_saturday};return b[a]},getAbbrDay:function(a){var b={1:f.str_dayabbr_sunday,2:f.str_dayabbr_monday,3:f.str_dayabbr_tuesday,4:f.str_dayabbr_wednesday,5:f.str_dayabbr_thursday,6:f.str_dayabbr_friday,7:f.str_dayabbr_saturday};return b[a]},toInformalHours:function(a){return a>12?a-12:a||12},toDoubleDigit:function(a){return String(a>9?a:"0"+a)}},b.exports=d},{"../../../../artifacts/lang":2,lodash:"lodash"}],Dropdown:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("DOMUtils");d=e.createClass({displayName:"Dropdown",propTypes:{closeDropdown:e.PropTypes.func.isRequired,parentNode:e.PropTypes.instanceOf(HTMLElement)},componentDidMount:function(){var a=this;window.addEventListener("mousedown",a.handleCloseEvent,!0),window.addEventListener("keydown",a.handleKeyDown,!0),window.addEventListener("scroll",a.handleCloseEvent,!0),a.mountTime=Date.now()},componentWillUnmount:function(){var a=this;window.removeEventListener("mousedown",a.handleCloseEvent,!0),window.removeEventListener("keydown",a.handleKeyDown,!0),window.removeEventListener("scroll",a.handleCloseEvent,!0)},shouldComponentUpdate:function(a){return!f.isEqual(this.props,a)},render:function(){var a=this,b=a.props;return e.createElement("div",{className:b.className,onClick:b.onClick},b.children)},isToDebounce:function(){var a=Date.now();return a-this.mountTime<30},shouldClose:function(a){var b=this,c=b.props,d=a;if(a&&a.getAttribute&&a.getAttribute("data-preventClose"))return!1;for(;d.parentNode;){if(d.classList.contains("ui-onboarding"))return!1;d=d.parentNode}return[c.parentNode,c.anchorNode,b.getDOMNode()].filter(f.identity).every(function(b){return!g.isDescendant(b,a)})},handleCloseEvent:function(a){this.isToDebounce()||a.target&&this.shouldClose(a.target)&&this.props.closeDropdown(a)},handleKeyDown:function(a){27===a.keyCode&&(this.props.closeDropdown(a),a.stopPropagation())}}),b.exports=d},{DOMUtils:"DOMUtils",lodash:"lodash","react/addons":"react/addons"}],EnhancedPromise:[function(a,b,c){"use strict";var d,e=a("lodash");d=function(a,b){var c=this;c._cancelFn=b,c._chainedPromises=[],c._state="pending",a instanceof Promise?c._promise=a:c._promise=new Promise(function(b,d){c._resolve=function(){c._state="resolved",b.apply(c._promise,arguments)},c._reject=function(){c._state="rejected",d.apply(c._promise,arguments)},a(c._resolve,c._reject,function(a){c._cancelFn=a}),c.canceled&&c.cancel()}),c.cancel=function(){for(var a=this,b=a;b._parent&&!b._parent.canceled;)b=b._parent;b._cancel()},c._cancel=function(){var a;if(c.canceled=!0,c._chainedPromises.forEach(function(a){a.cancel&&a.cancel()}),"pending"===c._state&&c._reject){if(c._cancelFn)try{a=c._cancelFn()}catch(b){}c._reject(a)}},c.then=function(a,b,e){var f,g=function(a,b){var c=a(b);return c instanceof d&&f._chainedPromises.push(c),c};return f=new d(c._promise.then(a?g.bind(null,a):null,b?g.bind(null,b):null)),f._parent=c,f._onProgress=e,c._chainedPromises.push(f),f},c.progress=function(){var a=arguments;c._chainedPromises.forEach(function(b){var c=a;b._onProgress&&(c=b._onProgress.apply(b,a)),"undefined"!=typeof c&&b.progress.apply(b,[c])})}},d.prototype=Object.create(Promise.prototype),d.prototype.constructor=d,d.resolve=function(a){return new d(function(b){b(a)},e.noop)},d.all=function(a){var b=new d(Promise.all(a));return b._chainedPromises=a,b},b.exports=d},{lodash:"lodash"}],FolderStore:[function(a,b,c){"use strict";function d(a){this.dispatcher=a,yui.on("ds:folder:change",this.regenerateCache,this),yui.on("ds:account:add",this.regenerateCache,this),yui.on("ds:account:change",this.regenerateCache,this),yui.on("ds:account:remove",this.regenerateCache,this),this.setMaxListeners(256)}function e(a){return k?parseInt(a.id,10):a.folderInfo.index}var f=a("lodash"),g=a("events").EventEmitter,h=a("SearchConstants"),i=a("../../../artifacts/lang"),j=a("ObjectUtils"),k=NeoConfig.imapIn,l="EXTERNAL_ALL",m=yui.mail.model.DataStore.Folders;d.prototype={constructor:d,sortSystemFolderComparator:function(a,b){var c,d,e=h.SYSTEM_FOLDER_INDEX;return k?(c=j.getValue(a,"types.0",""),d=j.getValue(b,"types.0","")):(c=j.getValue(a,"folderInfo.fid",""),d=j.getValue(b,"folderInfo.fid","")),e[c]-e[d]},getMoveMenuSystemFolderIndex:function(a){return h.MOVE_MENU_SYSTEM_FOLDERS_INDEX[a]},sortMoveMenuSystemFolder:function(a,b){return a.sortIndex-b.sortIndex},sortByFolderNameComparator:function(a,b){var c,d=j.getValue(a,"folderInfo.name",""),e=j.getValue(b,"folderInfo.name",""),f=0,g=0;for(d=d.split("/"),e=e.split("/"),c=d.length<e.length?d.length:e.length;c>g&&0===f;g++)f=d[g].toLowerCase().localeCompare(e[g].toLowerCase()),0===f&&(f=d[g].localeCompare(e[g]));return f||d.length-e.length},getCache:function(){return this.cache||this.fetch()},all:function(){return this.getCache()},fetch:function(){return this.cache=m.get().filter(this.isNotInvisible)},regenerateCache:function(){this.fetch(),this.emit("change")},isNotInvisible:function(a){return a&&"I"!==a.type},isSearchable:function(a){return k?!f.find(a.types,function(a){return-1!==h.UNSEARCHABLE_TYPES.indexOf(a)}):-1===h.UNSEARCHABLE_FIDS.indexOf(a.folderInfo.fid)},isMoveable:function(a){return k?!f.find(a.types,function(a){return-1!==h.UNMOVEABLE_TYPES.indexOf(a)}):-1===h.UNMOVEABLE_FIDS.indexOf(a.folderInfo.fid)},isSystem:function(a){return a.isSystem},isUserCreated:function(a){return!a.isSystem},getSystemFolders:function(){return this.getCache().filter(this.isSystem)},getSearchableSystemFolders:function(){return this.getSystemFolders().filter(this.isSearchable).sort(function(a,b){return a.folderInfo.index-b.folderInfo.index})},getMoveableSystemFolders:function(){return this.getSystemFolders().filter(this.isMoveable)},getMoveableSystemFoldersInOrder:function(){return this.getMoveableSystemFolders().sort(function(a,b){return a.folderInfo.index-b.folderInfo.index})},getMoveableSystemFoldersByAccount:function(a){return f.chain(this.getMoveableFoldersByAccount(a)).filter(function(a){return a.isSystem}).sortBy(e).value()},getMoveableUserFoldersByAccount:function(a){return f.chain(this.getMoveableFoldersByAccount(a)).filter(function(a){return!a.isSystem}).value()},getSearchableUserFolders:function(){return this.getUserFolders().filter(this.isSearchable)},getUserFolders:function(){return this.getCache().filter(this.isUserCreated)},getSearchableFolders:function(){return f.chain(this.getCache()).filter(this.isSearchable).sortBy(e).value()},findByFolderId:function(a){return f.find(this.all(),function(b){return b.id===a})},findByFID:function(a){return f.find(this.all(),function(b){return b.folderInfo.fid===a})},findByName:function(a){return f.find(this.all(),function(b){return b.folderInfo.name===a})},findSystemFolderByType:function(a,b){return f.find(this.all(),function(c){return b&&b!==c.acctId?!1:j.getValue(c,"types.0","")===a})},findByIndex:function(a){return f.find(this.all(),function(b){return k?b.id&&b.id.toString()===a.toString():b.folderInfo.index.toString()===a.toString()})},getPrimaryFolderByAccount:function(a){return m.getPrimaryFolderByAccount(a)},getFoldersByAccount:function(a){return f.filter(this.getCache(),function(b){return b.acctId===a})},getSearchableSystemFoldersByAccount:function(a){return f.filter(this.getSearchableFoldersByAccount(a),this.isSystem)},getSearchableUserFoldersByAccount:function(a){return f.filter(this.getSearchableFoldersByAccount(a),this.isUserCreated)},getSearchableFoldersByAccount:function(a){return f.filter(this.getFoldersByAccount(a),this.isSearchable)},getMoveableFoldersByAccount:function(a){return f.filter(this.getFoldersByAccount(a),this.isMoveable)},getFoldersByType:function(a){return f.filter(this.getCache(),function(b){return-1!==b.types.indexOf(a)})},getFoldersByTypeAndAccount:function(a,b){return f.filter(this.getCache(),function(c){return-1!==c.types.indexOf(a)&&c.acctId===b})},getLocalizedFolderName:function(a){var b=this.findByFID(a);if(!b)return a;if(j.getValue(b,"types",[]).indexOf(l)>-1)return i.str_folder_allmail;switch(b.folderInfo.fid){case"Inbox":return i.str_folder_inbox;case"Draft":return i.str_folder_drafts;case"Sent":return i.str_folder_sent;case"%40B%40Bulk":return i.str_folder_spam;case"Trash":return i.str_folder_trash;case"%40C%40Chats":return i.str_folder_chats;default:return b.folderInfo.name}},getLocalizedFolderNameById:function(a){var b=this.findByIndex(a),c=j.getValue(b,["types",0]);if(j.getValue(b,"types",[]).indexOf(l)>-1)return i.str_folder_allmail;switch(c){case"INBOX":return i.str_folder_inbox;case"DRAFT":return i.str_folder_drafts;case"SENT":return i.str_folder_sent;case"BULK":return i.str_folder_spam;case"TRASH":return i.str_folder_trash;case"CHAT":return i.str_folder_chats}return this.getLocalizedFolderName(b.folderInfo.fid)}},d.decode=function(a){return window.decodeURIComponent(window.unescape(a))},d.normalizeFid=function(a){var b=a.toLowerCase(),c=this.decode(b);return"@c@chats"===c?b="chats":"@b@bulk"===c&&(b="spam"),b},d.storeName="FolderStore",f.mixin(d.prototype,g.prototype),b.exports=d},{"../../../artifacts/lang":2,ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",events:"events",lodash:"lodash"}],GlobalActions:[function(a,b,c){"use strict";var d,e=a("GlobalConstants");d={saveSmartView:function(a,b){a.dispatch(e.SAVE_SEARCH,b)},smartviewsUpdated:function(a,b){a.dispatch(e.SMARTVIEWS_UPDATE,b)},smartviewsLoaded:function(a,b){a.dispatch(e.SMARTVIEWS_LOADED,b)},showNotification:function(a,b){a.dispatch(e.NOTIFICATION_SHOW,b)},showOnboarding:function(a,b){a.dispatch(e.ONBOARDING_SHOW,b)},dismissOnboarding:function(a,b){a.dispatch(e.METADATA_CHANGE,b),a.dispatch(e.ONBOARDING_DISMISSED,b)},setMetaData:function(a,b){a.dispatch(e.METADATA_CHANGE,b)},changeSettings:function(a,b){a.dispatch(e.SETTINGS_CHANGE,b)},searchWindowResize:function(a,b){a.dispatch(e.SEARCH_WINDOW_RESIZE,b)},searchTabActive:function(a,b){a.dispatch(e.SEARCH_TAB_ACTIVE,b)},searchTabInactive:function(a,b){a.dispatch(e.SEARCH_TAB_INACTIVE,b)},searchTabClose:function(a,b){a.dispatch(e.SEARCH_TAB_CLOSE,b)},appChange:function(a,b){a.dispatch(e.APP_CHANGE,b)},setTabDirty:function(a,b){a.dispatch(e.SET_TAB_DIRTY,b)}},b.exports=d},{GlobalConstants:"GlobalConstants"}],GlobalConstants:[function(a,b,c){"use strict";var d;d={DEFAULT:"default",NOTIFICATION_SHOW:"NOTIFICATION_SHOW",ONBOARDING_SHOW:"ONBOARDING_SHOW",ONBOARDING_DISMISSED:"ONBOARDING_DISMISSED",METADATA_CHANGE:"METADATA_CHANGE",SETTINGS_CHANGE:"SETTINGS_CHANGE",SEARCH_WINDOW_RESIZE:"SEARCH_WINDOW_RESIZE",SAVE_SEARCH:"SAVE_SEARCH",SMARTVIEWS_LOADED:"SMARTVIEWS_LOADED",SMARTVIEWS_UPDATE:"SMARTVIEWS_UPDATE",SEARCH_TAB_ACTIVE:"SEARCH_TAB_ACTIVE",SEARCH_TAB_INACTIVE:"SEARCH_TAB_INACTIVE",SEARCH_TAB_CLOSE:"SEARCH_TAB_CLOSE",APP_CHANGE:"APP_CHANGE",SET_TAB_DIRTY:"SET_TAB_DIRTY",MAIL_APP:"MAIL_APP",CALENDAR_APP:"CALENDAR_APP",CONTACTS_APP:"CONTACTS_APP",NOTEPAD_APP:"NOTEPAD_APP",FALLBACK_XOBNI_IMG_URL:"https://s1.yimg.com/dh/ap/social/profile/profile_a48.png"},b.exports=d},{}],IO:[function(a,b,c){"use strict";function d(a){var b=m.now(),c=new l(function(e,f,g){var h,i=new XMLHttpRequest,j={},k=!1;i.onreadystatechange=function(){var g,l,p,q=i.readyState,r=m.now()-b;if(4===q)if(k=!0,n.getValue(i,"responseURL",!1)&&i.responseURL.match(/\/v2\//)&&(j.xTiming=i.getResponseHeader("x-timing")),h&&clearTimeout(h),i.status>=200&&i.status<300)m.defer(function(){e({text:i.responseText,status:i.status,url:i.responseURL,resHeaders:j,elapsedTime:r})},1);else{try{l=JSON.parse(i.responseText)}catch(s){}if(403===i.status){if(l&&(g=n.getValue(l,"wssid")))return NeoConfig.wssid=g,yui.common.net.SessionMgr.setWssid(g),a.url=a.url.replace(/wssid=[^&]+/,"wssid="+g),void d(a).then(e,f)}else if(401===i.status)return yui.once("net:reloginSuccessful",function(){d(a).then(e,f)}),void yui.common.net.Error.simpleRelogin();if(n.getValue(l,["error","code"],!1)){
try{p=JSON.parse(a.data)}catch(s){}o.statTAE({method:n.getValue(p,"method",""),ymreqid:n.getValue(a,"ymreqid",""),wssid:n.getValue(NeoConfig,"wssid","")},{error:l.error,status:i.status})}f({text:i.responseText,url:i.responseURL,resHeaders:j,status:i.status,elapsedTime:r})}else 3===q&&n.getValue(a,["options","enableStream"],!0)&&m.defer(function(){k||c.progress({text:i.responseText,url:i.responseURL,status:206,resHeaders:j,elapsedTime:r})},1)},i.open(a.method,a.url,!0),Object.keys(a.options).forEach(function(b){var c=a.options[b];"timeout"===b?"undefined"==typeof i.timeout?h=setTimeout(function(){i.abort(),f({text:"timeout",status:801})},c):(i.timeout=c,i.ontimeout=function(){f({text:"timeout",status:801})}):"headers"===b?Object.keys(c).forEach(function(a){i.setRequestHeader(a,c[a])}):i[b]=c});try{a.cors&&(i.withCredentials=!0),"POST"!==a.method||a.data||(a.data=""),i.send(a.data)}catch(l){f({text:l.message,status:802})}g(function(){return i.abort(),{text:"canceled",status:800}})});return c}function e(a){var b={id:"BatchWrapper",uri:a.url,method:a.method};return(a.data||"POST"===a.method)&&(b.payload=a.data||"",b.payloadType="embedded"),b}function f(a){var b,c,d=n.getValue(yui,["common","Utils","settings"]),e=d&&d.value&&d.value("appid","YahooMailNeo")||"YahooMailNeo";return-1===a.indexOf("wssid=")&&(b=-1===a.indexOf("?")?"?":"&",a+=b+"wssid="+NeoConfig.wssid),-1===a.indexOf("ymreqid=")&&(c=yui.common.net.Session.genReqID().toString(),a+="&ymreqid="+c),-1===a.indexOf("appid=")&&(a+="&appid="+e),-1===a.indexOf("bucketid=")&&NeoConfig.expBucketId&&(a+="&bucketid="+NeoConfig.expBucketId),{url:a,ymreqid:c}}function g(a){var b=new l(function(c,d,e){yui.use("tictac-base-batch-transport",function(f){var g=f.Tictac.base.BatchTransport.send({requests:a},{success:function(a,b,d){c({isBatch:!0,response:d})},fail:function(a,b){d({isBatch:!0,error:b})},progress:function(a,c){b.progress({isBatch:!0,error:c})}},null,"&ymreqid="+yui.common.net.Session.genReqID());e&&g&&g.abort&&e(g.abort)})});return b}function h(a){var b,c,h=window.location.protocol+"\\/\\/"+window.location.hostname,i=new XMLHttpRequest,j=!1,k=/^http(s)?:\/\//i,l=f(a.url);return a.url=l.url,a.ymreqid=l.ymreqid,b=a.url,k.test(b)&&(window.location.port&&(h+=":"+window.location.port),h+="($|[/?#])",c=new RegExp(h,"i"),c.test(b)||(j=!0,"undefined"!=typeof i.withCredentials&&(a.cors=!0))),j&&!a.cors?g([e(a)]):d(a)}function i(a,b,c){return c=c||{},"object"===("undefined"==typeof b?"undefined":k(b))&&(b=JSON.stringify(b),c.headers=c.headers||{},c.headers["Content-Type"]||(c.headers["Content-Type"]="application/json")),h({method:"POST",url:a,data:b,options:c})}function j(a,b){return h({method:"GET",url:a,options:b||{}})}var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},l=a("EnhancedPromise"),m=a("lodash"),n=a("ObjectUtils"),o=a("StatService");b.exports={get:j,post:i,sendBatch:g}},{EnhancedPromise:"EnhancedPromise",ObjectUtils:"ObjectUtils",StatService:"StatService",lodash:"lodash"}],ListItem:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash");d=e.createClass({displayName:"ListItem",propTypes:{id:e.PropTypes.any.isRequired,onClick:e.PropTypes.func.isRequired,onActive:e.PropTypes.func,onContextMenu:e.PropTypes.func},getDefaultProps:function(){return{onContextMenu:f.noop}},render:function(){var a,b=this,c=b.props,d={active:c.active};return c.className&&(d[c.className]=!0),a=e.addons.classSet(d),e.createElement("li",{style:c.style,title:c.title,tabIndex:c.tabIndex||"-1",key:c.key,role:c.role,className:a,onClick:b.handleItemClick,onContextMenu:b.handleItemContextMenu},c.children)},componentDidUpdate:function(){var a=this;a.props.active&&(a.props.onActive?a.props.onActive(a):a.getDOMNode().focus())},handleItemClick:function(a){var b=this;b.props.onClick(a,b.props.id)},handleItemContextMenu:function(a){var b=this;b.props.onContextMenu(a,b.props.id)}}),b.exports=d},{lodash:"lodash","react/addons":"react/addons"}],ListNavigation:[function(a,b,c){"use strict";var d={UP_DIRECTION:-1,DOWN_DIRECTION:1,navigate:function(a){var b=this.minIndex||0,c=this.getItems().length-1,d=this.state.selectedIndex+a;return d>c?d=b:b>d&&(d=c),this.setState({selectedIndex:d}),d},navigateDown:function(){return this.navigate(this.DOWN_DIRECTION)},navigateUp:function(){return this.navigate(this.UP_DIRECTION)}};b.exports=d},{}],List:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"List",propTypes:{onKeyDown:e.PropTypes.func},render:function(){var a=this.props;return e.createElement("ul",{className:a.className,tabIndex:a.tabIndex,"data-title":a.dataTitle,onKeyDown:a.onKeyDown,role:a.role},a.children)},focus:function(){this.getDOMNode().focus()}}),b.exports=d},{"react/addons":"react/addons"}],MenuButton:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("Menu");d=e.createClass({displayName:"MenuButton",propTypes:{disabled:e.PropTypes.bool,label:e.PropTypes.node,title:e.PropTypes.string,showChevron:e.PropTypes.bool,dropdownXOrigin:e.PropTypes.oneOf(["left","right"]),dropdownYOrigin:e.PropTypes.oneOf(["top","bottom"]),onOpen:e.PropTypes.func},mixins:[e.addons.PureRenderMixin],getDefaultProps:function(){return{showChevron:!1}},getInitialState:function(){return{isMenuOpen:!1,menuContentConfig:{}}},componentDidMount:function(){this.setState({node:this.getDOMNode()})},render:function(){var a,b=this,c={"search-menu-button":!0,opened:b.state.isMenuOpen};return c[b.props.className]=!0,a=e.addons.classSet(c),e.createElement("button",{className:a,title:b.props.title,role:"button","aria-haspopup":"true","aria-label":b.props.ariaLabel,disabled:b.props.disabled,onMouseDown:b.handleMouseDown,onKeyDown:b.handleKeyDown},b.props.label,b.renderChevron(),b.renderMenu())},renderChevron:function(){return this.props.showChevron?e.createElement("i",{className:"icon icon-chevron-down"}):void 0},renderMenu:function(){var a=this.props;return this.state.isMenuOpen?e.createElement(f,{anchorNode:this.state.node,closeMenu:this.closeMenu,menuContentConfig:this.state.menuContentConfig,keyboardNavDisabled:a.keyboardNavDisabled,ddClassName:a.ddClassName,dropdownXOrigin:a.dropdownXOrigin,dropdownYOrigin:a.dropdownYOrigin},a.children):void 0},openMenu:function(a){var b=this;b.setState({isMenuOpen:!0,menuContentConfig:a||{}}),b.props.onOpen&&b.props.onOpen()},closeMenu:function(a){var b=this;b.setState({isMenuOpen:!1}),a&&"keydown"===a.type&&b.getDOMNode().focus()},toggleMenuVisibility:function(a){var b=this;b.state.isMenuOpen?b.closeMenu(a):b.openMenu()},handleMouseDown:function(a){this.toggleMenuVisibility(a)},handleKeyDown:function(a){a.key&&"Enter"===a.key?(this.toggleMenuVisibility(a),a.stopPropagation()):a.key&&"ArrowDown"===a.key&&(this.openMenu(),a.stopPropagation())},isMenuOpen:function(){return this.state.isMenuOpen}}),b.exports=d},{Menu:"Menu","react/addons":"react/addons"}],MenuItemGroup:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"MenuItemGroup",propTypes:{overflow:e.PropTypes.bool,title:e.PropTypes.string,togglable:e.PropTypes.bool,value:e.PropTypes.string},mixins:[e.addons.PureRenderMixin],getDefaultProps:function(){return{overflow:!1,togglable:!1,title:"",value:""}},render:function(){var a,b=this,c=b.props,d={"search-menu-group":!0,"search-menu-togglable":c.togglable,"search-menu-group-overflow":c.overflow};return d[c.className]=c.className,a=e.addons.classSet(d),e.createElement("section",{className:a,title:c.title,key:c["data-key"],"data-value":c.value},b.renderGroupTitle(),b.props.children)},renderGroupTitle:function(){return this.props.title?e.createElement("header",{className:"search-menu-group-title"},this.props.title):void 0}}),b.exports=d},{"react/addons":"react/addons"}],MenuItem:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash");d=e.createClass({displayName:"MenuItem",propTypes:{onClick:e.PropTypes.func.isRequired,className:e.PropTypes.string,selected:e.PropTypes.bool,title:e.PropTypes.string,disabled:e.PropTypes.bool,menuContentConfig:e.PropTypes.object},getInitialState:function(){return{active:!1,disabled:void 0}},getDefaultProps:function(){return{onClick:f.noop,menuContentConfig:{}}},setDisabled:function(a){this.setState({disabled:a||void 0})},setActive:function(a){this.setState({active:a})},render:function(){var a,b=this,c=b.props,d={"search-menuitem":!0,"menu-active-item":b.state.active,selected:c.selected};return c.className&&(d[c.className]=!0),a=e.addons.classSet(d),e.createElement("div",{className:a,hidden:c.hidden,onClick:c.onClick,"data-value":c.value,"data-disabled":c.disabled||b.state.disabled||void 0,title:c.title,tabIndex:"-1"},e.Children.map(c.children,function(a){return e.isValidElement(a)?e.addons.cloneWithProps(a,{setDisabled:b.setDisabled,setActive:b.setActive,menuContentConfig:b.props.menuContentConfig,closeMenu:b.props.closeMenu}):a}))}}),b.exports=d},{lodash:"lodash","react/addons":"react/addons"}],MenuNavigation:[function(a,b,c){"use strict";var d={UP_DIRECTION:-1,DOWN_DIRECTION:1,navigate:function(a){var b=this,c=b.minIndex||0,d=b.state.menuItemCount-1,e=b.state.focusIndex+a;e>d?e=c:c>e&&(e=d),b.refs[b.itemPrefix+e].getDOMNode().focus(),b.setState({focusIndex:e})},navigateDown:function(){var a=this;a.navigate(a.DOWN_DIRECTION)},navigateUp:function(){var a=this;a.navigate(a.UP_DIRECTION)}};b.exports=d},{}],Menu:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("MenuNavigation"),g=a("BodyDropdown"),h=a("DOMUtils"),i=a("ObjectUtils"),j=e.addons.cloneWithProps;d=e.createClass({displayName:"Menu",propTypes:{closeMenu:e.PropTypes.func.isRequired,dropdownXOrigin:e.PropTypes.oneOf(["left","right"]),dropdownYOrigin:e.PropTypes.oneOf(["top","bottom"]),menuContentConfig:e.PropTypes.object},mixins:[e.addons.PureRenderMixin,f],getDefaultProps:function(){return{ddClassName:"",menuContentConfig:{}}},getInitialState:function(){return{focusIndex:-1,isDropdownOpen:!1,menuItemCount:this.getMenuItemCount(this.props.children)}},componentDidMount:function(){this.props.keyboardNavDisabled||window.addEventListener("keydown",this.handleKeyDown,!0),this.props.ddClassName.indexOf("right-folder-dd search-folder-dropdown")>-1&&this.scrollSelectedItemIntoView()},componentWillUnmount:function(){this.props.keyboardNavDisabled||window.removeEventListener("keydown",this.handleKeyDown,!0)},componentDidUpdate:function(){this.setState({menuItemCount:this.getMenuItemCount(this.props.children)}),this.props.ddClassName.indexOf("right-folder-dd search-folder-dropdown")>-1&&this.scrollSelectedItemIntoView()},scrollSelectedItemIntoView:function(){var a,b,c,d,e=this;for(d in e.refs)if(0===d.indexOf(e.itemPrefix)&&(c=i.getValue(e.refs[d],"props.selected",!1))){b=e.refs[d],b=b&&b.getDOMNode();break}if(b){for(a=b.parentElement;a&&a.clientHeight>=a.scrollHeight;)a=a.parentElement;a&&b.offsetTop>=a.clientHeight-100&&(a.scrollTop=b.offsetTop-25)}},groupPrefix:"group",itemPrefix:"item",render:function(){var a=this,b=a.props,c="search-menu "+a.props.ddClassName;return e.createElement(g,{className:c,anchorNode:b.anchorNode,parentNode:b.parentNode,coordinates:b.coordinates,closeDropdown:b.closeMenu,onClick:b.closeMenu,dropdownXOrigin:b.dropdownXOrigin,dropdownYOrigin:b.dropdownYOrigin},a.addMenuItemRefs(b.children,{itemIndex:-1,groupIndex:-1}))},handleKeyDown:function(a){var b=this;switch(a.keyCode){case 13:-1!==b.state.focusIndex&&(b.refs[b.itemPrefix+b.state.focusIndex].getDOMNode().click(),h.halt(a));break;case 27:b.props.closeMenu(),h.halt(a);break;case 38:b.navigateUp(),h.halt(a);break;case 40:b.navigateDown(),h.halt(a)}},isMenuItemGroup:function(a){return"MenuItemGroup"===a.type.displayName||"MenuItemGroup"===a.props._type},isMenuItem:function(a){return"MenuItem"===a.type.displayName},isEnabled:function(a){return!a.props.disabled},addMenuItemRefs:function(a,b){var c=this;return e.Children.map(a,function(a){var d=c.isMenuItemGroup(a),e=c.isMenuItem(a),f=c.isEnabled(a);return d?(b.groupIndex+=1,j(a,{key:c.groupPrefix+b.groupIndex,ref:c.groupPrefix+b.groupIndex,menuContentConfig:c.props.menuContentConfig,children:c.addMenuItemRefs(a.props.children,b)})):e&&f?(b.itemIndex+=1,j(a,{key:c.itemPrefix+b.itemIndex,ref:c.itemPrefix+b.itemIndex,menuContentConfig:c.props.menuContentConfig,closeMenu:c.props.closeMenu})):e?a:void 0})},getMenuItemCount:function(a){var b=this,c=0;return e.Children.forEach(a,function(a){b.isEnabled(a)&&(b.isMenuItemGroup(a)?c+=b.getMenuItemCount(a.props.children):Array.isArray(a)?c+=b.getMenuItemCount(a):b.isMenuItem(a)&&(c+=1))}),c}}),b.exports=d},{BodyDropdown:"BodyDropdown",DOMUtils:"DOMUtils",MenuNavigation:"MenuNavigation",ObjectUtils:"ObjectUtils","react/addons":"react/addons"}],MessageConstants:[function(a,b,c){"use strict";var d=a("lodash");d.forEach(["SPAM_TYPE_NORMAL","SPAM_TYPE_NOTMINE","SPAM_TYPE_PHISH","SPAM_TYPE_HACKED","MOVE","MOVE_SUCCESS","MOVE_FAILURE","DELETE","DELETE_SUCCESS","DELETE_FAILURE","MARK_READ","MARK_READ_SUCCESS","MARK_READ_FAILURE","MARK_UNREAD","MARK_UNREAD_SUCCESS","MARK_UNREAD_FAILURE","STAR","STAR_SUCCESS","STAR_FAILURE","UNSTAR","UNSTAR_SUCCESS","UNSTAR_FAILURE","REPORT_SPAM","REPORT_SPAM_SUCCESS","REPORT_SPAM_FAILURE","ARCHIVE","RESTORE","UNSUBSCRIBE","ARCHIVE_SUCCESS","ARCHIVE_FAILURE","PRINT","QUICK_FILTER","SET_ENCODING","UNDO","UNDO_SUCCESS","UNDO_FAILURE","MESSAGES_RESTORED","UPDATE_MESSAGES","UPDATE_CONV","PROGRESS_START","PROGRESS_SUCCESS","PROGRESS_FAILURE","PROGRESS_CANCEL","PROGRESS_UPDATE","REDIRECT_MESSAGE","NOTIFICATION_DESTROYED"],function(a){c[a]=a}),c.SPAM_FID="%40B%40Bulk",c.TRASH_FID="Trash",c.MIN_BULK_SIZE=30,c.FILL_SEARCH_RESULTS=["MOVE_SUCCESS","DELETE_SUCCESS","REPORT_SPAM_SUCCESS","ARCHIVE_SUCCESS"]},{lodash:"lodash"}],ObjectUtils:[function(a,b,c){"use strict";var d=a("lodash"),e=function(){return{getValue:function(a,b,c){var e,f,g,h=d.isString(b)?b.split("."):b;for(f=0,g=h.length;g>f;f++){if(e=h[f],!(d.isObject(a)&&e in a))return c;a=a[e]}return a},setValue:function(a,b,c){var e;d.isString(b)&&(b=b.split(".")),b.length>1?(e=b.shift(),this.setValue(a[e]=d.isObject(a[e])?a[e]:{},b,c)):a[b[0]]=c}}}();b.exports=e},{lodash:"lodash"}],Onboarding:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("Context"),g=a("BodyDropdown"),h=a("GlobalActions"),i=a("./OnboardingText.jsx");d=e.createClass({displayName:"Onboarding",mixins:[f,e.addons.PureRenderMixin],_templates:{OnboardingText:i},propTypes:{templateType:e.PropTypes.string,title:e.PropTypes.node,body:e.PropTypes.node,buttonText:e.PropTypes.node,id:e.PropTypes.string,ddClassName:e.PropTypes.string,metaDataKey:e.PropTypes.string.isRequired},getDefaultProps:function(){return{templateType:"OnboardingText",ddClassName:""}},componentDidMount:function(){var a=this;a._yuiEvents=[],a._yuiEvents.push(yui.once("tabChange",function(){setTimeout(a.dismissOnboarding,0)}),yui.once("tab:title",function(){setTimeout(a.dismissOnboarding,0)}))},componentWillUnmount:function(){this._yuiEvents.forEach(function(a){a.detach()})},render:function(){var a=this,b=a.props,c=b.ddClassName;return e.createElement(g,{className:c,anchorNode:b.anchorNode,parentNode:b.parentNode,coordinates:b.coordinates,dropdownXOrigin:b.dropdownXOrigin,dropdownYOrigin:b.dropdownYOrigin,closeDropdown:a.dismissOnboarding,onClick:a.clickOnboarding},e.createElement(a._templates[b.templateType],b))},dismissOnboarding:function(){var a=this,b={};b[a.props.metaDataKey]=!0,a.executeAction(h.dismissOnboarding,b)},clickOnboarding:function(a){-1!==a.target.className.indexOf("onboarding-btn")&&this.dismissOnboarding()}}),b.exports=d},{"./OnboardingText.jsx":6,BodyDropdown:"BodyDropdown",Context:"Context",GlobalActions:"GlobalActions","react/addons":"react/addons"}],RelativeDateFormatter:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("DateTimeFormatter");d=e.createClass({displayName:"RelativeDateFormatter",propTypes:{className:e.PropTypes.string,template:e.PropTypes.string,timestamp:function(a,b){return a[b]&&"Invalid Date"===new Date(a[b]).toString()?new Error("Supplied value is an invalid input for Date()"):void 0}},mixins:[e.addons.PureRenderMixin],render:function(){var a=this,b=a.props.timestamp?new Date(a.props.timestamp):new Date;return e.createElement("time",{className:a.props.className,dateTime:b.toISOString(),title:a.getFullDateTimeString(b)},a.renderDateTime(b))},renderDateTime:function(a){var b=this;return b.props.template?f.transform(a,b.props.template):b.getRelativeDateTime(a)},getFullDateTimeString:function(a){return f.transform(a,f.FULL_WITH_SHORTMONTH)},getRelativeDateTime:function(a){var b=this;return b.isToday(a)?f.transform(a,f.TIME):b.isThisYear(a)?f.transform(a,f.INFORMAL):f.transform(a,f.COMPACT)},isThisYear:function(a){return(new Date).getFullYear()===a.getFullYear()},isToday:function(a){var b=new Date;return this.isThisYear(a)&&b.getMonth()===a.getMonth()&&b.getDate()===a.getDate()}}),b.exports=d},{DateTimeFormatter:"DateTimeFormatter","react/addons":"react/addons"}],SearchConstants:[function(a,b,c){"use strict";var d;d={SEARCH_KEYWORD:"SEARCH_KEYWORD",RESET_SUGGESTION:"RESET_SUGGESTION",SET_QUERY:"SET_QUERY",REMOVE_QUERY:"REMOVE_QUERY",CONTACTS_TAB:"CONTACTS_TAB",CALENDAR_TAB:"CALENDAR_TAB",NOTEPAD_TAB:"NOTEPAD_TAB",OTHER_TAB:"OTHER_TAB",SEARCH_TAB:"SEARCH_TAB",FOLDER_TAB:"FOLDER_TAB",ADV_SEARCH_CONTACT_SUGGEST_TO:"ADV_SEARCH_CONTACT_SUGGEST_TO",ADV_SEARCH_CONTACT_SUGGEST_FROM:"ADV_SEARCH_CONTACT_SUGGEST_FROM",CONTACT_SUGGESTIONS_RECEIVED:"CONTACT_SUGGESTIONS_RECEIVED",BOOTCAMP_SUGGESTIONS_RECEIVED:"BOOTCAMP_SUGGESTIONS_RECEIVED",BOOTCAMP_SUGGESTIONS_FAILURE:"BOOTCAMP_SUGGESTIONS_FAILURE",TRENDING_NOW_TERMS_RECEIVED:"TRENDING_NOW_TERMS_RECEIVED",TRENDING_NOW_TERMS_FAILURE:"TRENDING_NOW_TERMS_FAILURE",SEARCH_START:"SEARCH_START",SEARCH_UPDATE:"SEARCH_UPDATE",SEARCH_SUCCESS:"SEARCH_SUCCESS",SEARCH_FAILURE:"SEARCH_FAILURE",SEARCH_ADS_SUCCESS:"SEARCH_ADS_SUCCESS",CONTACT_PHOTO_SOURCE:"CONTACT_PHOTO_SOURCE",GET_CONTACT_PHOTO_SOURCE:"GET_CONTACT_PHOTO_SOURCE",SEARCH:"SEARCH",LOAD_RECENT_SEARCHES:"LOAD_RECENT_SEARCHES",ADD_RECENT_SEARCH:"ADD_RECENT_SEARCH",REMOVE_RECENT_SEARCH:"REMOVE_RECENT_SEARCH",SEARCH_MESSAGE_VIEW:"SEARCH_MESSAGE_VIEW",SEARCH_PHOTO_VIEW:"SEARCH_PHOTO_VIEW",SEARCH_DOCUMENT_VIEW:"SEARCH_DOCUMENT_VIEW",SEARCH_LINK_VIEW:"SEARCH_LINK_VIEW",FETCH_MORE:"FETCH_MORE",FETCH_MORE_SUCCESS:"FETCH_MORE_SUCCESS",FETCH_MORE_FAILURE:"FETCH_MORE_FAILURE",FILL_SCREEN:"FILL_SCREEN",FILL_SCREEN_SUCCESS:"FILL_SCREEN_SUCCESS",FILL_SCREEN_FAILURE:"FILL_SCREEN_FAILURE",SET_SELECTED_ITEMS:"SET_SELECTED_ITEMS",CLOSE_CURRENT_TAB:"CLOSE_CURRENT_TAB",CHANGE_SEARCH_VIEW:"CHANGE_SEARCH_VIEW",CHANGE_SEARCH_FILTER:"CHANGE_SEARCH_FILTER",CHANGE_FILTER_FETCH_START:"CHANGE_FILTER_FETCH_START",CHANGE_FILTER_FETCH_SUCCESS:"CHANGE_FILTER_FETCH_SUCCESS",CHANGE_FILTER_FETCH_FAILURE:"CHANGE_FILTER_FETCH_FAILURE",CHANGE_VIEW_FETCH_START:"CHANGE_VIEW_FETCH_START",CHANGE_VIEW_FETCH_SUCCESS:"CHANGE_VIEW_FETCH_SUCCESS",CHANGE_VIEW_FETCH_FAILURE:"CHANGE_VIEW_FETCH_FAILURE",SEARCH_TAB_CLOSE:"SEARCH_TAB_CLOSE",CLEAN_UP_SEARCH_RESULTS:"CLEAN_UP_SEARCH_RESULTS",SEARCH_IN_ALL:"SEARCH_IN_ALL",SEARCH_IN_ACCOUNT:"SEARCH_IN_ACCOUNT",SEARCH_IN_FOLDERS:"SEARCH_IN_FOLDERS",SEARCH_IN_SMARTVIEW:"SEARCH_IN_SMARTVIEW",REGEX_IN:/(?:\s|^)in:("[^")]+"|'[^']+'|\S+)(?=\s|$)/g,REGEX_IS:/(?:\s|^)is:("[^")]+"|'[^']+'|\S+)(?=\s|$)/g,REGEX_SANITIZE_HAS_IS_IN_MATCH:/(is:|has:|in:|"|')/g,REGEX_HAS_IS_IN:/(?:\s|^)(has|is|in):("[^"]+"|'[^']+'|\S+)(?=\s|$)/g,REGEX_HAS_IS_IN_ACCOUNT:/(?:\s|^)(has|is|in|account):("[^"]+"|'[^']+'|\S+)(?=\s|$)/g,REGEX_AFTER_BEFORE:/(?:\s|^)(after|before):"?(\d{4}[\/-]\d{1,2}[\/-]\d{1,2})"?(?=\s|$)/g,REGEX_FROM_TO_SUBJECT:/(?:\s|^)(from|to|fromEmail|toEmail|subject):('(?:[^'\\]|\\')*'|"(?:[^"\\]|\\")*"|[^\s]*)(?=\s|$)/g,UNSEARCHABLE_FIDS:["%40B%40Bulk"],UNMOVEABLE_FIDS:["%40C%40Chats","Sent","Draft"],COMMON_TYPES:["INBOX","DRAFT","SENT","TRASH"],UNSEARCHABLE_TYPES:["BULK"],UNMOVEABLE_TYPES:["SENT","DRAFT","CHAT","CHATS"],SAVE_CURRENT_SEARCH:"SAVE_CURRENT_SEARCH",SMARTVIEW_CATEGORIES:["unread","starred","personal","shopping","financial","social","travel"],SMARTVIEW_CATEGORIES_KEYS:["important","me2me","unread","starred","personal","social","shopping","travel","financial"],SYSTEM_FOLDER_INDEX:{INBOX:0,DRAFT:1,SENT:2,ARCHIVE:3,BULK:4,"%40B%40BULK":4,TRASH:5,CHAT:6,CHATS:6,"%40C%40CHATS":6},SYSTEM_FOLDERS_NO_FILTER:["INBOX","BULK","%40B%40BULK"],MOVE_MENU_SYSTEM_FOLDERS_INDEX:{Inbox:0,Archive:1,Spam:2,Trash:3},ONLINE_DOCS_PROVIDER:{gdocs:"gdrive"},FILL_PERMISSION_WINDOW:"FILL_PERMISSION_WINDOW",CLOSE_GDOC_PERMISSION:"CLOSE_GDOC_PERMISSION",MESSAGES:"MESSAGES",PHOTOS:"PHOTOS",DOCUMENTS:"DOCUMENTS",LINKS:"LINKS",DOCS:"DOCS",PEOPLE:"PEOPLE",MAIN:"MAIN",FILTER_ALL:"ALL",FILTER_FROM:"FROM",FILTER_TO:"TO",FILTER_KEYWORD:"WITH_KEYWORD",FILTER_RELATED:"RELATED",CONTACT_ADD:"CONTACT_ADD",PERSON_TOKEN_FALLBACK_IMG_DATA:"'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PHBhdGggZD0iTTUuODIzIDE2Ljc5OGwxNCAuMDAydi0xLjMzNXMuMDktLjg2LTEuNzYyLTEuNjRjLS45MTMtLjM4NC0xLjk5Mi0xLjEyLTMuOTI4LTEuMzU2LjU5Ni0uNDI1Ljg1Ny0xLjMwMiAxLjM2NS0yLjUxOGwuMDIzLS4wNmMuMTE2LjAyLjIzNi4wMi4zMjItLjAzLjIzNS0uMTM4LjM3OC0uODk1LjM4Mi0xLjI2Mi4wMDYtLjU1LS4yODctLjQ5Ny0uMjg3LS40OTdsLS4wMjQtLjAwNWMuMDAyLS4wNDQuMDA1LS4wODcuMDA1LS4xMyAwLS41MTcuMTA1LTEuMzQ4LS4wMzItMS44MDQtLjIxLS43MDYtLjQ2NC0xLjQ4Ni0xLjAyMy0xLjQ4Ni0uNTIgMC0uMTY3LS42MS0uODAyLS44MTMtLjY1NS0uMjEtMS43MzYuMTYtMS45NTQuMTYtLjMxNSAwLTEuMTA4LjIzLTEuNjU1Ljc3Ni0uMzg1LjM4NS0uMzQyLjY1LS41NTQgMS4zNi0uMTQuNDY3LS4wMzIgMS4zMS0uMDMyIDEuODA4IDAgLjA0NC4wMDMuMDg4LjAwNC4xMzItLjAwOCAwLS4wMTUuMDAzLS4wMTUuMDAzcy0uMjkzLS4wNTQtLjI4Ni40OTdjLjAwNC4zNjguMTQ2IDEuMTI0LjM4MiAxLjI2LjA4My4wNS4yLjA1Mi4zMS4wMzMuMDA4LjAxOC4wMTYuMDM2LjAyLjA1NC41MDYgMS4yMDcuNzgzIDIuMDkgMS4zNzMgMi41MTctMS45NTUuMjMtMy4wNDIuOTczLTMuOTYgMS4zNTgtMS44NjMuNzc3LTEuODcgMS41MzItMS44NyAxLjUzMnYxLjQ0NHoiIGZpbGw9IiMxQzg5RkYiLz48L3N2Zz4='"},b.exports=d},{}],SlideShow:[function(a,b,c){"use strict";var d=a("react/addons"),e=d.createClass({displayName:"SlideShow",propTypes:{items:d.PropTypes.array.isRequired,activeIndex:d.PropTypes.number.isRequired,setActiveIndex:d.PropTypes.func.isRequired,visible:d.PropTypes.bool.isRequired,closeSlideShow:d.PropTypes.func.isRequired},closeEvent:null,handleIndexUpdate:function(a){this.props.setActiveIndex(a)},shouldComponentUpdate:function(a){return a.visible!==this.props.visible||a.activeIndex!==this.props.activeIndex||a.items.length!==this.props.items.length},componentDidUpdate:function(){this.props.visible?yui.fire("open-light-document-preview",{type:"DPTYPE_BootCampItems",notifyIndexUpdate:this.handleIndexUpdate,items:this.props.items,activeIndex:this.props.activeIndex}):yui.fire("close-light-document-preview")},componentDidMount:function(){var a=this;this.closeEvent=yui.on("light-document-preview:closed",function(){a.props.closeSlideShow()}),this.props.visible&&yui.fire("open-light-document-preview",{type:"DPTYPE_BootCampItems",notifyIndexUpdate:this.handleIndexUpdate,items:this.props.items,activeIndex:this.props.activeIndex})},componentWillUnmount:function(){this.closeEvent.detach(),yui.fire("close-light-document-preview")},render:function(){return null}});b.exports=e},{"react/addons":"react/addons"}],StatService:[function(a,b,c){"use strict";var d,e=a("lodash"),f=window.NeoConfig||{};d=function(){var a={},b={tags:{colo:f.colo,agent:f.browser}};return{stat:function(a){var c=a;e.isString(a)&&(c={name:a}),yui.use("ymma-stats",function(a){a.fire("util:ymstats",e.merge(c,b))})},statTAE:function(a,b,c){var d,e,g=this,h=b.error.code,i=b.status,j="prod"===f.mailEnv?f.hostName.split(".")[3]:"",k=a.method;yui.use("mail-errormap","mail-error",function(l){d=l.mail.Errormap.getErrorInfo({code:h,method:k,suppressStat:c&&c.suppressStat,suppressNotification:c&&c.suppressNotification}),2!==d.tae&&13!==d.tae||"SaveMessage"!==k&&"SendMessage"!==k||(d.customCode=l.mail.Error.getSendSaveCustomErrorCode(JSON.stringify(b))),g.stat({name:d.suppressStat?"client_error":"ue_client_error",tags:{api:k,tae:d.tae,code:d.customCode||h,farm:f.farm.substr(1),ymreqid:a.ymreqid,colo:j,httpStatusCode:i}}),g.webserviceFail(d.tae,k,h,!d.suppressStat),e={m:(d.suppressStat?"":"UE_")+"DEBUG_TAE:"+(d.tae||"null")+":"+(k||"null")+":"+(h||"null")+":"+f.farm+" ",api:(k||"null")+" ",reason:(h||"null")+" ",errinfo:d,ymreqid:a.ymreqid,wssid:a.wssid,tab:"SEARCH"},g.mailLog(e,1,"tae"+d.tae)})},lighthouseBeaconStat:function(a,b){yui.fire("lhStat:feature_latency",{message:a,duration:b})},timerStart:function(b){a[b]=Date.now()},timerCurrentDuration:function(b){return a[b]&&Date.now()-a[b]},timerComplete:function(b){var c;return a[b]&&(c=Date.now()-a[b],delete a[b]),c},getTimerStart:function(b){return a[b]},featureInvoke:function(a){yui.fire("stat:feature_invoke",e.merge({message:a,feature_group:"search"},b))},featureComplete:function(a){yui.fire("stat:feature_complete",e.merge({message:a,feature_group:"search"},b))},featureFail:function(a){yui.fire("stat:feature_fail",e.merge({message:a,feature_group:"search",api:a,visible:"yes"},b))},featureLatency:function(a,c,d){yui.fire("stat:feature_latency",e.merge({message:a,feature_group:d||"search",value:c},b))},apiLatency:function(a,b,c){yui.fire("stat:feature_latency",e.merge({message:a,feature_group:"search",value:b},c))},webserviceFail:function(a,b,c,d){yui.fire("stat:webservice_fail",{tab:"SEARCH",tae:a,api:b,message:c,visible:d?"yes":"no"})},logRapid:function(a,b){yui.use("search-ult",function(c){c.fire(a,b)})},retention:function(a,b){a&&b?yui.use("common-utils-retention",function(c){c.common.Utils.retention.testAndControlStat(a,b)}):a&&yui.use("common-utils",function(b){b.common.Utils.retentionStat(a)})},mailLog:function(a,b,c){b&&!c&&(c="stat_service_debug"),yui.fire("MailLog",a,b,c)}}}(),b.exports=d},{lodash:"lodash"}],StringUtils:[function(a,b,c){"use strict";var d,e=a("lodash"),f=a("./RTLCharactersRegExp"),g=a("./NeutralCharactersRegExp"),h=a("./ArabicShapingRegExp"),i=h.rightJoiner,j=h.leftJoiner,k="‍";d={hashCode:function(a){var b,c;for(c=0;c<a.length;c++)b=31*b+a.charCodeAt(c)<<0;return b},escapeHtml:function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return(a||"").replace(/[&<>'"]/g,function(a){return b[a]})},startsWith:function(a,b,c){return c=c||0,a.lastIndexOf(b,c)===c},startsWithIgnoreCase:function(a,b,c){return this.startsWith(a.toLowerCase(),b.toLowerCase(),c)},contains:function(a,b,c){return-1!==a.indexOf(b,c)},containsIgnoreCase:function(a,b,c){return this.contains(a.toLowerCase(),b.toLowerCase(),c)},indexOfIgnoreCase:function(a,b,c){return c=c||0,a.toLowerCase().indexOf(b.toLowerCase(),c)},escapeRegExp:function(a){return a.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},capitalize:function(a){return a[0].toUpperCase()+a.slice(1)},stripHTML:function(a){return a.replace(/<\/?.*?>/g,"")},addUrlParameters:function(a,b){var c,d=a;return d?(-1===d.indexOf("?")?d+="?":"&"!==d.charAt(d.length-1)&&(d+="&"),c=Object.keys(b).map(function(a){return[encodeURIComponent(a),encodeURIComponent(b[a])].join("=")}),d+c.join("&")):""},stringReplace:function(a,b){var c=a.split(/({{{?.*?}}}?)/);return"function"==typeof b?c.map(function(a){var c=a.match(/{{([^}]+)}}/);return c?b(c[1].trim()):a}):c.map(function(a){var c=a.match(/{{([^}]+)}}/);return c?b[c[1].trim()]:a})},getTextDirection:function(){var a=new RegExp("^(?:"+g+")*(?:"+f+")"),b=new RegExp("^(?:"+g+")*$");return function(c){var d="ltr";return a.test(c)?d="rtl":b.test(c)&&(d=null),d}}(),getBidiString:function(a,b){var c;if("string"==typeof a){if(c=this.getTextDirection(a)||b,"ltr"===c)return"‪"+a+"‬";if("rtl"===c)return"‬"+a+"‫"}return a},bidiSafeConcatenate:function(a,b){return b=b||"ltr",Array.isArray(a)?e.reduce(a,function(a,c){return a+this.getBidiString(String(c),b)},"",this):a},mightNeedJoiner:function(a){return a.charCodeAt(0)>=1568},nextNeedsJoiner:function(a){return a=a.slice(-1),a&&this.mightNeedJoiner(a)&&j.test(a)},previousNeedsJoiner:function(a){return a=a[0],a&&this.mightNeedJoiner(a)&&i.test(a)},addRTLJoiners:function(a,b){return b=b||k,e.each(a,function(a,c,d){0!==c&&this.previousNeedsJoiner(a)&&this.nextNeedsJoiner(d[c-1])&&(d[c-1]=d[c-1]+b,d[c]=b+d[c]),d[c+1]&&this.nextNeedsJoiner(a)&&this.previousNeedsJoiner(d[c+1])&&(d[c+1]=b+d[c+1],d[c]=d[c]+b)},this),a},getFileName:function(a){return"string"==typeof a?-1!==a.lastIndexOf(".")?a.slice(0,a.lastIndexOf(".")+1):a:""},getFileExtension:function(a){return"string"==typeof a&&-1!==a.lastIndexOf(".")&&a.slice(a.lastIndexOf(".")+1)||""}},b.exports=d},{"./ArabicShapingRegExp":3,"./NeutralCharactersRegExp":4,"./RTLCharactersRegExp":5,lodash:"lodash"}],Template:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash");d=e.createClass({displayName:"Template",mixins:[e.addons.PureRenderMixin],render:function(){var a=this,b=f.template(a.props.tmpl,null)(a.props);return e.createElement("span",{dangerouslySetInnerHTML:{__html:b}})}}),b.exports=d},{lodash:"lodash","react/addons":"react/addons"}],TokenUtils:[function(a,b,c){"use strict";var d,e=a("lodash"),f=a("StringUtils"),g=a("../../../artifacts/lang");d={getTokenText:function(a,b){var c,d,h,i=a||[],j=b||"";if(!i.length)return"";switch(c=e.find(i,function(a){return f.containsIgnoreCase(a,j)})||i[0],i.length){case 1:h=i[0];break;case 2:d=g.str_suggestion_other_email_singular;break;default:d=g.str_suggestion_other_email_plural}return d&&(h=e.template(d,null)({emailAddress:c,number:i.length-1})),h||""}},b.exports=d},{"../../../artifacts/lang":2,StringUtils:"StringUtils",lodash:"lodash"}],TokenizedTypeahead:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("DOMUtils"),h=a("List"),i=a("ListItem"),j=a("Typeahead");d=e.createClass({displayName:"TokenizedTypeahead",propTypes:{items:e.PropTypes.array.isRequired,inputValue:e.PropTypes.string,tokens:e.PropTypes.arrayOf(e.PropTypes.object),itemTemplate:e.PropTypes.func,tokenTemplate:e.PropTypes.func,onFocus:e.PropTypes.func,onKeyUp:e.PropTypes.func,onKeyDown:e.PropTypes.func,onKeyPress:e.PropTypes.func,onChange:e.PropTypes.func.isRequired,onComplete:e.PropTypes.func,getItemValue:e.PropTypes.func,getAriaCountMessage:e.PropTypes.func,getAriaSuggestionMessage:e.PropTypes.func,handleInputHint:e.PropTypes.func,handleDestroyToken:e.PropTypes.func},getInitialState:function(){return{selectedIndex:this.props.tokens?this.props.tokens.length:0}},getDefaultProps:function(){return{tokens:[],inputValue:"",onKeyDown:f.noop,onComplete:function(a,b){return b},tokenTemplate:"div"}},shouldComponentUpdate:function(a,b){return!(f.isEqual(this.props,a)&&f.isEqual(this.state,b))},componentDidUpdate:function(a){f.isEqual(this.props.tokens,a.tokens)||this.setState({selectedIndex:this.props.tokens.length})},render:function(){var a,b=this,c=b.props,d=c.tokens,f=d.length,g=b.state.selectedIndex,h=f>0&&f>g,i={"tokenized-typeahead":!0,tokensSelected:h},k={};return i[c.className]=!!c.className,a=e.addons.classSet(i),c.endPadding&&(NeoConfig.isRTL?k["padding-left"]=c.endPadding:k["padding-right"]=c.endPadding),e.createElement("div",{className:a,style:k},e.createElement("div",{className:"tokenized-typeahead-container"},b.renderTokens(),e.createElement(j,{ref:"typeahead",items:c.items,itemTemplate:c.itemTemplate,onClick:b.handleClick,onFocus:c.onFocus,onSelect:b.handleTextSelection,placeholder:c.placeholder,onKeyUp:c.onKeyUp,onKeyDown:b.handleKeyDown,onKeyPress:c.onKeyPress,onChange:b.handleChange,onComplete:b.handleComplete,getItemValue:c.getItemValue,getAriaCountMessage:c.getAriaCountMessage,getAriaSuggestionMessage:c.getAriaSuggestionMessage,handleInputHint:c.handleInputHint,inputValue:c.inputValue,ariaLabel:c.ariaLabel,onDropdownClose:c.onDropdownClose})))},renderTokens:function(){var a=this.state.selectedIndex,b=this.props.tokens;return b.length>0?e.createElement(h,{className:"typeahead-token-list",onKeyDown:this.handleKeyDown},b.map(function(b,c){var d=e.createElement(this.props.tokenTemplate,{index:c,data:b,isSelected:0>a||a===c,
destroyFunc:this.destroyToken});return e.createElement(i,{key:c,id:c,onClick:this.handleTokenClick},d)},this)):void 0},focus:function(){this.refs.typeahead.focus()},blur:function(){this.refs.typeahead.blur()},handleComplete:function(a,b){this.props.onComplete(a,b)},handleKeyDown:function(a){var b=this,c=b.props.tokens,d=b.state.selectedIndex,e=a.target,f=0===e.selectionStart&&0===e.selectionEnd;if((a.ctrlKey||a.metaKey)&&65===a.keyCode)b.setState({selectedIndex:-1});else if(a.key&&(f||-1!==d))switch(a.key){case"ArrowLeft":f&&b.setState({selectedIndex:Math.max(d-1,0)});break;case"ArrowRight":-1===d?(b.setState({selectedIndex:c.length}),g.halt(a)):d<c.length&&(b.setState({selectedIndex:d+1}),g.halt(a));break;case"Backspace":-1===d?b.destroyAllTokens():c.length&&(d===c.length&&c.length&&f?b.setState({selectedIndex:b.state.selectedIndex-1}):d<c.length&&b.destroyToken(c[d]))}b.props.onKeyDown(a)},handleChange:function(a){var b=this,c=b.props.tokens;-1===b.state.selectedIndex?(c=[],b.destroyAllTokens()):b.state.selectedIndex<c.length&&(c=f.without(c,c[this.state.selectedIndex]),b.destroyToken(c[b.state.selectedIndex])),b.props.onChange(a,c)},handleClick:function(){var a=this;a.setState({selectedIndex:a.props.tokens.length})},handleTokenClick:function(a,b){var c=this;c.refs.typeahead.focus(),c.refs.typeahead.setSelectionRange(0,0),c.setState({selectedIndex:b})},destroyToken:function(a){this.props.handleDestroyToken(a)},destroyAllTokens:function(){var a=this;a.props.tokens.forEach(function(b){a.destroyToken(b)})},isInputFullySelected:function(a){return a.value.length>0&&0===a.selectionStart&&a.selectionEnd===a.value.length},handleTextSelection:function(a){var b=this;b.isInputFullySelected(a.target)?b.setState({selectedIndex:-1}):-1===b.state.selectedIndex&&b.setState({selectedIndex:b.props.tokens.length})}}),b.exports=d},{DOMUtils:"DOMUtils",List:"List",ListItem:"ListItem",Typeahead:"Typeahead",lodash:"lodash","react/addons":"react/addons"}],Token:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("TokenUtils");d=e.createClass({displayName:"Token",propTypes:{data:e.PropTypes.object.isRequired,index:e.PropTypes.number,destroyFunc:e.PropTypes.func,isSelected:e.PropTypes.bool,type:e.PropTypes.string},render:function(){var a,b=this,c=b.props,d={"ui-token":!0,"ui-token-selected":c.isSelected,"ui-token-destroyable":c.destroyFunc};return c.data.className&&(d[c.data.className]=!0),c.data.intent&&(d["ui-token-type-"+c.data.intent.trim().toLowerCase()]=!0),a=e.addons.classSet(d),e.createElement("span",{className:a,title:c.data.emailAddresses?f.getTokenText(c.data.emailAddresses,c.data.keyword):c.data.displayStr,"data-value":c.data.dataValue},b.renderDisplayName(),b.renderCloseButton())},renderCloseButton:function(){var a=this;return a.props.destroyFunc?e.createElement("span",{ref:"close",className:"icon icon-close",onClick:a.destroyToken}):void 0},renderDisplayName:function(){var a,b=this,c=b.props.data,d={"ui-token-text":!0};return c.innerClassName&&(d[c.innerClassName]=!0),a=e.addons.classSet(d),e.createElement("span",{className:a},b.renderThumbnail(),c.displayStr)},renderThumbnail:function(){var a=this,b=a.props.data,c=[];return[b.imageUrl,b.fallbackImageUrl].forEach(function(a){a&&c.push("url("+a+")")}),c.length?e.createElement("figure",{className:"ui-token-thumbnail",style:{"background-image":c.join(", ")}}):void 0},destroyToken:function(a){var b=this;b.props.destroyFunc(b.props.data),a.stopPropagation()}}),b.exports=d},{TokenUtils:"TokenUtils","react/addons":"react/addons"}],Typeahead:[function(a,b,c){"use strict";var d,e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},f=a("react/addons"),g=a("lodash"),h=a("DOMUtils"),i=a("StringUtils"),j=a("./Input.jsx"),k=a("List"),l=a("ListItem"),m=a("Dropdown"),n=a("ListNavigation"),o=a("AriaStatus"),p="⇤";d=f.createClass({displayName:"Typeahead",propTypes:{items:function q(a,b){var c,q=a[b];if(!Array.isArray(q))throw new Error("The `items` prop must be an array.");if(c=q.some(function(a){return"object"===("undefined"==typeof a?"undefined":e(a))})){if(!a.handleInputHint)throw new Error("If an array of items containing objects is used,then you must pass in a `handleInputHint` prop.");if(!a.getItemValue)throw new Error("If an array of items containing objects is used,then you must pass in a `getItemValue` prop.")}},inputValue:f.PropTypes.string,itemTemplate:f.PropTypes.func,onFocus:f.PropTypes.func,onChange:f.PropTypes.func,onClick:f.PropTypes.func,onSelect:f.PropTypes.func,onKeyUp:f.PropTypes.func,onKeyDown:f.PropTypes.func,onKeyPress:f.PropTypes.func,onComplete:f.PropTypes.func,getItemValue:f.PropTypes.func,getAriaCountMessage:f.PropTypes.func,getAriaSuggestionMessage:f.PropTypes.func,handleInputHint:f.PropTypes.func},isComposing:!1,isInputHintVisible:!0,minIndex:-1,mixins:[n],getInitialState:function(){return{selectedIndex:-1,isDropdownOpen:!1,temporaryInputValue:""}},getDefaultProps:function(){return{inputValue:"",items:[],itemTemplate:"div",onChange:g.noop,onKeyUp:g.noop,onKeyDown:g.noop,onKeypress:g.noop,onClick:g.noop,onFocus:g.noop,getAriaCountMessage:g.noop,getAriaSuggestionMessage:g.noop}},shouldComponentUpdate:function(a,b){return!(g.isEqual(this.props,a)&&g.isEqual(this.state,b))},componentWillReceiveProps:function(a){var b,c,d=this,e=a.inputValue,f=a.items;d.state.temporaryInputValue?e!==d.props.inputValue&&d.setState({temporaryInputValue:"",selectedIndex:-1}):(d.state.isDropdownOpen&&0!==f.length?(c=d.handleInputHint(e,f),b=e+(c||"")):b=e,d.setState({fullInputValue:b}))},render:function(){var a,b=this,c=b.props,d=b.state.temporaryInputValue||c.inputValue,e=b.state.fullInputValue,g="",h=i.getTextDirection(d),k={"typeahead-content-box":!0};return b.isInputHintVisible&&e!==d&&!b.getSelectedItem()&&(g=e),"rtl"===h&&g&&(g=p+" "+g),k[c.className]=!!c.className,a=f.addons.classSet(k),f.createElement("div",{className:a},f.createElement("div",{className:"typeahead-input-container"},f.createElement(j,{className:"typeahead-input-grayhint",disabled:!0,value:g,dir:h}),f.createElement(j,{ref:"input",className:"typeahead-input-usertext",onFocus:b.handleInputFocus,onClick:b.handleInputClick,onSelect:c.onSelect,onChange:b.handleInputChange,onKeyUp:c.onKeyUp,placeholder:c.placeholder,onKeyDown:b.handleInputKeyDown,onKeyPress:c.onKeyPress,onCompositionStart:b.handleInputCompositionStart,onCompositionEnd:b.handleInputCompositionEnd,value:d,"aria-label":c.ariaLabel||c.title,dir:h})),b.renderDropdown(),b.renderAriaSuggestionMessage(),b.renderAriaCountMessage())},renderDropdown:function(){var a=this;return a.state.isDropdownOpen&&a.props.items.length>0?f.createElement(m,{parentNode:a.getDOMNode().parentElement,closeDropdown:a.closeDropdown},f.createElement(k,{ref:"typeaheadList",className:"typeahead-list"},a.props.items.map(function(b,c){var d=f.createElement(a.props.itemTemplate,{data:b,inputValue:a.props.inputValue,isSelected:a.state.selectedIndex===c});return f.createElement(l,{key:c,id:c,onClick:a.handleItemClick},d)}))):void 0},renderAriaCountMessage:function(){var a=this;return a.state.isDropdownOpen?f.createElement(o,{message:a.getAriaCountMessage()}):void 0},renderAriaSuggestionMessage:function(){var a=this;return a.state.isDropdownOpen?f.createElement(o,{message:a.getAriaSuggestionMessage()}):void 0},getAriaCountMessage:function(){var a=this;return a.props.getAriaCountMessage(a.props.items.length)||""},getAriaSuggestionMessage:function(){var a=this;return a.props.getAriaSuggestionMessage(a.getSelectedItem())||""},getInputValue:function(){return this.refs.input.getDOMNode().value},getItemValue:function(a){var b=this;return b.props.getItemValue?b.props.getItemValue(a):a},getSelectedItem:function(a){var b=this,c="undefined"!=typeof a?a:b.state.selectedIndex;return b.props.items[c]},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},setSelectionRange:function(a,b){this.refs.input.setSelectionRange(a,b)},shouldDisplayHint:function(a,b){var c=this;return!c.isComposing&&c.isInputHintVisible&&b.length>0&&a.length>0},getMatchingPart:function(a,b){var c=this,d="",e=b[0];return e&&(c.props.handleInputHint?d=c.props.handleInputHint(a,e):i.startsWithIgnoreCase(e,a)&&(d=e)),d},handleInputHint:function(a,b){var c,d=this;return b=b||d.props.items,d.shouldDisplayHint(a,b)&&(c=d.getMatchingPart(a,b))?c.slice(a.length):null},handleInputChange:function(a){var b=this;a.inputValue=b.getInputValue(),b.props.onChange(a)},handleInputKeyDown:function(a){var b,c,d,e,f,g=this,j=a.key,k=g.refs.input,l={key:a.key,type:a.type,target:a.target,altKey:a.altKey,metaKey:a.metaKey,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,value:g.props.inputValue,fullInputValue:g.state.fullInputValue},m=g.props,n=g.state;switch(j){case"Enter":if(a.shiftKey)break;n.isDropdownOpen&&h.halt(a),g.isInputHintVisible=!1,e=m.inputValue.length,k.setSelectionRange(e,e),g.handleInputComplete(l),g.setState({fullInputValue:m.inputValue,isDropdownOpen:!1,selectedIndex:-1});break;case"ArrowLeft":case"ArrowRight":n.temporaryInputValue.length<1&&m.inputValue.length===k.getSelectionEnd()&&m.inputValue.length===k.getSelectionStart()&&n.fullInputValue!==m.inputValue&&-1===n.selectedIndex&&(f=i.getTextDirection(m.inputValue),("ltr"===f&&"ArrowRight"===j||"rtl"===f&&"ArrowLeft"===j)&&(g.handleInputComplete(l),a.preventDefault()));break;case"End":case"Tab":a.shiftKey||null===g.handleInputHint(m.inputValue)||(h.halt(a),g.handleInputComplete(h.cloneEvent(a)));break;case"Escape":break;case"ArrowUp":case"ArrowDown":a.preventDefault(),g.setState({isDropdownOpen:!0}),c="ArrowUp"===j?g.navigateUp():g.navigateDown(),c>=0?(b=g.getItemValue(m.items[c]),d=m.items&&m.items[c].intent,"SEARCH_TRENDING_NOW"!==d&&g.setState({temporaryInputValue:b,fullInputValue:b},function(){k.setSelectionRange(b.length,b.length)})):g.setState({temporaryInputValue:"",fullInputValue:m.inputValue}),a.stopPropagation();break;default:g.isInputHintVisible=!0,g.setState({isDropdownOpen:!0})}a.nativeEvent.stopPropagation(),m.onKeyDown(a)},handleInputFocus:function(){var a=this,b=a.props,c=a.handleInputHint(b.inputValue);a.isInputHintVisible=!0,a.setState({isDropdownOpen:!0,fullInputValue:b.inputValue+(c||"")},function(){b.onFocus()})},closeDropdown:function(){var a=this;a.setState({isDropdownOpen:!1,selectedIndex:-1,temporaryInputValue:"",fullInputValue:a.props.inputValue}),a.isInputHintVisible=!1,"function"==typeof a.props.onDropdownClose&&a.props.onDropdownClose()},handleInputClick:function(a){this.props.onClick(a)},handleItemClick:function(a,b){var c=this;a=h.cloneEvent(a),c.isInputHintVisible=!1,c.setState({selectedIndex:b,isDropdownOpen:!1},function(){c.handleInputComplete(a),c.setState({selectedIndex:-1})})},handleInputComplete:function(a){var b,c=this,d=c.state.selectedIndex,e=a.key;"Enter"!==e&&(d=Math.max(0,d)),b=c.getSelectedItem(d),c.props.onComplete?c.props.onComplete(a,b):"Tab"===e?c.setProps({inputValue:d>-1?b:""}):"ArrowRight"!==e&&"ArrowLeft"!==e||c.setProps({inputValue:c.state.fullInputValue})},handleInputCompositionStart:function(){this.isComposing=!0},handleInputCompositionEnd:function(){this.isComposing=!1},getItems:function(){return this.props.items}}),b.exports=d},{"./Input.jsx":7,AriaStatus:"AriaStatus",DOMUtils:"DOMUtils",Dropdown:"Dropdown",List:"List",ListItem:"ListItem",ListNavigation:"ListNavigation",StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],UserSettingsConstants:[function(a,b,c){"use strict";c.MSG_DENSITY_RELAXED=0,c.MSG_DENSITY_COMPACT=1,c.MSG_DENSITY_OPEN=2,c.TAB="tab",c.RECENT="recent",c.MSG_SORT_TYPE_DATE="date",c.MSG_SORT_TYPE_ATTACHMENT="attachmentcount",c.MSG_SORT_TYPE_RELEVANCE="relevance",c.MSG_SORT_ORDER_UP="up",c.MSG_SORT_ORDER_DOWN="down"},{}],Utils:[function(a,b,c){"use strict";function d(a){setTimeout(a,1e3/60)}var e,f,g=a("lodash"),h=a("url");f="undefined"==typeof window?d:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||d,e=function(){var a={};return{loadPromisesMap:a,loadCSS:function(a){return new Promise(function(b){var c=document.head,d=new Image;d.onerror=function(){var d=document.createElement("link");d.rel="stylesheet",d.href=a,d.onload=b,window.setTimeout(b,200),c.insertBefore(d,c.firstChild)},d.src=a})},loadJS:function(a){return new Promise(function(b){var c=document.createElement("script");c.onload=b,c.src=a,document.head.appendChild(c)})},loadTictac:function(b){return a[b]||(a[b]=yui.mail.ui.Tictacs.loadTictac(b)),a[b]},appendToUrl:function(a,b){var c,d=h.parse(a,!0);return g.size(b)>0&&d&&d.query?(g.each(b,function(a,b){g.isUndefined(d.query[b])&&(d.query[b]=a)}),d.search=null,c=h.format(d)):a},requestAnimationFrame:f.bind(window),detectDirection:function(a,b){var c=b;return yui.Intl.detectDirection&&(c=yui.Intl.detectDirection(a,c)),c}}}(),b.exports=e},{lodash:"lodash",url:16}],"context-mixin":[function(a,b,c){"use strict";var d=a("react/addons");b.exports={childContextTypes:{executeAction:d.PropTypes.func,getStore:d.PropTypes.func,extraPayload:d.PropTypes.object},getChildContext:function(){return{executeAction:this.context.executeAction,getStore:this.context.getStore,extraPayload:this.context.extraPayload}},contextTypes:{executeAction:d.PropTypes.func,getStore:d.PropTypes.func,extraPayload:d.PropTypes.object}}},{"react/addons":"react/addons"}],"dispatchr/utils/BaseStore":[function(a,b,c){"use strict";function d(a){var b=this;b.dispatcher=a,b._hasChanged=!1,b.initialize&&b.initialize()}var e=a("inherits"),f=a("events").EventEmitter,g="change";e(d,f),d.prototype.getContext=function(){return this.dispatcher.getContext()},d.prototype.addChangeListener=function(a){this.on(g,a)},d.prototype.removeChangeListener=function(a){this.removeListener(g,a)},d.prototype.shouldDehydrate=function(){return this._hasChanged},d.prototype.emitChange=function(a){var b=this;b._hasChanged=!0,b.emit(g,a||b)},b.exports=d},{events:"events",inherits:18}],"infinite-scroll":[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=5;d=e.createClass({displayName:"InfiniteScroll",getInitialState:function(){var a=this.props,b=a.items.length*a.itemHeight,c=Math.floor(b/a.itemHeight);return{loading:!1,scrollTop:0,loadThreshold:a.loadThreshold||g,items:a.items,hasMoreItems:a.hasMoreItems,itemHeight:a.itemHeight,itemsPerPage:c,visibleStart:0,visibleEnd:c,displayStart:0,displayEnd:Math.min(2*c,a.items.length)}},componentWillReceiveProps:function(a){var b=this,c=a.itemHeight,d=a.items.length,e=b.getScrollState(c,d);b.setState(f.merge({loading:!1,items:a.items,hasMoreItems:a.hasMoreItems},e))},componentWillMount:function(){var a=this,b=15;a.setState({itemsPerPage:b,visibleEnd:b,displayEnd:Math.min(2*b,a.state.items.length)})},componentDidMount:function(){var a=this,b=a.refs.scrollable.getDOMNode().offsetHeight,c=Math.floor(b/a.state.itemHeight);a.setState({itemsPerPage:c,visibleEnd:c,displayEnd:Math.min(2*c,a.state.items.length)})},getScrollState:function(a,b){var c=this,d=c.state,e=c.refs.scrollable.getDOMNode().scrollTop,f=d.itemsPerPage,g=Math.floor(e/a),h=Math.min(g+f,b),i=Math.max(0,g-f),j=Math.min(h+f,b);return{visibleStart:g,visibleEnd:h,displayStart:i,displayEnd:j,scrollTop:e}},onScroll:function(){var a=this,b=a.state,c=b.itemHeight,d=b.items.length;a.setState(a.getScrollState(c,d),a.loadMore)},_shouldLoad:function(){var a=this.state,b=a.items.length,c=a.displayStart;return!a.loading&&a.hasMoreItems&&b-c<a.loadThreshold*a.itemsPerPage},loadMore:function(){var a=this;a._shouldLoad()&&(a.setState({loading:!0}),a.props.loadMore())},render:function(){var a,b,c,d=this,f=d.props,g=d.state,h=g.itemHeight,i=g.items,j=g.displayStart,k=g.displayEnd,l=j*h,m=Math.max((i.length-1-k)*h,0),n=d.props.LoadMoreComponent,o=[];for(o.push(e.createElement("li",{key:"top",line:"top",style:{height:l}})),a=j;k>a;a++)b=i[a],c=e.createElement("li",{key:"row-"+a,className:f.itemClass,style:{height:h}},e.createElement(b.descriptor,b.props)),o.push(c);return o.push(e.createElement("li",{key:"bottom",line:"bottom",style:{height:m}})),this.state.loading&&this.props.LoadMoreComponent&&o.push(e.createElement("li",{key:"loading"},e.createElement(n,null))),e.createElement("div",{className:this.props.className,ref:"scrollable",onScroll:this.onScroll},e.createElement("ul",{className:"Reset"},o))}}),b.exports=d},{lodash:"lodash","react/addons":"react/addons"}],timeUtils:[function(a,b,c){"use strict";var d=function(){function a(){var a={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-660,1,s":"Pacific/Apia","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Africa/Casablanca","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,1":"Europe/Moscow","180,0":"Asia/Baghdad","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Yerevan","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","840,0":"Pacific/Kiritimati"},b=-1*new Date(2011,0,1,0,0,0,0).getTimezoneOffset(),c=-1*new Date(2011,5,1,0,0,0,0).getTimezoneOffset(),d=b-c,e=[];return 0>d?(e.push(b),e.push(1)):d>0?(e.push(c),e.push(1),e.push("s")):(e.push(b),e.push(0)),a[e.join(",")]||""}return{getTimezone:a}}();b.exports=d},{}]},{},[9]);require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d='#Stencil .search-folder-scope-dd,.search-content button{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.suggestion-adv-search button{background:0 0;border:0;outline:0;margin:0;padding:0}#Stencil .search-folder-scope-dd,.search-content button{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.suggestion-adv-search button{background:0 0;border:0;outline:0;margin:0;padding:0}.suggestion-adv-search,.suggestion-search-trending,.suggestion-search-web{border-top:1px solid #E5E5E5;line-height:3rem}.suggestion-adv-search{padding-right:15px;text-align:right}.menu-active-item .suggestion-adv-search button,.suggestion-adv-search button:focus,.suggestion-adv-search button:hover{color:rgba(117,144,245,.8)}.suggestion-adv-search button:active{color:#7590F5}.suggestion-row,.suggestion-row-icon{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.suggestion-row{cursor:pointer}.suggestion-search-trending{cursor:text}.suggestion-search-trending:hover{background-color:#fff}.suggestion-search-trending{padding-left:14px;font-size:14px;color:#999}.suggestion-row-content,.suggestion-search-web-shortcut{color:gray}.suggestion-row-icon{width:53px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.suggestion-row-icon.icon-search-web{font-size:1.8rem;padding-right:0}.suggestion-row-content{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;text-overflow:ellipsis;position:relative;overflow:hidden}.suggestion-search-web-shortcut{padding-right:15px;padding-left:10px;font-family:inherit}.suggestion-row-icon,.suggestion-search-web-shortcut{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}body{background:0 0}.StencilRoot input,.StencilRoot select,.StencilRoot textarea{box-shadow:none}.StencilRoot table{margin:0}.parens::before{content:\'(\'}.parens::after{content:\')\'}.label-text{color:#7f7f7f}.button-plain{background:none repeat scroll 0 0 transparent;border:none;margin:0;outline:0;padding:0}.customview-callout .callout-default,.gdocs-custom-callout .callout-default{width:342px}#mail-search-btn,#web-search-btn{background-color:#198FFF;border:0;border-radius:2px;box-shadow:#063A93 0 2px 0 0;color:#FFF;line-height:32px;margin:0 0 0 6px;padding-top:0;padding-bottom:0;min-width:117px}#web-search-btn{background-color:#3775DD;box-shadow:#21487F 0 2px 0 0}#Stencil .bdc-g{border-color:#E5E5E5}#Stencil .c-s{color:silver}#Stencil .c-w{color:#fff}#Stencil .c-b{color:#000}#Stencil .c-bb{color:#1C89FF}#Stencil .c-bbb{color:#1567BF}#Stencil .bgc-w{background-color:#fff}#Stencil .bgc-lg{background-color:#f2f2f2}#Stencil .bgc-g{background-color:#ededed}#Stencil .c-n{color:#000}#Stencil .c-g,.icon-light{color:#999}.icon-light:hover{color:#333}#Stencil .ff-h{font-family:"Helvetica Neue","Segoe UI",Helvetica,Arial,"Lucida Grande",sans-serif}#Stencil .bgc-lb,#Stencil button.bgc-lb:active,#Stencil button.bgc-lb:hover{background-color:#198fff}#Stencil .bdrc-lb,#Stencil button.bdrc-lb:active,#Stencil button.bdrc-lb:hover{border-color:#198fff}#Stencil .bgc-db,#Stencil button.bgc-db:active,#Stencil button.bgc-db:hover{background-color:#3775DD}#Stencil .bdrc-db,#Stencil button.bdrc-db:active,#Stencil button.bdrc-db:hover{border-color:#3775DD}#Stencil .bxsh-lb{box-shadow:0 2px #063a93}#Stencil .bxsh-db{box-shadow:0 2px #21487F}#Stencil .bdrs-4{border-radius:4px}#Stencil .bxshb-1{box-shadow:0 1px 1px #CDCDCD}#Stencil .mwpx-860{max-width:860px}#Stencil .miwpx-117{min-width:117px}#Stencil .hpx-30{height:30px}#Stencil .hpx-34{height:34px}#Stencil .hpx-35{height:35px}#Stencil .hpx-36{height:36px}#Stencil .hpx-40{height:40px}#Stencil .lh-10{line-height:10px}#Stencil .lh-14{line-height:14px}#Stencil .lh-30{line-height:30px}#Stencil .lh-40{line-height:40px}#Stencil .wpx-40{width:40px}#Stencil .mt-3{margin-top:3px}#Stencil .bgr-nr{background-repeat:no-repeat}#Stencil .Py-5{padding-top:5px;padding-bottom:5px}#Stencil .pb-26{padding-bottom:26px}#Stencil .Cur-t{cursor:text}#Stencil .fz-12{font-size:1.2rem}#Stencil .fz-14,#Stencil .fz-ms{font-size:1.4rem}.search-autocomplete{-moz-box-sizing:border-box;box-sizing:border-box;z-index:3;position:relative}.search-content{display:table-row}.search-autocomplete{display:table-cell;vertical-align:middle}.search-buttons{display:table-cell}#mail-search-btn{margin-left:6px}#Stencil .adv-search-container{border:1px solid #DDD;border-radius:0 0 3px 3px;margin:0 1px}#Stencil .adv-search-container [dir]{text-align:inherit}#Stencil .lt .adv-search-container{border-width:1px 0}#Stencil #adv-search-from ul,#Stencil #adv-search-to ul{box-shadow:none;border-width:1px 1px;max-height:250px;overflow-y:auto}#Stencil .adv-search-container .typeahead-input:focus,#Stencil .adv-search-container input:focus{border-color:#7590F5;box-shadow:none}#Stencil .adv-search-container input{border-radius:2px}#Stencil .adv-search-container .custom-select::after{margin-top:8px}#Stencil .search-autocomplete .menu-active-item .icon-small-close,#Stencil .search-autocomplete li:hover .icon-small-close{display:block}.adv-search-button:hover,.search-autocomplete .menu-active-item .adv-search-button{border-radius:3px;background-color:#E5E5E5}#Stencil .custom-select select{background-color:transparent!important}#Stencil .offscreen{position:absolute;left:-9999px}#Stencil .search-two-boxes.search-folder-scope-dd.right-folder-dd{width:90px}#Stencil .search-two-boxes.search-folder-scope-dd.right-folder-dd .icon-small-search{left:1px}#Stencil .search-two-boxes.search-folder-scope-dd.right-folder-dd .token-folder-account{width:90px;padding:0 16px 0 24px}#Stencil .search-two-boxes.search-folder-scope-dd.right-folder-dd .token-folder-account .token-folder-account-text{text-align:center}#Stencil .search-two-boxes.search-folder-scope-dd.right-folder-dd .icon-chevron{right:6px}#Stencil .search-two-boxes .search-box-contacts .typeahead-list{left:-90px;right:0;width:351px}#Stencil .search-two-boxes.searchbox-inputarea-container{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:32px;-moz-box-sizing:border-box;box-sizing:border-box}#Stencil .search-two-boxes.searchbox-inputarea-container .search-box-contacts,#Stencil .search-two-boxes.searchbox-inputarea-container .search-box-words{background:#fff;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}#Stencil .search-two-boxes.searchbox-inputarea-container .search-box-words{border-left:1px solid #7590F5}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.search-menu-group-overflow,#Stencil .search-folder-dropdown.right-folder-dd.advanced-search-folder-menu{padding-bottom:10px}#Stencil .search-folder-dropdown.right-folder-dd{padding:0;width:246px;background-color:#fff;margin-top:1px}#Stencil .search-folder-dropdown.right-folder-dd .search-folder-name{text-align:left;font-size:1.3rem;font-weight:400}#Stencil .search-folder-dropdown.right-folder-dd [dir].search-folder-name{text-align:left}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group-overflow{max-height:550px}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.search-folder-scope-adv{float:right;border-top:1px solid #D8DADE;position:relative;width:100%;padding:10px 0 10px 0}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.search-folder-scope-adv span{text-align:right;padding-right:25px}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.search-folder-scope-adv:hover{background-color:#fff;color:#555}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.search-menu-togglable .search-menuitem{padding-left:28px;padding-right:28px}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.search-menu-togglable .search-menuitem.search-in-divider{position:relative;left:28px;width:20px;padding:12px 0 0 0;border-bottom:1px solid #D8DADE}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.search-menu-togglable .search-menuitem.search-in-divider:hover{cursor:auto;background-color:#fff}#Stencil .search-folder-dropdown.right-folder-dd>section.search-menu-group:last-child{padding-top:0}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group{border-bottom:none;margin:0;padding:8px 0 0 0}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.dropdown-menu-title{padding:4px 0 0 0}#Stencil .search-folder-dropdown.right-folder-dd .search-in-title .search-menu-group-title{padding-left:28px;padding-right:28px;color:#000}#Stencil .search-folder-dropdown.right-folder-dd .search-in-title>.search-menu-group-title{padding-bottom:7px;padding-top:7px}#Stencil .search-folder-dropdown.right-folder-dd .dropdown-menu-title:hover{background-color:#fff;cursor:auto}#Stencil .search-folder-dropdown.right-folder-dd .dropdown-menu-title{font-size:11px}#Stencil .search-folder-dropdown.right-folder-dd .dropdown-menu-title .search-menu-group-title{padding-left:40px;padding-right:40px;color:#000}#Stencil .search-folder-dropdown.right-folder-dd .account-menu-item,#Stencil .search-folder-dropdown.right-folder-dd .account-menu-item.search-menuitem,#Stencil .search-folder-dropdown.right-folder-dd .account-menu-item.search-menuitem.selected,#Stencil .search-folder-dropdown.right-folder-dd .all-account-menu-item,#Stencil .search-folder-dropdown.right-folder-dd .all-account-menu-item.search-menuitem.selected,#Stencil .search-folder-dropdown.right-folder-dd .dropdown-menu-title{font-weight:700;color:#444}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.selected::before{right:-webkit-calc(100% - 24px);right:-moz-calc(100% - 24px);right:calc(100% - 24px);top:60%}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.selected{font-weight:400}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem{padding-top:2px;color:#444}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem{padding-top:2px;color:#444}#Stencil .search-folder-scope-dd.right-folder-dd.advanced-search-folder-menu{width:100%;max-width:100%;border-radius:2px;border:solid 1px #CCC}#Stencil .search-folder-scope-dd.right-folder-dd.advanced-search-folder-menu .token-folder-account{float:left;padding:0 5px 0 5px}#Stencil .search-folder-scope-dd.right-folder-dd.advanced-search-folder-menu .token-folder-account .token-folder-account-text{color:#000}#Stencil .search-folder-scope-dd.right-folder-dd.advanced-search-folder-menu .icon.icon-small-search{display:none}#Stencil .search-menu.advanced-search-folder-menu{width:480px;border-radius:4px}#Stencil .search-menu.advanced-search-folder-menu>section.search-menu-group:last-child{display:none}#Stencil .search-menu.advanced-search-folder-menu .search-menuitem{max-width:100%}#Stencil .tokenized-typeahead.right-folder-dd .tokenized-typeahead-container{border:none}#Stencil .tokenized-typeahead.right-folder-dd .typeahead-list{margin-top:1px}#Stencil .right-folder-dd .search-box-inner{border:1px solid #7590F5}#Stencil .search-folder-scope-dd.right-folder-dd{position:relative;display:inline-block;float:left;padding:0;height:32px;max-width:140px;cursor:pointer;border-right:1px solid #D8DADE;border-top:none;border-bottom:none;border-left:none}#Stencil .search-folder-scope-dd.right-folder-dd span{padding:0;color:#B9BDC5;vertical-align:top}#Stencil .search-folder-scope-dd.right-folder-dd .token-folder-account{max-width:140px;display:inline-block;padding:0 22px 0 34px;-moz-box-sizing:border-box;box-sizing:border-box}#Stencil .search-folder-scope-dd.right-folder-dd .token-folder-account .token-folder-account-text{display:block;color:#787D82;font-size:14px;max-width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}#Stencil .search-folder-scope-dd.right-folder-dd .icon-small-search{position:absolute;left:8px;top:6px;font-size:25px;line-height:22px}#Stencil .search-folder-scope-dd.right-folder-dd .icon-chevron{position:absolute;right:8px}#Stencil .search-folder-scope-dd.right-folder-dd .search-menuitem.selected{position:relative}#Stencil .search-folder-scope-dd.right-folder-dd .search-menuitem.selected::before{position:absolute;left:10px;top:50%;font-size:20px}#Stencil .search-folder-scope-dd{background:#FFF;border:1px solid #7590F5;border-left:0;-moz-box-sizing:border-box;box-sizing:border-box;color:#000;outline:0;margin:0;padding:0 26px 0 0;position:absolute;right:0;top:0;z-index:1;height:34px;max-width:120px}#Stencil .search-folder-scope-dd::-moz-focus-inner{padding:0;border:0}#Stencil .search-folder-scope-dd .icon-chevron,#Stencil .search-folder-scope-dd .search-folder-name{color:#7590F5;line-height:34px}#Stencil .search-folder-scope-dd .search-folder-name{font-size:1.3rem;padding-left:10px;-moz-transform:translateY(-1px)}.search-content button:active .icon-chevron,.search-content button:focus .icon-chevron,.search-content button:hover .icon-chevron{opacity:1}.search-content button.opened .icon-chevron::before{content:"\\e056"}.search-content button .icon-chevron{letter-spacing:-12px;line-height:inherit;opacity:.5;padding:0;position:absolute;top:0;right:10px;-moz-transform:translateY(1px);-webkit-transition:opacity .2s ease-in-out;-moz-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.search-content button .icon-chevron::before{content:"\\e055";position:relative;left:-6px;top:1px}.search-folder-name{-moz-box-sizing:border-box;box-sizing:border-box;display:block;max-width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}@media all and (max-height:740px){#Stencil .search-menu.right-folder-dd.search-folder-dropdown .search-menu-group-overflow{max-height:none}}';a("./../../../jarvis/node_modules/cssify")(d,void 0,"/var/builds/workspace/49376-v3-package/BUILD_CONTAINER/container/label/DOCKER-LOW/app_root/artifacts/css/main.css"),b.exports=d},{"./../../../jarvis/node_modules/cssify":18}],2:[function(a,b,c){"use strict";var d={str_account_folder:"{{account}}/{{folder}}",str_advanced_mail_search:"Advanced mail search",str_advanced_search:"Advanced search",str_all_accounts:"All accounts",str_all:"All",str_all_email_types:"All email types",str_all_except_trash:"All except Trash",str_all_folders:"All folders",str_all_mail:"All mail",str_any_time:"Any time",str_better:"better",str_branding_google_drive:"Google Drive",str_branding_mail:"Yahoo Mail",str_branding:"Yahoo",str_close:"Close",str_cloud_storage_providers_body:"Save time searching for documents by connecting your Google Drive account to Yahoo Mail.",str_cloud_storage_providers_header:"Include files from your Google Drive",str_connect:"Connect now",str_contact_suggestion_onboarding_description:"Click this contact for a {{better}} search results.",str_contact_suggestion_onboarding_title:"Smart contacts",str_contains:"Contains",str_custom_date:"Custom date…",str_custom_view_callout_text:"You have searched for <strong>{{query}}</strong> {{count}} times. Save the term for quicker access.",str_date:"Date",str_drive:"Drive",str_financial:"Finance",str_folder_bulk:"Spam",str_folder_chats:"Instant Messages",str_folder_draft:"Drafts",str_folder_drafts:"Drafts",str_folder:"Folder",str_folder_inbox:"Inbox",str_folder_search_onboarding_description:"Click the arrow to search in {{folders}} and for more search options.",str_folder_search_onboarding_title:"Search smarter",str_folder_sent:"Sent",str_folders:"Folders",str_folders_lowercase:"folders",str_folder_spam:"Spam",str_folder_trash:"Trash",str_from:"From",str_has_attachment:"Has attachment",str_has_image:"Has image",str_important:"Important",str_in_the_last_30_days:"In the last 30 days",str_in_the_last_7_days:"In the last 7 days",str_later:"Maybe later",str_me2me:"Me",str_not_now:"Not Now",str_onboarding_got_it_btn:"Got it",str_personal:"People",str_reminders:"Reminders",str_saved_search:"Saved Search",str_save:"Save",str_search_add_keyword:"Add Keywords",str_search_advanced:"Press enter to open the advanced search pane",str_searchbox_contact:"Contact Name",str_searchbox_keywords:"Keywords",str_search_btn:"Search",str_search_calendar:"Search Calendar",str_search_contacts:"Search Contacts",str_search_for_contact:"Search mailbox for the contact {{ contactName }}",str_search_for_recent:"Search mailbox for the recent search {{ keyword }}",str_search_in_account:"Search in {{accountName}}",str_search_in_folder:"Search in:",str_search_in:"Search in",str_search_mail_for:"Search mailbox for the keyword {{ keyword }}",str_search_mail:"Search Mail",str_search_notepad:"Search Notepad",str_search:"Search",str_search_trending_now:"Trending on Yahoo",str_search_web_for:'Search the web for "{{ keyword }}"',str_search_web:"Search Web",str_shopping:"Shopping",str_smartviews:"Smart Views",str_social:"Social",str_starred:"Starred",str_subject:"Subject",str_suggestions_available:"{{ count }} suggestions are available. Use the up and down arrow keys to navigate.",str_suggestions_not_available:"No suggestions are available.",str_to_lowercase:"to",str_to:"To",str_travel:"Travel",str_type:"Type",str_unread:"Unread",str_web_search_shortcut:"Shift + Enter",str_web_search:"Web search",last:null};b.exports=d},{}],3:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("SearchConstants"),h=a("../mixins/DropdownMixin"),i=a("Context"),j=a("FolderStore"),k=a("SearchQuery"),l=a("./ContactTypeAhead.jsx"),m=a("../dropdown/FolderDropdownV3.jsx"),n=a("../../../../artifacts/lang"),o=a("DOMUtils");d=e.createClass({displayName:"AdvancedSearch",propTypes:{query:e.PropTypes.shape({keyword:e.PropTypes.string.isRequired}),onQuery:e.PropTypes.func.isRequired},mixins:[e.addons.LinkedStateMixin,h,i],getInitialState:function(){return{dateValue:""}},componentDidMount:function(){var a=this;a.prepopulateInputs(a.props.query),a.focusFirstElement()},render:function(){var a=this,b=e.addons.classSet({Dn:"custom"!==a.state.dateValue}),c="Btn default miwpx-117 bgc-lb bdrc-lb Mt-14 Bgi-n c-w Mend-6 Bdrs-6 bxsh-lb Va-t Py-5 hpx-30";return e.createElement("div",null,e.createElement("button",{className:"button-plain Fl-end Mx-14 Mt-14 Mb-6",title:n.str_close,onClick:a.props.setClosed},e.createElement("span",{className:"icon icon-small-close icon-light lh-10 Pend-0"})),e.createElement("form",{className:"c-b Bgc-w Px-20 Pt-0 pb-26 adv-search-container",onKeyDown:a.handleKeyDown,onChange:a.handleChange,onSubmit:a.handleSubmit},e.createElement("table",{className:"W-100",role:"presentation"},e.createElement("col",{width:"75px"}),e.createElement("col",null),this.renderAccountFolderSelection(),e.createElement("tr",{role:"presentation"},e.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},n.str_from),e.createElement("td",{role:"presentation",className:"Pstart-0",id:"adv-search-from",onKeyDown:a.handleFromKeyDown},e.createElement(l,{ref:"from",peopleSuggestions:this.props.peopleSuggestions,accounts:this.props.accounts,id:g.ADV_SEARCH_CONTACT_SUGGEST_FROM,onChange:a.handleChange}))),e.createElement("tr",{role:"presentation"},e.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},n.str_to),e.createElement("td",{role:"presentation",className:"Pstart-0",id:"adv-search-to"},e.createElement(l,{ref:"to",peopleSuggestions:this.props.peopleSuggestions,accounts:this.props.accounts,id:g.ADV_SEARCH_CONTACT_SUGGEST_TO,onChange:a.handleChange}))),e.createElement("tr",{role:"presentation"},e.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},e.createElement("label",{htmlFor:"adv-search-subject"},n.str_subject)),e.createElement("td",{role:"presentation",className:"Pstart-0"},e.createElement("input",{type:"text",ref:"subject",id:"adv-search-subject",className:"W-100 Py-6 My-4"}))),e.createElement("tr",{role:"presentation"},e.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},e.createElement("label",{htmlFor:"adv-search-contains"},n.str_contains)),e.createElement("td",{role:"presentation",className:"Pstart-0"},e.createElement("input",{type:"text",ref:"contains",id:"adv-search-contains",className:"W-100 Py-6 My-4"}))),e.createElement("tr",{role:"presentation"},e.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},e.createElement("label",{htmlFor:"adv-search-date"},n.str_date)),e.createElement("td",{role:"presentation",className:"Pstart-0 Va-m"},e.createElement("div",{className:"custom-select W-100"},e.createElement("select",{className:"W-100 Py-6 My-4",ref:"date",id:"adv-search-date",valueLink:a.linkState("dateValue")},e.createElement("option",{value:""},n.str_any_time),e.createElement("option",{value:"week"},n.str_in_the_last_7_days),e.createElement("option",{value:"month"},n.str_in_the_last_30_days),e.createElement("option",{value:"custom"},n.str_custom_date))))),e.createElement("tr",{role:"presentation",className:b},e.createElement("td",{role:"presentation",className:"Va-m Pstart-0"}),e.createElement("td",{role:"presentation",className:"Pstart-0 Va-m"},e.createElement("div",null,e.createElement("div",{className:"D-ib"},e.createElement("input",{className:"Py-6 My-4",type:"text",size:"12",maxLength:"10",placeholder:"YYYY/MM/DD",ref:"fromDate"})),e.createElement("span",{className:"D-ib Mx-10"},n.str_to_lowercase),e.createElement("div",{className:"D-ib"},e.createElement("input",{className:"Py-6 My-4",type:"text",size:"12",maxLength:"10",placeholder:"YYYY/MM/DD",ref:"toDate"}))))),e.createElement("tr",{role:"presentation"},e.createElement("td",{role:"presentation",className:"Pstart-0"}),e.createElement("td",{role:"presentation",className:"Pstart-0"},e.createElement("label",{className:"cbox Mt-10"},e.createElement("input",{type:"checkbox",ref:"attachment",id:"adv-search-attachment"}),e.createElement("span",{className:"icon c-b"}),e.createElement("span",{className:"text"},n.str_has_attachment)))),e.createElement("tr",{role:"presentation"},e.createElement("td",{role:"presentation",className:"Pstart-0"}),e.createElement("td",{role:"presentation",className:"Pstart-0"},e.createElement("label",{className:"cbox Mt-10"},e.createElement("input",{type:"checkbox",ref:"image",id:"adv-search-image"}),e.createElement("span",{className:"icon c-b"}),e.createElement("span",{className:"text"},n.str_has_image)))),e.createElement("tr",{role:"presentation"},e.createElement("td",{role:"presentation",className:"Pstart-0"}),e.createElement("td",{role:"presentation",className:"Pstart-0"},e.createElement("button",{onKeyDown:a.handleButtonKeyDown,type:"submit",ref:"advSearchBtn",className:c},n.str_search_mail))))))},renderAccountFolderSelection:function(){var a=this.props;return e.createElement("tr",{role:"presentation",onClick:o.halt},e.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},n.str_search_in),e.createElement("td",null,e.createElement(m,{ref:"advancedFolderMenu",className:"advanced-search-folder-menu",query:a.query,accounts:a.accounts,currentAccount:a.currentAccount,smartViews:a.smartViews,isRTL:a.isRTL,isImapinEnabled:a.isImapinEnabled,onSelect:a.onQuery})))},handleSubmit:function(a){var b=this;b.props.handleMailSearch("search_box_adv_search"),b.props.setClosed(),o.halt(a)},handleChange:function(){var a=this,b=a.refs,c={from:b.from.getInputValue(),to:b.to.getInputValue(),subject:b.subject.getDOMNode().value,contains:b.contains.getDOMNode().value,date:b.date.getDOMNode().value,folder:b.folder&&b.folder.getDOMNode().value,type:b.type&&b.type.getDOMNode().value,attachment:b.attachment.getDOMNode().checked,image:b.image.getDOMNode().checked,fromDate:b.fromDate.getDOMNode().value,toDate:b.toDate.getDOMNode().value};a.setContainerValue(a.convertToQueryObject(c))},setContainerValue:function(a){var b=this,c=b.props.query;b.props.onQuery(new k({keyword:a.keyword,suggestion:c.suggestion,folders:a.folders?a.folders:c.folders,refinements:a.refinements?a.refinements:c.refinements,smartviews:a.smartviews?a.smartviews:c.smartviews}))},handleButtonKeyDown:function(a){"Tab"!==a.key||a.shiftKey||(this.focusFirstElement(),o.halt(a))},handleFromKeyDown:function(a){"Tab"===a.key&&a.shiftKey&&(this.refs.advSearchBtn.getDOMNode().focus(),o.halt(a))},handleKeyDown:function(a){"Escape"===a.key&&this.props.setClosed(),a.stopPropagation()},appendSearchQuery:function(a,b,c){c.match(/\s/)&&b?a.push(b+'"'+c+'"'):a.push(b+""+c)},convertToQueryObject:function(a){var b,c,d,e,f,g,h=this,i=h.getStore(j),k=yui.common.Utils.features.enabled("LMV3"),l=[];return a.from&&h.appendSearchQuery(l,"from:",a.from),a.to&&h.appendSearchQuery(l,"to:",a.to),a.subject&&h.appendSearchQuery(l,"subject:",a.subject),a.contains&&h.appendSearchQuery(l,"",a.contains),"*trash"===a.folder?d=[]:a.folder&&(b=i.findByFID(a.folder),d=[{displayName:i.getLocalizedFolderNameById(b.id||b.folderInfo.index.toString()),acctIds:null,folderIds:[b.id||b.folderInfo.index.toString()]}]),a.type&&(c=["is:"+a.type]),a.attachment&&h.appendSearchQuery(l,"has:attachment",""),a.image&&h.appendSearchQuery(l,"has:image",""),a.date&&(e=new Date,"week"===a.date?(g=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate(),e.setDate(e.getDate()-7),f=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()):"month"===a.date?(g=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate(),e.setDate(e.getDate()-30),f=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()):"custom"===a.date&&(f=a.fromDate,g=a.toDate),f&&(k?h.appendSearchQuery(l,"after:",'"'+f+'"'):h.appendSearchQuery(l,"after:",f)),g&&(k?h.appendSearchQuery(l,"before:",'"'+g+'"'):h.appendSearchQuery(l,"before:",g))),{keyword:l.join(" "),folders:d,refinements:c}},focusFirstElement:function(){this.refs.from.focus()},matchFromToSubject:function(a,b){var c=this.refs;return b.match(/\s/)&&(b=b.replace(/(['"])(.*)\1/,"$2").replace(/\\(['"])/g,"$1")),"subject"===a?c[a].getDOMNode().value=b:c[a].setInputValue(b),!0},matchDates:function(a,b){var c=this.refs;return isNaN(new Date(b).getTime())?!1:(this.setState({dateValue:"custom"},function(){"after"===a?c.fromDate.getDOMNode().value=b:c.toDate.getDOMNode().value=b,this.handleChange()}),!0)},matchHas:function(a,b){var c,d=this,e=d.refs,f=[];return c=b.match(/(["'])(.*)\1/),c&&(b=c[2]),"has"===a&&(f=["attachment","image"]),f.indexOf(b)>=0?("has"===a&&(e[b].getDOMNode().checked=!0),!0):!1},runRegularExpression:function(a,b,c){for(var d=a.exec(b),e=b;d;)c(d[1],d[2])&&(e=e.replace(d[0],"")),d=a.exec(b);return e},prepopulateInputs:function(a){var b,c,d=this,e=a.keyword||"",h=d.getStore(j),i=d.refs;d.props.folder&&i.folder&&(i.folder.getDOMNode().value=d.props.folder),e=d.runRegularExpression(g.REGEX_FROM_TO_SUBJECT,e,d.matchFromToSubject),e=d.runRegularExpression(g.REGEX_AFTER_BEFORE,e,d.matchDates),e=d.runRegularExpression(g.REGEX_HAS_IS_IN,e,d.matchHas),c=f.find(a.refinements,function(a){var b=a.trim(),c=b.split(":");return"is"===c[0]}),c&&i.type&&(i.type.getDOMNode().value=c.trim().split(":")[1]),b=f.find(a.folders,function(a){return!f.isEmpty(a.folderIds)}),b&&i.folder&&(b=h.findByIndex(b.folderIds[0]),i.folder.getDOMNode().value=b.folderInfo.fid),i.contains.getDOMNode().value=e.replace(/\s+/," ").trim(),d.handleChange()}}),b.exports=d},{"../../../../artifacts/lang":2,"../dropdown/FolderDropdownV3.jsx":10,"../mixins/DropdownMixin":11,"./ContactTypeAhead.jsx":5,Context:"Context",DOMUtils:"DOMUtils",FolderStore:"FolderStore",SearchConstants:"SearchConstants",SearchQuery:"SearchQuery",lodash:"lodash","react/addons":"react/addons"}],4:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("StringUtils");d=e.createClass({displayName:"ContactSuggestion",render:function(){var a=e.addons.classSet({Ell:!0,"menu-active-item":this.props.isSelected});return this.props.data.emailAddresses[0]?e.createElement("div",{className:a,dir:f.getTextDirection(this.props.data.displayStr)},e.createElement("span",{className:"Mx-4"},this.boldify(f.getBidiString(this.props.data.displayStr),this.props.inputValue)),e.createElement("span",{className:"Mx-4 parens",dir:"ltr"},this.boldify(this.props.data.emailAddresses[0],this.props.inputValue))):null},boldify:function(a,b){var c=f.indexOfIgnoreCase(a,b),d=c+b.length,g=a.substring(0,c),h=a.substring(c,d),i=a.substring(d),j=f.addRTLJoiners([g,h,i]);return c>=0?e.createElement("span",null,j[0],e.createElement("strong",null,j[1]),j[2]):e.createElement("span",null,a)}}),b.exports=d},{StringUtils:"StringUtils","react/addons":"react/addons"}],5:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("../../../../artifacts/lang"),h=a("SearchActions"),i=a("SearchQuery"),j=a("Typeahead"),k=a("./ContactSuggestion.jsx"),l=a("../../stores/PersonSuggestion"),m=a("ObjectUtils"),n=a("StringUtils"),o=a("Context");d=e.createClass({displayName:"ContactTypeahead",mixins:[o],getInitialState:function(){return{inputValue:""}},getPeopleSuggestions:function(a,b){return f.chain(a).filter(function(a){return a.emailAddresses}).map(function(a){return a.emailAddresses.map(function(b){return new l({displayStr:a.displayStr,imageUrl:a.imageUrl,emailAddresses:[b],intent:a.intent,overrrideWithEmail:!0})})}).flatten().filter(function(a){return n.containsIgnoreCase(a.displayStr,b)||n.containsIgnoreCase(a.emailAddresses[0],b)}).value()},render:function(){var a=this.props,b=this.state,c=this.getPeopleSuggestions(m.getValue(a.peopleSuggestions,[b.inputValue],[]),b.inputValue);return e.createElement(j,{ref:"typeahead",items:c,inputValue:b.inputValue,disabled:a.disabled,itemTemplate:k,onChange:this.handleChange,onComplete:this.handleComplete,getItemValue:this.getItemValue,getAriaCountMessage:this.getAriaCountMessage,getAriaSuggestionMessage:this.getAriaSuggestionMessage,handleInputHint:this.handleInputHint})},handleChange:function(a){var b=this;b.executeAction(h.fetchSuggestions,{query:new i({keyword:a.inputValue}),fechnpsy:!0,searchId:this.props.id,accounts:this.props.accounts}),b.setState({inputValue:a.inputValue},b.props.onChange)},handleInputHint:function(a,b){var c="",d=b.displayStr,e=b.emailAddresses[0],f=new RegExp("^"+n.escapeRegExp(a),"i");return f.test(d)?c=d:f.test(e)&&(c=e),c},handleComplete:function(a,b){this.handleChange({inputValue:b?b.emailAddresses[0]:a.value})},getItemValue:function(a){return a.emailAddresses[0]},getInputValue:function(){return this.state.inputValue},focus:function(){this.refs.typeahead.focus()},setInputValue:function(a){this.setState({inputValue:a},this.props.onChange)},getAriaCountMessage:function(a){return a?f.template(g.str_suggestions_available,null)({count:a}):g.str_suggestions_not_available},getAriaSuggestionMessage:function(a){return a?a.displayStr:void 0}}),b.exports=d},{"../../../../artifacts/lang":2,"../../stores/PersonSuggestion":14,"./ContactSuggestion.jsx":4,Context:"Context",ObjectUtils:"ObjectUtils",SearchActions:"SearchActions",SearchQuery:"SearchQuery",StringUtils:"StringUtils",Typeahead:"Typeahead",lodash:"lodash","react/addons":"react/addons"}],6:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("Utils"),h=a("Context"),i=a("SearchConstants"),j=a("GlobalConstants"),k=a("SearchActions"),l=a("ObjectUtils"),m=a("ActionStore"),n=a("FolderStore"),o=a("../dropdown/FolderDropdownV3.jsx"),p=a("./AdvancedSearch.jsx"),q=a("./SearchButton.jsx"),r=a("Token"),s=a("TokenizedTypeahead"),t=a("./Suggestion.jsx"),u=a("Onboarding"),v=a("../../../../artifacts/lang"),w=a("DOMUtils"),x=a("StringUtils"),y=a("StatService"),z=yui.common.Utils.features.enabled("searchTwoBoxes"),A=yui.common.Utils.features.enabled("searchTrendingNow"),B=a("../../stores/PersonSuggestion"),C=a("../../stores/TrendingTerm"),D=a("../../stores/SearchSuggestion"),E=a("SearchQuery"),F=[h];
d=e.createClass({displayName:"Container",mixins:F,getInitialState:function(){return{searchId:null,query:{},appType:j.MAIL_APP,recentSearches:[],peopleSuggestions:{},trendingTerms:[],trendingTermsTimestamp:null,hasShownFolderSearchOnboarding:this.props.hasShownFolderSearchOnboarding,isAdvancedPaneOpen:!1,keyword:"",tokens:[],preventSuggestionHighlight:!1,contactNameText:""}},componentDidMount:function(){var a=this,b=a.getContext();this.getStore(m).on("changed",this.onAction),b.events.on("search:advancedSearch:open",a.showAdvancedPane),b.events.on("search:advancedSearch:close",a.handleClose),b.events.on("search:advancedSearch:toggle",a.toggleAdvancedPane),a._yuiEvents.push(yui.on("search:jumpToSearch",a.handleJumpToSearch)),a._yuiEvents.push(yui.on("search:jumpToAdvancedSearch",a.handleJumpToAdvSearch)),a._yuiEvents.push(yui.on("search:setSmartView",a.handleSmartViews)),a._yuiEvents.push(yui.on("search:fireSearch",a.handleStormSearch)),a._yuiEvents.push(yui.on("search:fireBootcampSearch",a.handleFireBootcampSearch)),z?a._yuiEvents.push(yui.on("search:focus",a.refs.typeaheadContacts.focus)):a._yuiEvents.push(yui.on("search:focus",a.refs.typeahead.focus)),a.fetchSuggestionsThrottled=f.debounce(a.fetchSuggestions,200),a.fetchTrendingTermsThrottled=f.debounce(a.fetchTrendingTerms,200)},componentWillUnmount:function(){var a=this,b=a.getContext();this.getStore(m).removeListener("changed",this.onAction),b.events.removeListener("search:advancedSearch:open",a.showAdvancedPane),b.events.removeListener("search:advancedSearch:close",a.handleClose),a._yuiEvents.forEach(function(a){a.detach()})},onAction:function(){var a,b=this.getStore(m).getActionInfo(),c=l.getValue(b,["data"],{}),d=[],e={},g=6e5;switch(b.action){case j.SMARTVIEWS_LOADED:case j.SETTINGS_CHANGE:case j.METADATA_CHANGE:case j.ONBOARDING_SHOW:this.setState(c);break;case j.APP_CHANGE:this.setState(c);break;case j.SEARCH_TAB_ACTIVE:this.setState(c);break;case j.SEARCH_TAB_INACTIVE:this.state.searchId===c.searchId&&this.setState(c);break;case i.SEARCH_START:case i.SET_QUERY:this.state.trendingTerms&&this.state.trendingTermsTimestamp&&(a=(new Date).getTime(),a-this.state.trendingTermsTimestamp>=g&&this.setState({trendingTerms:[],trendingTermsTimestamp:null})),this.setState({query:c.query});break;case i.LOAD_RECENT_SEARCHES:this.setState({recentSearches:[].concat(this.state.recentSearches,c.data)});break;case i.ADD_RECENT_SEARCH:this.setState({recentSearches:c.data});break;case i.REMOVE_RECENT_SEARCH:this.setState({recentSearches:c.data});break;case i.BOOTCAMP_SUGGESTIONS_RECEIVED:l.getValue(c,["query","keyword"])&&c.data&&c.data.length&&(e[c.query.keyword.toLowerCase()]=c.data,this.setState({peopleSuggestions:f.merge({},this.state.peopleSuggestions,e)}));break;case i.TRENDING_NOW_TERMS_RECEIVED:c.data&&A&&(d=l.getValue(c.data,["itemsInfo","items"],""),this.setState({trendingTerms:f.merge(this.state.trendingTerms,d),trendingTermsTimestamp:(new Date).getTime()}))}},renderSearchInputArea:function(){var a=this,b="",c=[],d=[],f=this.getPeopleSuggestions(z?this.state.contactNameText:this.state.query.keyword),g=A?this.getTrendingTerms():null,h=this.getRecentSearches(this.state.query.keyword),j=new D({intent:"ADVANCED_SEARCH",displayStr:""}),k=this.generateTokens(this.state.query),m=this.state.query.keyword||"",n=0===k.length?v.str_search:"",o=[];return z?(b="search-two-boxes searchbox-inputarea-container",c=a.isMailApp()?[].concat(f):[],d=a.isMailApp()?[].concat(h):[],a.state.isAdvancedPaneOpen||((a.state.contactNameText||a.state.query.suggestion)&&c.push(j),m&&d.push(j)),o.push(e.createElement(s,{ref:"typeaheadContacts",className:"right-folder-dd search-box-contacts",inputValue:a.state.contactNameText,items:c,tokens:k,tokenTemplate:r,itemTemplate:t,placeholder:0===k.length?v.str_searchbox_contact:"",onFocus:a.handleFocus,onBlur:a.handleBlurContacts,onChange:a.handleChangeContacts,onComplete:a.handleComplete,onKeyUp:a.handleKeyUp,onKeyPress:a.handleKeyPress,getItemValue:a.getItemValue,getAriaCountMessage:a.getAriaCountMessage,getAriaSuggestionMessage:a.getAriaSuggestionMessage,handleInputHint:a.handleInputHint,handleDestroyToken:a.handleDestroyToken,onDropdownClose:a.getDefaultPeopleSuggestion})),o.push(e.createElement(s,{ref:"typeaheadWords",className:"right-folder-dd search-box-words",inputValue:m,items:d,itemTemplate:t,placeholder:v.str_searchbox_keywords,onFocus:a.handleFocus,onChange:a.handleChangeWords,onComplete:a.handleComplete,onKeyUp:a.handleKeyUp,onKeyPress:a.handleKeyPress,getItemValue:a.getItemValue,getAriaCountMessage:a.getAriaCountMessage,getAriaSuggestionMessage:a.getAriaSuggestionMessage,handleInputHint:a.handleInputHint}))):(a.state.isAdvancedPaneOpen||(c=a.isMailApp()?[].concat(f,h):[],a.state.query.keyword&&(A&&g&&g.length>0?(c.push(new D({intent:"TRENDING_NOW_HEADER",displayStr:i.str_search_trending_now})),c=a.isMailApp()?c.concat(g):[]):c.push(new D({intent:"SEARCH_WEB",displayStr:[l.getValue(this.state.query,["suggestion","displayStr"],""),l.getValue(this.state.query,["keyword"],"")].join(" ").trim()}))),(m||this.state.query.suggestion)&&c.push(j)),a.props.searchKeywordPlaceholderEnabled&&k.length>0&&(n=v.str_search_add_keyword),o.push(e.createElement(s,{ref:"typeahead",className:"right-folder-dd",inputValue:m,items:c,tokens:k,tokenTemplate:r,itemTemplate:t,placeholder:n,onFocus:a.handleFocus,onChange:a.handleChange,onComplete:a.handleComplete,onKeyUp:a.handleKeyUp,onKeyPress:a.handleKeyPress,getItemValue:a.getItemValue,getAriaCountMessage:a.getAriaCountMessage,getAriaSuggestionMessage:a.getAriaSuggestionMessage,handleInputHint:a.handleInputHint,handleDestroyToken:a.handleDestroyToken}))),e.createElement("div",{className:b},o)},render:function(){var a=this;return e.createElement("div",{className:"search-content"},e.createElement("div",{className:"search-autocomplete Fz-s Mend-6 W-100 ff-h Bgc-t c-n right-folder-dd"},e.createElement("div",{className:"search-box-inner"},a.renderFolderDropdown(),a.renderSearchInputArea()),a.renderAdvancedSearch()),a.renderButtons(),a.renderFolderSearchOnboarding())},renderAdvancedSearch:function(){return this.state.isAdvancedPaneOpen&&this.isMailApp()?e.createElement(p,{query:this.getQuery(),onQuery:this.setQuery,setClosed:this.handleClose,handleMailSearch:this.handleMailSearch,smartViews:this.state.smartViews,isRTL:this.props.isRTL,isImapinEnabled:this.props.isImapinEnabled,peopleSuggestions:this.state.peopleSuggestions,accounts:this.props.accounts,currentAccount:this.props.currentAccount}):void 0},renderButtons:function(){var a=this;return e.createElement("div",{className:"search-buttons"},e.createElement(q,{searchLabel:a.getSearchBtnText(),handleSearch:a.handleMailSearch}),e.createElement(q,{searchLabel:v.str_search_web,handleSearch:a.handleWebSearchBtn,id:"web-search-btn"}))},shouldRenderFolderSearchOnboarding:function(){return!this.state.hasShownFolderSearchOnboarding},_hasPeopleSuggestion:function(){return(this.getPeopleSuggestions(this.state.query.keyword)||[]).length},renderFolderSearchOnboarding:function(){var a,b,c,d=this;return d.shouldRenderFolderSearchOnboarding()&&d.refs.folderMenu?(a=d.refs.folderMenu.getDOMNode(),b=a.getBoundingClientRect(),c={x:b.left-16,y:b.top+45},e.createElement(u,{templateType:"OnboardingText",metaDataKey:"hasShownFolderSearchOnboarding",id:"folderSearchOB",width:240,dir:"top",title:v.str_folder_search_onboarding_title,body:x.stringReplace(v.str_folder_search_onboarding_description,{folders:e.createElement("b",null,v.str_folders_lowercase)}),buttonText:v.str_onboarding_got_it_btn,coordinates:c})):void 0},renderFolderDropdown:function(){return this.shouldFolderDropdownRender()?e.createElement(o,{ref:"folderMenu",searchTwoBoxes:z,query:this.getQuery(),accounts:this.props.accounts,currentAccount:this.props.currentAccount,smartViews:this.state.smartViews,isRTL:this.props.isRTL,isImapinEnabled:this.props.isImapinEnabled,onSelect:this.setQuery,executeSearch:this.executeSearch,openAdvancedSearch:this.showAdvancedPane}):void 0},generateTokens:function(a){var b=[];return a.suggestion&&b.push(f.assign(a.suggestion,{type:"bootcamp",fallbackImageUrl:i.PERSON_TOKEN_FALLBACK_IMG_DATA})),b},handleDestroyToken:function(a){"bootcamp"===a.type&&(this.setState({query:f.merge({},this.state.query,{suggestion:null})}),y.logRapid("mt:click",{action:"search_box_token_close",append:{mTknTyp:"people"}}))},shouldFolderDropdownRender:function(){return this.state.appType===j.MAIL_APP},getAriaCountMessage:function(a){return a?f.template(v.str_suggestions_available,null)({count:a}):v.str_suggestions_not_available},getAriaSuggestionMessage:function(a){var b=a?a.intent:"";switch(b){case"RECENT_SEARCH":return f.template(v.str_search_for_recent,null)({keyword:a.displayStr});case"PEOPLE":return f.template(v.str_search_for_contact,null)({contactName:a.displayStr});case"SEARCH_WEB":return f.template(v.str_search_web_for,null)({keyword:a.displayStr});case"SEARCH_TRENDING_NOW":return f.template(v.str_search_trending_now,null)({keyword:a.displayStr});case"SEARCH_MAIL":return f.template(v.str_search_mail_for,null)({keyword:a.displayStr});case"ADVANCED_SEARCH":return v.str_search_advanced}},getItemValue:function(a){return"ADVANCED_SEARCH"===a.intent||"TRENDING_NOW_HEADER"===a.intent?this.getQuery().keyword:"SEARCH_TRENDING_NOW"===a.intent?a.search_term:a.displayStr},getSearchBtnText:function(){var a;switch(this.state.appType){case j.NOTEPAD_APP:a=v.str_search_notepad;break;case j.CALENDAR_APP:a=v.str_search_calendar;break;case j.CONTACTS_APP:a=v.str_search_contacts;break;default:a=v.str_search_mail}return a},getPeopleSuggestions:function(a){var b,c,d;return a?(b=f.keys(this.state.peopleSuggestions)||[],c=(a||"").toLowerCase(),d=c,this.state.peopleSuggestions[c]||b.forEach(function(a){c.indexOf(a)>-1&&a.length>d.length&&(d=a)}),f.uniq(this.state.peopleSuggestions[d.toLowerCase()]||[]).slice(0,3).map(function(a){return new B(a)})):[]},getTrendingTerms:function(){return f.uniq(this.state.trendingTerms).slice(0,3).map(function(a){return new C(a)})},isQueryInRecentSearch:function(a,b){return"string"==typeof b?!!b.trim()&&!!a&&(!a.trim()||x.containsIgnoreCase(b,a)):b.query&&!!b.query.trim()&&!!a&&(!a.trim()||x.containsIgnoreCase(b.query,a))},getRecentSearches:function(a){var b=this;return f.uniq(this.state.recentSearches||[]).filter(function(c){return b.isQueryInRecentSearch(a,c)}).slice(0,3).map(function(a){return new D({intent:"RECENT_SEARCH",displayStr:a.query?a.query:a,keyword:a.query?a.query:a})})},handleInputHint:function(a,b){return"SEARCH_MAIL"===b.intent?a:b.getMatchAndRemainder(a)},handleJumpToAdvSearch:function(a){var b=this,c=b.getStore(n),d=c.findByFID(l.getValue(a,"folders.0.fid"));d&&b.setState({query:new E({folders:[{acctIds:[d.acctId],displayName:l.getValue(d,"folderInfo.name"),folderIds:d.id}]})}),b.showAdvancedPane()},handleJumpToSearch:function(a){this.setState({query:{keyword:a.keyword}}),z?this.refs.typeaheadContacts.focus():this.refs.typeahead.focus()},handleOpen:function(){var a=this;a.fetchSuggestionsThrottled(),a.fetchTrendingTermsThrottled()},handleFocus:function(){return this.handleOpen()},handleClose:function(){this.setState({isAdvancedPaneOpen:!1})},statsWithSearchTwoBox:function(a){a.keyword&&a.suggestion?y.stat({name:"search_two_box_keyword_contact"}):a.keyword?y.stat({name:"search_two_box_keyword"}):a.suggestion&&y.stat({name:"search_two_box_contact"})},getDefaultPeopleSuggestion:function(){var a,b=this.getQuery(),c=b.suggestion;c||(a=this.getPeopleSuggestions(this.state.contactNameText)||[],a.length>0&&(c=a[0],this.setState({query:f.merge({},b,{suggestion:c})})),this.cleanContactNameText())},cleanContactNameText:function(){this.setState({contactNameText:""}),this.refs.typeaheadWords.focus()},handleChangeContacts:function(a,b){var c=f.merge({},this.getQuery(),{suggestion:b.length?b[0]:null});this.setState({contactNameText:a.inputValue,query:c}),this.fetchSuggestionsThrottled()},handleChangeWords:function(a){var b=f.merge({},this.state.query,{keyword:a.inputValue});this.setState({query:b})},handleChange:function(a,b){var c=f.merge({},this.state.query,{keyword:a.inputValue,suggestion:b.length?b[0]:null});this.fetchSuggestionsThrottled(),this.setState({query:c})},handleShiftEnter:function(a){"Enter"===a.key&&a.shiftKey&&(y.stat({name:"search_sugg_web_shortcut"}),this.handleWebSearch(this.state.query,!1),w.halt(a))},handleKeyUp:function(a){this.handleShiftEnter(a)},handleKeyPress:function(a){this.handleShiftEnter(a)},handleComplete:function(a,b){var c=this,d="Enter"===a.key||"click"===a.type,e=c.getQuery(),g=e.keyword,h=g||"",i=l.getValue(b,"intent"),j=l.getValue(this.refs,"typeaheadContacts.refs.typeahead.refs.input");if(z&&"ADVANCED_SEARCH"!==i){if("PEOPLE"===i)return this.setState({query:f.merge({},this.state.query,{suggestion:b})}),void c.cleanContactNameText();if(j&&j.getDOMNode()===a.target)return void c.getDefaultPeopleSuggestion()}if(!c.isMailApp())return c.doNonMailSearch(),z?(c.refs.typeaheadContacts.blur(),c.refs.typeaheadWords.blur()):c.refs.typeahead.blur(),h;switch(b||(b={intent:"SEARCH_MAIL",displayStr:h,keyword:h}),b.intent){case"ADVANCED_SEARCH":d&&c.showAdvancedPane();break;case"SEARCH_WEB":d&&(y.stat({name:"search_sugg_web_click"}),c.handleWebSearch(this.state.query,!0));break;case"TRENDING_NOW_HEADER":break;case"SEARCH_TRENDING_NOW":d&&c.handleTrendingTermSearch(b.search_term);break;case"RECENT_SEARCH":d&&(y.stat({name:"search_sugg_search_recent",tags:{numchars:(c.getQuery().keyword||"").length}}),c._triggerUHEvent(!0),h=b.displayStr,z?c.executeSearch(new E({keyword:h,suggestion:e.suggestion,typeTag:"search_box_suggestion_recent"})):c.executeSearch(new E({keyword:h,typeTag:"search_box_suggestion_recent"})));break;case"SEARCH_MAIL":c.executeSearch(new E({keyword:e.keyword,refinements:e.refinements,folders:e.folders,smartviews:e.smartviews,suggestion:e.suggestion,typeTag:e.typeTag||"search_box_enter"})),c._triggerUHEvent(!0);break;default:d?(c.executeSearch(new E({keyword:"",suggestion:b,view:e.view,folders:e.folders,smartviews:e.smartviews,refinements:e.refinements,typeTag:"search_box_suggestion_people"})),c._triggerUHEvent(!0),y.stat({name:"search_sugg_people_click"})):"ArrowRight"===a.key?this.setState({query:f.merge({},this.state.query,{keyword:a.fullInputValue})}):"Tab"===a.key&&(y.stat({name:"search_sugg_tab_lozenge",tags:{numchars:e.keyword&&e.keyword.length}}),this.setState({query:f.merge({},this.state.query,{keyword:"",suggestion:b})}))}},handleMailSearch:function(a){var b=this.state.query;this.isMailApp()?(this.executeSearch(new E({keyword:b.keyword,suggestion:b.suggestion,folders:b.folders,refinements:b.refinements,smartviews:b.smartviews,typeTag:a||b.typeTag,displayName:b.displayName,isSavedSearch:b.isSavedSearch})),y.logRapid("mt:click",{action:"mail_search",spid:"search_results"}),this._triggerUHEvent(!1)):(this.doNonMailSearch(),z?(this.refs.typeaheadContacts.blur(),this.refs.typeaheadWords.blur()):this.refs.typeahead.blur())},handleWebSearchBtn:function(){y.stat({name:"search_sugg_web_btn"}),this.handleWebSearch(this.state.query,!1)},handleWebSearch:function(a,b){var c=document.getElementById("UHSearchWeb"),d=document.getElementById("UHSearchBox"),e=document.getElementById("fr"),f=[l.getValue(a,["suggestion","displayStr"],""),l.getValue(a,["keyword"],"")].join(" ").trim();c&&d&&f&&(e&&e.setAttribute("data-sa",b?"1":"0"),d.value=f,c.click(),y.stat({name:"search_sugg_search_web"}))},handleTrendingTermSearch:function(a){var b="https://search.yahoo.com/search?p=",c="mail-tts-1-s",d="m:tn,stl:crsl",e=b+a+"&fr="+c+"&fr2="+d;window.open(e),y.stat("search_trending_now_web_search"),y.retention("searchTrendingNow")},getQuery:function(){return this.state.query},setQuery:function(a){this.setState({query:a})},executeSearch:function(a){z&&this.statsWithSearchTwoBox(a),g.loadTictac("tictac-searchresults").then(function(){this.executeAction(k.executeSearch,{query:a}),z?(this.refs.typeaheadContacts.blur(),this.refs.typeaheadWords.blur()):this.refs.typeahead.blur()}.bind(this))},fetchSuggestions:function(){var a=this,b=a.getQuery();z&&(b=f.clone(a.getQuery()),b.keyword=this.state.contactNameText),!a.state.isAdvancedPaneOpen&&b.keyword&&a.executeAction(k.fetchSuggestions,{query:b,searchId:a.getSearchId(),accounts:this.props.accounts})},fetchTrendingTerms:function(){var a=this,b=a.getQuery();f.isEmpty(a.state.trendingTerms)&&a.executeAction(k.fetchTrendingTerms,{query:b,searchId:a.getSearchId(),accounts:this.props.accounts})},toggleAdvancedPane:function(){var a=this;a.state.isAdvancedPaneOpen?a.handleClose():a.showAdvancedPane()},showAdvancedPane:function(){this.setState({isAdvancedPaneOpen:!0}),y.stat({name:"search_sugg_adv_search_open"})},doNonMailSearch:function(){var a=this.state.query.keyword||"",b={query:{keyword:a}};switch(this.state.appType){case j.NOTEPAD_APP:this.executeAction(k.doNotepadSearch,b);break;case j.CALENDAR_APP:this.executeAction(k.doCalendarSearch,b);break;case j.CONTACTS_APP:this.executeAction(k.doContactsSearch,b)}},handleSmartViews:function(a,b){var c,d=b&&b.categoryName||"";c=f.filter(this.state.smartViews,function(a){return a.displayName===b.displayName||a.displayName===b.view}),c.length&&this.executeSearch(new E({smartviews:c[0].query.smartviews,folders:l.getValue(b,"folders",[]),typeTag:b.typeTag||"smartview_"+d}))},handleStormSearch:function(a){this.executeSearch(new E(a))},handleFireBootcampSearch:function(a){"msglist_search_from"!==a.typeTag&&"hovercard_search_email"!==a.typeTag||this.executeSearch(new E({keyword:"",suggestion:{intent:"PEOPLE",displayStr:a.name||a.email,emailAddresses:[a.email]},typeTag:a.typeTag}))},isMailApp:function(){return this.state.appType===j.MAIL_APP},_yuiEvents:[],_triggerUHEvent:function(a){var b=new yui.EventTarget,c=a?"ucs:mailSearchSugg":"ucs:mailSearch";b.publish(c,{broadcast:2,emitFacade:!0}),b.fire(c)},getSearchId:function(){return this.state.searchId}}),b.exports=d},{"../../../../artifacts/lang":2,"../../stores/PersonSuggestion":14,"../../stores/SearchSuggestion":15,"../../stores/TrendingTerm":16,"../dropdown/FolderDropdownV3.jsx":10,"./AdvancedSearch.jsx":3,"./SearchButton.jsx":7,"./Suggestion.jsx":8,ActionStore:"ActionStore",Context:"Context",DOMUtils:"DOMUtils",FolderStore:"FolderStore",GlobalConstants:"GlobalConstants",ObjectUtils:"ObjectUtils",Onboarding:"Onboarding",SearchActions:"SearchActions",SearchConstants:"SearchConstants",SearchQuery:"SearchQuery",StatService:"StatService",StringUtils:"StringUtils",Token:"Token",TokenizedTypeahead:"TokenizedTypeahead",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}],7:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"SearchButton",getDefaultProps:function(){return{className:"",handleSearch:function(){},searchLabel:"",id:"mail-search-btn"}},render:function(){var a,b=this,c={};return c[b.props.className]=!0,a=e.addons.classSet(c),e.createElement("button",{type:"button",className:a,id:b.props.id,onClick:b.props.handleSearch.bind(null,"search_box_click")},b.props.searchLabel)}}),b.exports=d},{"react/addons":"react/addons"}],8:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("DOMUtils"),h=a("StringUtils"),i=a("Context"),j=a("../../../../artifacts/lang"),k=a("SearchActions"),l=a("GlobalConstants"),m=a("TokenUtils");d=e.createClass({displayName:"Suggestion",mixins:[i],render:function(){var a=this,b=e.addons.classSet({"menu-active-item":a.props.isSelected});return e.createElement("div",{className:b},a.renderMap[a.props.data.intent].call(a))},boldify:function(a,b){var c=h.indexOfIgnoreCase(a,b),d=a.substr(0,c),f=a.substr(c+b.length),g=a.substr(c,b.length),i=h.addRTLJoiners([d,g,f]);return c>=0?e.createElement("span",null,i[0],e.createElement("b",{className:"Fw-b"},i[1]),i[2]):e.createElement("span",{className:"Va-m"},a)},renderMap:{PEOPLE:function(){var a=this,b=a.props.data,c=a.props.inputValue,d=b.imageUrl?h.addUrlParameters(b.imageUrl,{spsize:"72X72",badge:!0,fallback_url:l.FALLBACK_XOBNI_IMG_URL}):l.FALLBACK_XOBNI_IMG_URL,f={backgroundImage:"url("+d+")"},g={backgroundColor:a.getRandomPersonColor(b.displayStr)};return e.createElement("div",{className:"Mx-4 Py-2 W-100 Bxz-bb Pos-r Cur-p Bfc","data-id":b.displayStr,ref:"suggestion",onClick:a.handlePersonClick},e.createElement("div",{className:"D-ib wpx-40 hpx-40 Pend-10 Va-m Fl-start"},e.createElement("span",{style:f,className:"bgr-nr wpx-40 hpx-40 Bgz-cv Pos-a Z-1 Bdrs"}),e.createElement("span",{style:g,className:"fz-ms wpx-40 lh-40 c-w Pos-a Z-0 Start-0 Ta-c Bdrs"},b.getInitials())),e.createElement("div",{className:"mt-3"},e.createElement("div",{className:"fz-ms Ell",ref:"name"},a.boldify(b.displayStr,c)),e.createElement("div",{"aria-label":"contact suggestion",className:"c-g Fz-s Ell",ref:"email"},a.boldify(m.getTokenText(a.props.data.emailAddresses,c),c))))},RECENT_SEARCH:function(){var a=this;return e.createElement("div",{className:"Mx-4 Py-2 Pos-r Cur-p Bfc fz-ms"},e.createElement("div",{className:"Ta-c wpx-40 lh-30 Pend-10 Fl-start icon icon-recent"}),e.createElement("div",{className:"Mend-1 Fl-end"},e.createElement("span",{className:"icon icon-small-close icon-light D-n lh-30",onClick:a.handleRemoveRecentSearch})),e.createElement("div",{"aria-label":"recent search",className:"lh-30 Ell","data-action":"search-recent"},a.boldify(a.props.data.displayStr,a.props.inputValue)))},SEARCH_WEB:function(){var a=this,b=f.template(j.str_search_web_for)({keyword:a.props.data.displayStr});return e.createElement("div",{className:"suggestion-row suggestion-search-web"},e.createElement("div",{className:"suggestion-row-icon icon icon-search-web"}),e.createElement("div",{"aria-label":b,"data-action":"search-web",className:"suggestion-row-content"},h.stringReplace(j.str_search_web_for,{keyword:e.createElement("strong",null,a.props.data.displayStr)})),e.createElement("kbd",{className:"suggestion-search-web-shortcut"},j.str_web_search_shortcut))},TRENDING_NOW_HEADER:function(){return e.createElement("div",{className:"suggestion-row suggestion-search-trending"},e.createElement("div",{"aria-label":j.str_search_trending_now,"data-action":"search-trending-header",className:"suggestion-row-content"},e.createElement("strong",null,j.str_search_trending_now)))},SEARCH_TRENDING_NOW:function(){var a=this,b=a.props.data;return e.createElement("div",{className:"Mx-4 Py-2 Pos-r Cur-p Bfc fz-ms"},e.createElement("div",{className:"Ta-c wpx-40 lh-30 Pend-10 Fl-start icon icon-gif-popular"}),e.createElement("div",{"aria-label":"Trending Now","data-action":"search-trending",className:"lh-30 Ell"},b.getItemName()))},SEARCH_MAIL:function(){return e.createElement("div",{className:"Mx-4 Py-2 Bxz-bb Pos-r Cur-p Bfc"},e.createElement("div",{className:"Ta-c wpx-40 lh-30 Pend-10 Fl-start icon icon-search"}),e.createElement("div",{"aria-label":"search mail for",className:"lh-30 Ell fz-ms","data-action":"search-mail"},this.props.data.displayStr))},ADVANCED_SEARCH:function(){return e.createElement("div",{className:"suggestion-adv-search"},e.createElement("button",{onClick:this.props.showAdvancedPane},j.str_advanced_mail_search))}},renderShiftEnterLabel:function(){return 0===this.props.data.typeIndex?e.createElement("span",{className:"c-g"},j.str_web_search_shortcut):void 0},getRandomPersonColor:function(a){function b(a,b){return(a%b+b)%b}var c=h.hashCode(a),d=["#940050","#CC008C","#BE0067","#F80E5D","#FE4E4D","#FD6867","#FF1032","#FF8C13","#FF530E","#FA0027"];return d[b(c,d.length)]},renderWebSearchHeader:function(){return 0===this.props.data.typeIndex?e.createElement("div",{className:"D-b Us-n c-g bgc-lg lh-30 Pstart-14 Fw-b",onClick:g.halt},j.str_web_search):void 0},handleRemoveRecentSearch:function(a){var b=this,c=b.props.data.displayStr;b.executeAction(k.removeRecentSearch,c),a.stopPropagation()}}),b.exports=d},{"../../../../artifacts/lang":2,Context:"Context",DOMUtils:"DOMUtils",GlobalConstants:"GlobalConstants",SearchActions:"SearchActions",StringUtils:"StringUtils",TokenUtils:"TokenUtils",lodash:"lodash","react/addons":"react/addons"}],9:[function(a,b,c){"use strict";function d(){return new l(function(a,b){yui.use("tictac-simple-query","mail-persist-meta-data",function(){var c=[],d=[],e=yui.mail.persist.MetaData,f=yui.Tictac.simple,g=e.get("simpleCustomViews");if(f){try{g&&j.each(JSON.parse(g.json)||[],function(a){var b=-1!==a.name.indexOf(" "),c=w.getValue(a,["query","smartviews"],[]),e={displayName:a.name,account:a.account,query:{smartviews:[{displayName:a.name,name:b?'is:"'+a.name+'"':"is:"+a.name,keyword:w.getValue(a,["query","keyword"],""),suggestion:a.email?{emailAddresses:[a.email]}:{},folders:w.getValue(a,"query.folders",[])}]}};c.length&&(e.query.smartviews=[].concat(e.query.smartviews,c)),d.push(e)})}catch(h){b("custom smartview parse error")}j.each(r.SMARTVIEW_CATEGORIES_KEYS,function(a){c.push(f.Query.fetchSmartViewQuery(a))}),l.all(c).then(function(b){var c=[];j.each(b||[],function(a){var b=a.displayName||a.view,d=-1!==b.indexOf(" "),e={displayName:b};e.query={smartviews:[{displayName:b,name:d?'is:"'+b+'"':"is:"+b,keyword:w.getValue(a,["keyword"],""),suggestion:a.email?{emailAddresses:[a.email]}:{}}]},c.push(e)}),a([].concat(c||[],d||[]))})}})})}var e,f,g,h,i=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},j=a("lodash"),k=window.React||a("react/addons"),l=a("EnhancedPromise"),m=a("../autocomplete/Container.jsx"),n=a("ActionStore"),o=a("SearchQuery"),p=a("FolderStore"),q=a("GlobalConstants"),r=a("SearchConstants"),s=a("MessageConstants"),t=a("SearchActions"),u=a("GlobalActions"),v=a("StatService"),w=a("ObjectUtils"),x=a("../../utils/AccountUtils"),y=a("Utils"),z=a("BootcampAPIUtilsV2"),A=yui.mail.model.DataStore.Accounts,B=yui.mail.Tabs,C=yui.common.Utils.features,D=yui.common.Utils.settings,E=C.enabled("searchFolderList"),F=C.enabled("customViewsCallout"),G=C.enabled("searchNoPVBeacon",!1),H=C.enabled("searchNoLeftRailFolderChange"),I=NeoConfig.multipleAccounts,J=D.value("imapSyncTime",20),K=a("../../../../artifacts/lang"),L=!!NeoConfig.archive,M=window.performance,N=NeoConfig.forceDS,O=!!NeoConfig.isRTL,P=Neo.getScrollbarWidth(),Q=["startTime","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","responseEnd"],R=D.value("searchCacheExpiredHours"),S=D.value("searchCacheStoreLimit"),T=36e5,U=!1;yui.use("mail-persist-meta-data"),h=k.createClass({displayName:"StormBridge",getInitialState:function(){return this.adCache={},this.permissionWindow=null,{searchTabs:[],activeSearchId:"FOLDER_TAB",cache:{}}},_getSearchTabDimension:function(){var a=yui.common.Utils.getCachedWindowSize(),b=190,c=NeoConfig.hasAds?200:0,d=170,e=a.width-(b+c),f=a.height-d;return{width:e,height:f}},_getAccounts:function(){var a=A.get(),b={};return j.each(a,function(a){b[a.id]={id:a.id,email:a.email,description:a.description,isPrimary:a.isPrimary,status:a.status}}),b},_getCurrentAccount:function(){var a=A.getCurrentAccount();return{id:a.id,description:a.description}},_getSyncingAccounts:function(a){var b,c,d,e=[];return NeoConfig.multipleAccounts&&a&&(b=j.chain(j.pluck(a.folders,"acctIds")).compact().flatten().uniq().value(),b&&b.length>0?(c=A.get(),d=j.map(b,function(a){return j.find(c,function(b){return b.id===a})})):d=A.get(),e=x.findAccountsInSyncing(d,J)),e},renderEmailHistory:function(a){var b,c=w.getValue(a,"folders.0.acctIds.0"),d=this._getAccounts(),e=j.size(d),f=!0;return C.enabled("imapInGA")&&d&&e>1&&(b=j.find(d,function(a){return a.id===c&&a.isPrimary}),f=!!b),C.enabled("emailHistory")&&f},onSearchTabClose:function(a,b){var c,d,e=Date.now()-R*T,f=j.clone(this.state.cache),g=b.main||{},h=0;for(d in this.state.cache)this.state.cache[d]&&this.state.cache[d].cachedTimestamp<e&&(f[d]=null);f[a.searchId]=j.assign(b,{cachedTimestamp:Date.now()},{contentType:g.contentType||b.contentType,filter:g.filter||b.filter});for(d in f)f[d]&&((!c||f[d].cachedTimestamp<f[c].cachedTimestamp)&&(c=d),h++);h>S&&(f[c]=null),this.setState({cache:f})},_openSearchTab:function(b,c){var f,g,h,l=this,m=b.query,n=b.searchId,o=new yui.mail.ui.BaseWidget,p=b.searchId,q=w.getValue(yui.mail,["persist","MetaData"],{get:function(){}});return e||(e=y.loadTictac("tictac-searchresults")),h=j.find(this.state.searchTabs,{tabId:p}),h||(f=B.getActiveTab(),o.render=function(d){e.then(function(){var e=a("SearchTabContent"),g=a("AppDispatcher"),o=d.getDOMNode(),p=this.state.cache[n]||{},r=l._showRightRail(b,c);k.render(k.createElement(e,i({},p,{searchId:n,query:b.query,searchType:c,sortType:b.sortType,sortOrder:b.sortOrder,context:g.context,imapInEnabled:NeoConfig.imapIn,hasMultipleAccounts:I,showEmailHistory:q.get("showEmailHistory"),isArchive:L,snippetsEnabled:-1!==parseInt(q.get("neo.pref.general.snippets"),10),messageDensity:NeoConfig.msgListDensity,simpleEnabled:C.enabled("simple"),unsubscribrEnabled:C.enabled("unsubscribr"),searchGDocsEnabled:C.enabled("searchGoogleDocs"),sleekProgressBarEnabled:C.enabled("sleekProgressBar"),searchAdFaviconHoverEnabled:C.enabled("searchAdHoverFavicon"),searchAdFlipLabelAndRatingEnabled:C.enabled("searchAdSponsoredRating"),searchAdHoverHighlightEnabled:C.enabled("searchAdHoverHighlight"),searchAdThemeColorEnabled:C.enabled("searchAdThemeColor"),hideGDocsCallout:this.hideGDocsCallout,isForceUser:N,scrollbarWidth:P,hasRightRail:r,lmv3Enabled:C.enabled("LMV3"),isEmailHistoryEnabled:this.renderEmailHistory(m),defaultFilterAll:C.enabled("defaultFilterAll"),filterOrder:D.value("filterOrder"),cardOrder:D.value("cardOrder"),recipientNameInSRP:C.enabled("recipientNameInSRP"),searchResultsLinks:C.enabled("searchResultsLinks"),searchCacheNoFlash:C.enabled("searchCacheNoFlash"),searchTabDimension:this._getSearchTabDimension(),syncingAccounts:this._getSyncingAccounts(m),accounts:this._getAccounts(),currentAccount:this._getCurrentAccount(),isRTL:O,rightRailSearchAdEnabled:this._showRightRailInTravel(b,c),onClose:this.onSearchTabClose})),o),h.on("closeChange",function(){k.unmountComponentAtNode(o),this.setState({searchTabs:j.reject(this.state.searchTabs,{tabId:h.tabId})})}.bind(this)),f&&f.widget&&"search"===f.widget.type&&f.set("close",1),this.setState({searchTabs:this.state.searchTabs.concat(h)}),this.state.searchTabs.length>4&&this.state.searchTabs[3].set("close",1)}.bind(this))}.bind(this),I&&(g=j.escape(m.getHumanReadableAccountsString(this._getAccounts()))),g=j.compact([g,j.escape(m.toHumanReadableString())]).join(" "),g=K["str_"+g]||g,o.type=o.widgetType="search",o.query=m,o.searchId=n,o.set("title",g),h=yui.mail.ui.Workspace.addContentWidget({p_label:K.str_search,s_label:g,hideToolbar:!0,reuse:!0,widget:o,isRemovable:!0}),this._toggleRightRail(c,m),h.set("hideToolbar",!0),h.tabId=p,h.on("closeChange",function(){j.defer(function(){this.setState({activeSearchId:"FOLDER_TAB"}),this.props.context.executeAction(u.searchTabClose,{searchId:n,query:{}})}.bind(this),1)}.bind(this)),h.on("activeChange",function(a){1===a.newVal?(this.setState({activeSearchId:n}),j.defer(function(){this.props.context.executeAction(u.searchTabActive,{searchId:n,searchType:c,query:m})}.bind(this))):(this.setState({activeSearchId:"FOLDER_TAB"}),j.defer(function(){this.props.context.executeAction(u.searchTabInactive,{searchId:n,searchType:c,query:{}})}.bind(this)))}.bind(this))),j.defer(function(){this.props.context.executeAction(u.searchTabActive,{searchId:n,searchType:c,query:m})}.bind(this)),d().then(function(a){this.props.context.executeAction(u.smartviewsLoaded,{searchId:n,smartViews:a})}.bind(this)),B.switchToTab(h),h},_closeSearchTab:function(){var a=B.getActiveTab();a&&a.widget&&"search"===a.widget.type&&a.set("close",1)},_showRightRail:function(a,b){var c=this._showRightRailInTravel(a,b);return"people"===b||c},_showRightRailInTravel:function(a,b){var c=this._showPartnerSearch(a.query,b),d=this._showBingAdModule(a.query,b);return c||d},_showPartnerSearch:function(a,b){var c,d=C.enabled("partnersearch");
if(a)return c=j.map(a.smartviews,"name")[0],"keyword"===b&&"is:travel"===c&&d},_renderPartnerSearch:function(){f.then(function(){var b,c,d,e,f=a("PartnerSearch"),g=B.getActiveTab();g&&g.widget&&"search"!==g.widget.type||(b=g.elContent.getDOMNode(),c=b.getElementsByClassName("hipmunk-right-rail"),c&&(e=c[0],g.on("closeChange",function(){k.unmountComponentAtNode(e),c=null,e=null}.bind(this)),k.render(k.createElement(f,{context:this.props.context,defaultTravelFilter:d}),e)))}.bind(this))},tabChange:function(a){var b;switch(a.type){case"notepadtab":b=q.NOTEPAD_APP;break;case"contactstab":b=q.CONTACTS_APP;break;case"calendartab":b=q.CALENDAR_APP;break;default:b=q.MAIL_APP}j.defer(function(){this.props.context.executeAction(u.appChange,{appType:b})}.bind(this))},showGDocsCallout:function(){var a=this;yui.use("mail-ui-onboarding",function(b){b.mail.ui.Onboarding.registerDefaultOnboarding({name:"showGDocsCallout",node:'.tab-content:not(.offscreen) .srp-filters-type [data-action="documents"]',pointer:"top",hdText:K.str_cloud_storage_providers_header,bdText:K.str_cloud_storage_providers_body,btnPrimaryText:K.str_connect,btnCancelText:K.str_later,offset:[-125,35],onSuccess:function(){a.openCloudStorageSetting(),a.hideGDocsCallout()},onCancel:function(){a.hideGDocsCallout()},onShow:function(){U=!0},onUnmount:function(){U=!1},classNames:["gdocs-custom-callout"]},!0)})},hideGDocsCallout:function(){C.enabled("searchGoogleDocsPermission")&&U&&yui.mail.ui.Onboarding.closeDefaultOnboarding("showGDocsCallout")},_shouldHideAdForUnknownEntity:function(a){var b,c=!1,d=!!C.enabled("hideAdsUnknownEntities");if(a)for(b in a)"PERSON"===a[b].type&&(c=c||!a[b].knownEntity);return d&&c},_rotateDisplayAd:function(a,b){var c=B.getActiveTab();c&&c.widget&&"search"!==c.widget.type||(this._toggleRightRail(a,b),y.requestAnimationFrame(function(){yui.fire("darlaEvent",{action:"people"===a?"search_people":"search_results"})}))},_toggleRightRail:function(a,b){var c=this._showPartnerSearch(b,a),d=this._showBingAdModule(b,a);yui.fire("darlaEvent",{action:"people"===a||d||c?"disableRightRailAdForActiveTab":"enableRightRailAdForActiveTab"})},_getAdKeyword:function(a){var b={"is:unread":"read","is:starred":"star","is:Important":"address","is:personal":"people","is:social":"social","is:travel":"travel","is:shopping":"shopping","is:financial":"finance"},c=j.pluck(a.smartviews,"name")[0],d=a.keyword&&a.keyword.trim(),e=a.suggestion;if(NeoConfig.dmEnabled){if(e)return e.displayStr;if(d)return d;if(b[c])return b[c]}return""},_showBingAdModule:function(a,b){var c,d=C.enabled("bingads");if(a)return c=j.map(a.smartviews,"name")[0],"keyword"===b&&"is:travel"===c&&d},_attachAds:function(b){g.then(function(){var c,d,e,f=a("BingAdsRightRail"),g=B.getActiveTab();g&&g.widget&&"search"!==g.widget.type||(g.on("closeChange",function(){k.unmountComponentAtNode(c),e=null,c=null}.bind(this)),d=g.elContent.getDOMNode(),e=d.getElementsByClassName("searchds-right-rail"),e&&(c=e[0],k.render(k.createElement(f,{context:this.props.context,searchId:b.searchId,data:this.adCache[b.searchId],startIndex:C.enabled("bingads2to6")?1:0,endIndex:D.value("dm_max_listings")}),c)))}.bind(this))},renderSearchAds:function(a){j.defer(function(){this.props.context.executeAction(t.searchAdsSuccess,{searchId:a.searchId,data:this.adCache[a.searchId]})}.bind(this))},_collectSearchAdStats:function(a){v.stat({name:"srp_search_ad",unit:"ms",type:"duration",dataum:v.timerComplete("srp_search_ad"),tags:{status:a}})},_fetchSearchAds:function(a){var b=this,c=a.query,d=c.suggestion,e=d&&d._rawObj&&d._rawObj.entities;return v.timerStart("srp_search_ad"),e&&b._shouldHideAdForUnknownEntity(e)||this.adCache[a.searchId]?void(this.adCache[a.searchId]&&this.state.cache&&this.state.cache[a.searchId]&&(b._collectSearchAdStats(!0),b.renderSearchAds(a))):void yui.use("mail-ui-dmsearch-controller").then(function(d){var e=new d.mail.ui.dmsearchController({seedTerm:b._getAdKeyword(c||{}),partner:c.partner||NeoConfig.dmSrcTag,typeTag:c.typeTag||""});e.once("responseChange",function(c){c.newVal&&c.newVal.length&&(b.adCache[a.searchId]=c.newVal,b.renderSearchAds(a))}),e.process(function(a){b._collectSearchAdStats(!(!a||!a.length))})})},_loadPartnerSearch:function(){return f?void 0:f=y.loadTictac("tictac-partnersearch")},_loadBingAds:function(){return g?void 0:g=y.loadTictac("tictac-bingads")},_fireRapidSearchStart:function(a){a.typeTag&&v.logRapid("mt:click",{action:a.typeTag,append:{mSrchId:a.searchId,mSrchQry:a.query.toString()}})},_fireYamasSearchStart:function(a){a.typeTag&&v.stat({name:a.typeTag})},_fireSplunkStats:function(a){var b="keyword"===a.searchType?w.getValue(a,["data","documents","keyword","items"],""):w.getValue(a,["data","documents","all","items"],""),c=j.find(b,function(a){return a.online?a.online:void 0}),d=c&&C.enabled("searchGoogleDocs");d&&v.mailLog({m:"srp_gdocs_rendered",searchType:a.searchType},!1,"srp_gdocs_rendered")},onMessageChange:function(){this.props.context.executeAction(u.setTabDirty,{})},_initSettings:function(){yui.use("mail-persist-meta-data",function(){var a=yui.mail.persist.MetaData;this.props.context.executeAction(u.changeSettings,{messageDensity:NeoConfig.msgListDensity,hasShownFolderSearchOnboarding:this._folderSearchOnboardingShown(),snippetsEnabled:-1!==parseInt(a.get("neo.pref.general.snippets"),10),showEmailHistory:"false"!==a.get("neo.pref.emailhistory.dismiss")})}.bind(this)),yui.on("messageDensityChange",function(a){this.props.context.executeAction(u.changeSettings,{messageDensity:a.density})}.bind(this)),yui.on("simple:rendered",function(){d().then(function(a){this.props.context.executeAction(u.smartviewsLoaded,{smartViews:a})}.bind(this))}.bind(this)),yui.on("simple:customViewsChanged",function(){d().then(function(a){this.props.context.executeAction(u.changeSettings,{smartViews:a})}.bind(this))}.bind(this)),yui.on("imapin:currentAccountSet",this.setQueryAccountScope),C.enabled("searchMsgStatusSync")&&(yui.on("ds:conv:change",this.onMessageChange),yui.on("ds:msg:change",this.onMessageChange)),E&&(yui.mail.FoldersView.detach("fidChange"),yui.mail.FoldersView.on("fidChange",function(a){var b,c=this.props.context,d=c.getStore(p),e=d.findByFID(a.newVal.fid);e&&(b=e.id||e.folderInfo.index.toString(),c.executeAction(t.executeSearch,{query:new o({folders:[{displayName:d.getLocalizedFolderNameById(b),acctIds:e.acctId,folderIds:[b]}]})}))}.bind(this))),yui.on("ui:currentFolder",this.setQueryFolderScope),yui.on("tabChange",this.tabChange),yui.on("initCallout:folderSearchOnboarding",function(){this.props.context.executeAction(u.showOnboarding,{hasShownFolderSearchOnboarding:0}),yui.fire("callout:action",{name:"folderSearchOnboarding",action:"shown",keyValue:"1"})}.bind(this)),yui.on("closeCallout:folderSearchOnboarding",function(){this.props.context.executeAction(u.dismissOnboarding,{hasShownFolderSearchOnboarding:1})}.bind(this)),this.props.context.executeAction(t.loadRecentSearches,{}),window.addEventListener("resize",function(){j.defer(function(){this.props.context.executeAction(u.searchWindowResize,this._getSearchTabDimension)}.bind(this))}.bind(this),!0)},getSearchId:function(){return this.state.activeSearchId},setQuery:function(a){j.defer(function(){this.props.context.executeAction(t.setQuery,{searchId:this.getSearchId(),query:a})}.bind(this))},shouldShowFolderToken:function(a){var b=this.props.context.getStore(p),c=b.findByFID(a),d=NeoConfig.imapIn?w.getValue(c,"types.0",a):a;return!d||-1===r.SYSTEM_FOLDERS_NO_FILTER.indexOf(d.toUpperCase())},setQueryAccountScope:function(){var a,b,c=this;NeoConfig.imapIn?(b=[],a=this._getCurrentAccount(),b.push({displayName:a.description,acctIds:[a.id]})):b=null,c.setQuery(new o({folders:b}))},setQueryFolderScope:function(a){var b,c,d,e,f,g=this,h=g.props.context,i=NeoConfig.imapIn,k=h.getStore(p),l=this._getAccounts();return a&&a.fid&&g.shouldShowFolderToken(a.fid)?H?void g.setQueryAccountScope():(e=k.findByFID(a.fid),void(e&&(c=e.id||e.folderInfo.index.toString(),f=k.getLocalizedFolderNameById(c),b=l[e.acctId],i&&b&&(f=j.template(K.str_account_folder,null)({account:b.description,folder:f})),d=[{displayName:f,acctIds:i?[e.acctId]:null,folderIds:[c]}],g.setQuery(new o({folders:d}))))):void g.setQueryAccountScope()},_folderSearchOnboardingShown:function(){var a=w.getValue(yui.mail,["persist","MetaData"],{get:function(){}});return this.props.folderSearchTutorial?0:C.enabled("folderSearchOnboarding")?C.enabled("scout")||a.get("hasShownFolderSearchOnboarding"):1},_showNotfication:function(a){yui.use("common-ui-notification-v2",function(b){b.common.ui.NotificationV2.notify(k.renderToString(a.component),{type:a.failure?"error":"info",duration:a.duration||4e3,speed:"show-fast",close:a.close,cbkOnDestroy:!0,cbk:function(b,c){"undo"===c&&a.undoHandler&&a.undoHandler()}})})},_collectResourceTimingStats:function(a,b){var c,d,e,f="";w.getValue(a,"apiJSDuration",!1)&&v.featureLatency("bootcamp_api_js_"+b,a.apiJSDuration),w.getValue(a,"url")&&M&&M.getEntriesByName&&(c=M.getEntriesByName(a.url,"resource"),e=w.getValue(c,[0],!1),e&&e.duration&&(d=Math.round(e.duration),v.featureLatency("bootcamp_api_perf_"+b,d),Q.forEach(function(a){f+=a+"="+e[a]+" ; "}),a.xTiming&&(f+=a.xTiming),v.apiLatency("bootcamp_metrics_"+b+" "+f,d,{api:"bootcamp"}))),a.error?v.stat({name:"search",tags:{result:"failure",login:NeoConfig.loginId,message:w.getValue(a,"error","")}}):v.stat({name:"search",tags:{result:"success"}})},_statMainDuration:function(a,b){var c,d;a.isMain&&(c=v.getTimerStart("doSearch"),d=a.duration-c,v.featureLatency("srp_bootcamp_api_list_"+b,d))},_statFailure:function(a,b){var c="failure";a&&800===a.status&&(c="abort"),v.featureInvoke("srp_search_"+c+"_"+b),v.stat({name:"search",tags:{result:c}})},_collectStats:function(a){var b=w.getValue(a,["searchId"]),c=w.getValue(a,["searchType"]),d=w.getValue(a,["metaData","main","contentType"],"messages"),e=w.getValue(a,["metaData","main","filter"]),f=w.getValue(a,["metaData","status"]),g=w.getValue(a,["data",d,e],[]),h=w.getValue(a,["data","contacts","keyword","items"]),i=w.getValue(a,"error"),k=z.CONTENT_TYPES,l=yui.common.net.Session.genReqID(),m=w.getValue(a,["error",d,e]),n=w.getValue(a,["error",d,e,"status"]),o=n&&200!==n;f&&200!==f||w.getValue(a,["metaData","hasMain"])!==!0||o?800===f?v.featureInvoke("srp_search_abort_"+c):(v.featureInvoke("srp_search_failure_"+c),v.statTAE({message:"search_failed_tae20_"+c,method:o?"bootcamp_srp_chunk":"bootcamp_srp",ymreqid:l},{status:o?n||"":f,error:{code:"SearchProgramFailed"}}),w.getValue(a,["metaData","hasMain"],!1)&&!o||(v.featureInvoke("srp_search_failure_"+c+"_nomain"),v.mailLog({m:"srp_search_main_chunk_error",status:n||"",body:m&&m.message||"",searchType:c,contentType:d,filter:e},!1,"srp_search_mailog")),f&&v.featureInvoke("srp_search_failure_"+c+"_"+f),e&&v.featureInvoke("srp_search_errorfilter_"+e+"_"+c),i&&i.status&&v.mailLog({m:"srp_search_failed",status:i.status,body:i.text,searchType:c,contentType:d,searchFilter:e},!1,"srp_search_mailog")):(w.getValue(a,["metaData","main","isEmpty"])&&(v.featureInvoke("srp_search_empty_"+c),e&&v.featureInvoke("srp_search_emptyfilter_"+e+"_"+c)),v.featureInvoke("srp_search_success_"+c)),f&&200===f&&(i&&j.size(i)>0&&j.each(k,function(a){i[a]&&j.each(i[a],function(b,d){b&&(v.mailLog({m:"srp_search_chunk_failed",status:b.status,body:b.message,searchType:c,contentType:a,filter:d},!1,"srp_search_mailog"),v.featureInvoke("srp_search_chunk_failed_"+c),v.featureInvoke("srp_search_chunk_failmeta_"+b.status+"_"+a+"_"+d))})}),v.logRapid("mt:view",{action:"srp_msg_list_display",append:{mSrchId:b,mSrchQry:a.query,mSrtTyp:w.getValue(a,["sortInfo","sortType"]),mSrtOrd:w.getValue(a,["sortInfo","sortType"]),mSrchSpl:w.getValue(g,"spellCorrection")?1:0,mSrchTtl:g.totalHits||0,mSrchRes:d,mSrchMid:g.items&&g.items.slice(0,50).map(function(a){return a.mid})}}),(C.enabled("searchExtractionsRetention")||C.enabled("searchExtractionsControl"))&&v.retention("searchExtractionsRetention","searchExtractionsControl"),(C.enabled("defaultFilterAll")||C.enabled("defaultFilterAllControl"))&&v.retention("defaultFilterAll","defaultFilterAllControl"),(C.enabled("emailHistoryRetention")||C.enabled("emailHistoryControl"))&&v.retention("emailHistoryRetention","emailHistoryControl"),C.enabled("searchExtractions")&&this._collectExtractionsStats(a),(C.enabled("contactCardRetention")||C.enabled("contactCardControl"))&&v.retention("contactCardRetention","contactCardControl"),C.enabled("emailHistory")&&h&&w.getValue(h,"0.relationshipHistory")&&v.logRapid("mt:view",{action:"srp_emailhistory"}))},_collectExtractionsStats:function(a){var b,c=w.getValue(a,"data.contacts.keyword.items.0.payload.name.source");"ke"===c&&(b=w.getValue(a,"data.extractions.from.items.length",0),b>0?v.stat({name:"srp_extractions_success",tags:{extractionsNum:b}}):v.stat({name:"srp_extractions_failure"}))},_collectSuggestionStats:function(a){return a.fromCache?void v.featureComplete("search_sugg_fetch_bootcamp_cache"):(v.featureInvoke("search_sugg_fetch_bootcamp"),void(200===a.status?(v.featureLatency("bootcamp_fetch",a.duration),v.featureComplete("search_sugg_fetch_bootcamp")):(800===a.status?v.featureInvoke("bootcamp_fetch_err_abort"):v.featureLatency("bootcamp_fetch_err",a.duration),v.featureFail("search_sugg_fetch_bootcamp"))))},_reAuthenticate:function(a){yui.once("net:reloginSuccessful",function(){this.props.context.executeAction(t.executeSearch,{query:a.query})}.bind(this)),yui.common.net.Error.simpleRelogin()},_getPhoto:function(a){var b=this,c=a&&a.data,d=c&&c.contacts,e=d&&d[0],f=function(a){a!==!1&&["facebook","twitter","linkedin","flickr","corpdir"].indexOf(a)>-1&&b.props.context.executeAction(t.photoSource,{contact:e,phtotoSource:a})};yui.use("xobni-contacts-search-api",function(a){a.xobniContacts&&e&&a.xobniContacts.searchAPI.photo({id:e.id.slice(2),updated:e.payload.updated},f)})},_setUserData:function(a){yui.use("mail-persist-meta-data",function(){var b=yui.mail.persist.MetaData;Object.keys(a).forEach(function(c){b.set(c,a[c])})})},componentDidMount:function(){var a=document.getElementById("yucs-search"),b=document.createElement("div"),c="StencilRoot search-container Mt-10 Mx-0 W-45 Whs-nw mwpx-860";C.enabled("searchresults")&&this.props.context.getStore(n).on("changed",this.handleAction),a||(a=document.getElementById("UHSearch"),c="StencilRoot search-container M-0 Whs-nw mwpx-860"),a&&(b.className=c,a.parentNode.insertBefore(b,a),k.render(k.createElement(m,{context:this.props.context,accounts:this._getAccounts(),currentAccount:this._getCurrentAccount(),isImapinEnabled:NeoConfig.imapIn,searchKeywordPlaceholderEnabled:C.enabled("searchKeywordPlaceholder"),isRTL:O,hasShownFolderSearchOnboarding:this._folderSearchOnboardingShown()}),b)),this._initSettings()},showCustomViewsCallout:function(a){var b,c,d=a.query,e=w.getValue(d,["keyword"],""),f=w.getValue(d,["folders",0,"displayName"],""),g=this._getCurrentAccount(),h=yui.mail.persist.MetaData.get("neo.pref.savedSearch"),i=yui.mail.persist.MetaData.get("simpleCustomViews"),k=3,l=10,m=this;try{b=j.find(JSON.parse(h)||[],function(a){var b=a.count&&parseInt(a.count,10);return a.query&&a.query===e&&(b===k||b===l)})}catch(n){}if(b){if(i)try{c=j.find(JSON.parse(i.json)||[],function(b){return b.account&&b.account===g.id&&b.searchId&&j.isEqual(b.searchId,a.searchId)})}catch(n){}c||document.getElementsByClassName("onboardtip").length||yui.use("mail-ui-onboarding","common-utils",function(c){var h,i=c.mail.ui.Onboarding;i.showDefaultOnboarding({name:"showCustomViewsCallout",node:".srp-save-smartview",pointer:"top",bdText:c.common.Utils.ezSub(K.str_custom_view_callout_text,{query:c.Escape.html(e),count:c.Escape.html(b.count)}),btnPrimaryText:K.str_save,btnCancelText:K.str_not_now,offset:[-155,30],onSuccess:function(){m.props.context.executeAction(u.saveSmartView,{name:((f||"")+" "+e).trim()||K.str_saved_search,query:{keyword:e||"",folders:d.folders||[],smartviews:d.smartviews||[]},account:g.id,searchId:a.searchId})},onShow:function(){h=c.one(document).on("click",function(a){!a.target||a.target.hasClass("callout-default")||a.target.ancestor("callout-default")||(h.detach(),i.closeDefaultOnboarding("showCustomViewsCallout"))})},onClose:function(){h&&h.detach()},onUnmount:function(){h&&h.detach()},classNames:["customview-callout"]},!0)})}},componentWillUnmount:function(){C.enabled("searchresults")&&this.props.context.getStore(n).removeListener("changed",this.handleAction)},shouldComponentUpdate:function(){return!1},openCloudStorageSetting:function(){yui.fire("openOptions",{view:"accounts"})},handleAction:function(){var a=this.props.context.getStore(n).getActionInfo(),b=w.getValue(a,["data"],{}),c=w.getValue(b,["metaData"],{}),d=yui.mail.persist.MetaData,e=d.get("typeTag");switch(a.action){case q.NOTIFICATION_SHOW:this._showNotfication(a.data);break;case q.METADATA_CHANGE:this._setUserData(b),e&&v.logRapid("mt:click",{action:e});break;case q.SAVE_SEARCH:yui.use("tictac-simple",function(a){a.fire("simple:registerCustomView",b)}.bind(this));break;case s.PROGRESS_SUCCESS:case s.PROGRESS_FAILURE:yui.fire("search:bulk:complete");break;case r.FILL_PERMISSION_WINDOW:this.permissionWindow&&this.permissionWindow.location.replace(b.permissionUrl);break;case r.CLOSE_GDOC_PERMISSION:this.permissionWindow&&this.permissionWindow.close();break;case r.SEARCH_START:v.featureInvoke("srp_search_session_"+b.searchType),this._openSearchTab(b,b.searchType),this._fetchSearchAds(b),this._fireRapidSearchStart(b),this._fireYamasSearchStart(b),this._showPartnerSearch(b.query,b.searchType)&&this._loadPartnerSearch(),this._showBingAdModule(b.query,b.searchType)&&this._loadBingAds();break;case r.SEARCH_UPDATE:this._statMainDuration(c,b.searchType);break;case r.SEARCH_SUCCESS:c.reAuthenticate&&this._reAuthenticate(b),this._showPartnerSearch(b.query,b.searchType)&&this._renderPartnerSearch(),NeoConfig.hasAds&&(!this.adCache[b.searchId]||this.state.cache&&this.state.cache[b.searchId]||this.renderSearchAds(b),this._showBingAdModule(b.query,b.searchType)&&this._attachAds(b)),this._collectStats(b),this._collectResourceTimingStats(c,b.searchType),G||this._rotateDisplayAd(b.searchType,b.query),this.showGDocsCallout(),F&&b.searchType&&"keyword"===b.searchType&&this.showCustomViewsCallout(b),this._fireSplunkStats(b);break;case r.SEARCH_FAILURE:c&&c.reAuthenticate&&this._reAuthenticate(b),this._statFailure(c,b.searchType),this._rotateDisplayAd(b.searchType,b.query);break;case q.SEARCH_TAB_ACTIVE:case r.FETCH_MORE_SUCCESS:case r.CHANGE_SEARCH_VIEW:case r.CHANGE_SEARCH_FILTER:this._rotateDisplayAd(b.searchType,b.query);break;case r.BOOTCAMP_SUGGESTIONS_RECEIVED:case r.BOOTCAMP_SUGGESTIONS_FAILURE:this._collectSuggestionStats(c);break;case r.CLOSE_CURRENT_TAB:this._closeSearchTab(a.data);break;case r.CONTACT_ADD:yui.fire("addContact",a.data.name,a.data.email);break;case r.GET_CONTACT_PHOTO_SOURCE:this._getPhoto(a.data);break;case s.PRINT:yui.use("mail-ui-print",function(b){var c=a.data;b.mail.ui.print({fid:c.fid,msg:c})});break;case s.UNSUBSCRIBE:yui.use("mail-ui-unsubscribe",function(a){a.mail.ui.Unsubscribe.handle(b)});break;case s.QUICK_FILTER:yui.use("mail-ui-messagesview-quickfilter",function(b){var c=a.data;b.mail.ui.QuickFilter.createDialog({msgHeader:c})});break;case s.SET_ENCODING:yui.use("mail-ui-message-encodings",function(b){var c=a.data;b.mail.ui.MessageEncodings.setMessageEncoding(c.messages,c.messages[0].fid)});break;case s.REDIRECT_MESSAGE:yui.use("mail-ui-messageevents",function(b){b.mail.ui.MessageEvents.redirectMsgFromSearch({fid:a.data.fid,selectedItems:a.data.selectedItems})});break;case q.ONBOARDING_DISMISSED:b.hasShownFolderSearchOnboarding&&yui.fire("callout:action",{name:"folderSearchOnboarding",action:"close"})}},render:function(){return k.createElement("span",{key:"bridgeComponent"})}}),b.exports=h},{"../../../../artifacts/lang":2,"../../utils/AccountUtils":17,"../autocomplete/Container.jsx":6,ActionStore:"ActionStore",AppDispatcher:"AppDispatcher",BingAdsRightRail:"BingAdsRightRail",BootcampAPIUtilsV2:"BootcampAPIUtilsV2",EnhancedPromise:"EnhancedPromise",FolderStore:"FolderStore",GlobalActions:"GlobalActions",GlobalConstants:"GlobalConstants",MessageConstants:"MessageConstants",ObjectUtils:"ObjectUtils",SearchActions:"SearchActions",SearchConstants:"SearchConstants",SearchQuery:"SearchQuery",StatService:"StatService",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}],10:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("Context"),h=a("FolderStore"),i=a("SearchQuery"),j=a("MenuItem"),k=a("MenuButton"),l=a("MenuItemGroup"),m=a("Utils"),n=a("StringUtils"),o=a("ObjectUtils"),p=a("../../../../artifacts/lang"),q=a("StatService");d=e.createClass({displayName:"FolderDropdown",statName:"folder_dropdown",mixins:[e.addons.PureRenderMixin,g],propTypes:{query:e.PropTypes.object,onSelect:e.PropTypes.func,executeSearch:e.PropTypes.func,openAdvancedSearch:e.PropTypes.func},getDefaultProps:function(){return{query:{},isImapinEnabled:!1,onSelect:f.noop,executeSearch:f.noop,openAdvancedSearch:f.noop}},render:function(){var a=this.props,b={"right-folder-dd":!0,"search-folder-scope-dd":!0,"search-two-boxes":a.searchTwoBoxes},c={"right-folder-dd":!0,"search-folder-dropdown":!0},d=f.size(a.accounts)>1?p.str_all_accounts:p.str_all_mail,g=this.getSelectionInfo();return b[a.className]=a.className,c[a.className]=a.className,b=e.addons.classSet(b),c=e.addons.classSet(c),e.createElement(k,{ref:"menu",className:b,ddClassName:c,label:this.renderMenuTokenAndChevron(g),name:this.statName,dropdownXOrigin:"left",onOpen:this.handleMenuOpen},e.createElement(l,{title:p.str_search_in,overflow:!0,togglable:!0,className:"search-in-title"},e.createElement(j,{value:"search_in_all_account",title:d,selected:"all"===g.type,className:"all-account-menu-item",onClick:this.handleUserSelection.bind(this,"all",this.props.accounts)},e.createElement("span",null,e.createElement("span",null,d))),this.renderAccounts(g)),e.createElement(l,null,e.createElement(j,{className:"search-folder-scope-adv",title:p.str_advanced_mail_search,onClick:this.handleAdvSearchClick},e.createElement("span",{className:"search-folder-name"},p.str_advanced_search))))},renderMenuTokenAndChevron:function(a){var b=m.detectDirection(a.name||"",this.props.isRTL?"rtl":"ltr"),c=a.name,d=c.substring(c.lastIndexOf("/")+1,c.length);return e.createElement("span",null,e.createElement("span",{className:"icon icon-small-search"}),e.createElement("span",{className:"token-folder-account"},e.createElement("span",{title:c,"data-value":d,dir:b,className:"token-folder-account-text"},d)),e.createElement("span",{className:"icon icon-chevron"}))},renderAccounts:function(a){var b=this.getStore(h),c=f.size(this.props.accounts);return f.map(this.props.accounts,function(d){var g=f.chain(b.getSearchableSystemFoldersByAccount(d.id)).sort(b.sortSystemFolderComparator).value(),h=f.chain(b.getSearchableUserFoldersByAccount(d.id)).sort(b.sortByFolderNameComparator).value(),i=this.props.smartViews,j=[];return c>1&&j.push(this.renderAccountTitle(d,a)),j=f.compact(j.concat([this.renderFolders(d,g,a,c>1?2:1),this.renderSmartViewsGroup(this.renderSmartViews(d,i,a,c>1?3:2)),this.renderUserFoldersGroup(this.renderFolders(d,h,a,c>1?3:2))])),e.createElement(l,null,j)}.bind(this))},renderAccountTitle:function(a,b){return e.createElement(j,{value:a.description,title:a.description,selected:"account"===b.type&&b.id===a.id,className:"account-menu-item",onClick:this.handleUserSelection.bind(this,"account",a)},e.createElement("span",null,a.description))},renderUserFoldersGroup:function(a){return f.size(a)<=0?null:e.createElement(l,{value:p.str_folders,title:p.str_folders,className:"dropdown-menu-title"},a)},renderFolders:function(a,b,c,d){var g=this.getStore(h),i=this.props.isRTL?"padding-right":"padding-left",k=12;return f.map(b,function(a){var b=g.getLocalizedFolderNameById(a.id||a.folderInfo.index.toString()),f=b,h=b.substring(b.lastIndexOf("/")+1,b.length),l=(b.match(/\//g)||[]).length+d,m=l?k*l+"px":"",o={};return o[i]=m,e.createElement(j,{value:h,title:f,selected:"folder"===c.type&&c.id===a.id,onClick:this.handleUserSelection.bind(this,"folder",a)},e.createElement("span",{className:"search-folder-name",style:o,dir:n.getTextDirection(h)},h))}.bind(this))},renderSmartViewsGroup:function(a){return a&&a.length?e.createElement(l,{value:p.str_folders,title:p.str_smartviews,className:"dropdown-menu-title"},a):void 0},renderSmartViews:function(a,b,c,d){var g={},h=12,i=this.props.isRTL?"padding-right":"padding-left",k=b,l=a.id;return g[i]=h*d+"px",f.size(this.props.accounts)>1&&(k=f.filter(k,function(a){return void 0===a.account||a.account===l})),f.map(k,function(a){var b=p["str_"+a.displayName]||a.displayName,d=void 0===a.account?f.merge({},{acctId:l},a):a;return e.createElement(j,{value:b,title:b,selected:c.id===a.displayName&&(!c.acctId||c.acctId===l),onClick:this.handleUserSelection.bind(this,"smartview",d)},e.createElement("span",{className:"search-folder-name",style:g},b))}.bind(this))},getSmartView:function(){var a=o.getValue(this.props.query,["smartviews"],[]),b=this.props.smartViews||[];return f.filter(b,function(b){return JSON.stringify(b.query.smartviews)===JSON.stringify(a)})},getSelectionInfo:function(){var a,b,c=this.getSmartView(),d=this.getStore(h),e=o.getValue(this.props.query,["folders"],[]).filter(function(a){return a.folderIds&&a.folderIds.length}),g=o.getValue(this.props.query,["folders"],[]).filter(function(a){return a.acctIds&&a.acctIds.length}),i={type:"all",id:p.str_all,name:p.str_all};return c.length>0?(a=p["str_"+c[0].displayName]||c[0].displayName,i={type:"smartview",id:c[0].displayName,name:a,acctId:o.getValue(g,"0.acctIds.0")}):e.length>0?(a=d.getLocalizedFolderNameById(e[0].folderIds),b=f.find(this.props.accounts,function(a){return a.id===o.getValue(e,"0.acctIds.0")}),f.size(this.props.accounts)>1&&(a=b.description+"/"+a),i={type:"folder",id:o.getValue(e,"0.folderIds.0",""),name:a}):g.length>0&&f.size(this.props.accounts)>1&&(i={type:"account",id:o.getValue(g,"0.acctIds.0",null),name:g[0].displayName}),i},handleUserSelection:function(a,b){var c,d=this.props.query,e=this.getStore(h),f=!(!(d.keyword||"").trim()&&!d.suggestion);switch(a){case"all":c=new i({keyword:d.keyword,refinements:d.refinements,suggestion:d.suggestion}),q.mailLog({m:"search_"+this.statName+"_allMail_click",yid:NeoConfig.loginId});break;case"account":c=new i({keyword:d.keyword,refinements:d.refinements,suggestion:d.suggestion,folders:[{displayName:b.description,acctIds:[b.id],folderIds:null}]});break;case"folder":c=new i({keyword:d.keyword,refinements:d.refinements,suggestion:d.suggestion,folders:[{displayName:e.getLocalizedFolderNameById(b.id),acctIds:[b.acctId],folderIds:b.id}]}),b.isSystem&&q.mailLog({m:"search_"+this.statName+"_folder_click",folder:b.folderInfo.name,yid:NeoConfig.loginId});break;case"smartview":c=new i({keyword:d.keyword,refinements:d.refinements||b.refinements,suggestion:d.suggestion||b.suggestion,smartviews:b.query.smartviews,folders:b.acctId?[{acctIds:[b.acctId],folderIds:null}]:[]})}this.props.onSelect(c),f&&this.props.executeSearch(c),this.refs.menu.closeMenu(),q.mailLog({action:"search_box_filter_select",append:{mSrchQry:d.toString()}})},handleAdvSearchClick:function(){var a=this;a.props.openAdvancedSearch(),q.logRapid("mt:click",{action:"search_box_adv_search_fld_dd"}),q.mailLog({m:"react_search_"+a.statName+"_advSearch_click",yid:NeoConfig.loginId})},handleMenuOpen:function(){q.mailLog({m:"react_search_menu_"+this.statName+"_open",yid:NeoConfig.loginId}),q.stat("search_box_folder_dd_open"),q.logRapid("mt:click",{action:"search_box_filter_dd"})}}),b.exports=d},{"../../../../artifacts/lang":2,Context:"Context",FolderStore:"FolderStore",MenuButton:"MenuButton",MenuItem:"MenuItem",MenuItemGroup:"MenuItemGroup",ObjectUtils:"ObjectUtils",SearchQuery:"SearchQuery",StatService:"StatService",StringUtils:"StringUtils",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}],11:[function(a,b,c){"use strict";var d={componentDidMount:function(){window.addEventListener("mousedown",this.DropdownMixin_handleWindowClick,!0)},componentWillUnmount:function(){window.removeEventListener("mousedown",this.DropdownMixin_handleWindowClick,!0)},DropdownMixin_handleWindowClick:function(a){var b,c=this.props.parentNode||this.getDOMNode();for(b=a.target;b;b=b.parentNode){if(b&&(b.hasAttribute&&b.hasAttribute("data-preventclose")||b.className&&-1!==b.className.split(" ").indexOf("advanced-search-folder-menu")))return;if(b===c)break}b||this.props.setClosed()}};b.exports=d},{}],12:[function(a,b,c){"use strict";YUI.add("tictac-search",function(b){function c(){window.React=window.React||a("react/addons");var b=a("AppDispatcher"),c=a("ActionStore"),d=a("./components/bridge/StormBridge.jsx"),e=a("./stores/ProgressStore"),f=document.createElement("div");[c,e].forEach(b.registerStore),f.id="storm-bridge",document.body.appendChild(f),window.React.render(window.React.createElement(d,{context:b.context,folderSearchTutorial:-1!==window.location.search.indexOf("folderSearchTutorial")&&NeoConfig.isInternal}),f),yui.fire("search:loaded")}b.namespace("Tictac").search={loader:function(){var b=a("lodash");a("../../artifacts/css/main.css"),b.defer(c,5),yui.detach("search:input")},isSearchResultsReallyEnabled:function(a){a(!0)}}},"1.0.0",{requires:["tictac-lib","mail-persist-meta-data","common-utils"]})},{"../../artifacts/css/main.css":1,"./components/bridge/StormBridge.jsx":9,"./stores/ProgressStore":"ProgressStore",ActionStore:"ActionStore",AppDispatcher:"AppDispatcher",lodash:"lodash","react/addons":"react/addons"}],13:[function(a,b,c){"use strict";function d(a,b){return f.findIndex(a||[],function(a){return"string"==typeof a&&a===b||a.query&&a.query===b})}var e,f=a("lodash"),g=a("StatService"),h="neo.pref.savedSearch";e={get:function(){return yui.use("mail-persist-meta-data").then(function(a){var b=a.mail.persist.MetaData.get(h),c=[];g.stat({name:"search_sugg_fetch_recent"});try{c=JSON.parse(b)}catch(d){}return c})},add:function(a){return!yui.common.Utils.features.enabled("searchresults")||"string"==typeof a&&!a.trim()?this.get():yui.use("mail-persist-meta-data").then(function(b){var c,e=b.mail.persist.MetaData.get(h),i=e?JSON.parse(e):[],j=d(i,a);return j>-1?(c=f.pullAt(i,j)[0],c.count?c.count=parseInt(c.count,10)+1:c=yui.common.Utils.features.enabled("customViewsCallout")?{query:a,count:2}:a,i.unshift(c)):i.unshift(a),i=f.uniq(i).slice(0,NeoConfig.maxSearchHistory),a&&(b.mail.persist.MetaData.set(h,JSON.stringify(i)),g.stat({name:"search_sugg_add_recent"})),i})},remove:function(a){return yui.use("mail-persist-meta-data").then(function(b){var c=f.uniq(JSON.parse(b.mail.persist.MetaData.get(h))).slice(0,NeoConfig.maxSearchHistory),e=d(c,a);return e>-1&&(c.splice(e,1),b.mail.persist.MetaData.set(h,JSON.stringify(c))),g.stat({name:"search_sugg_remove_recent"}),c})}},b.exports=e},{StatService:"StatService",lodash:"lodash"}],14:[function(a,b,c){"use strict";function d(a){f.call(this,a)}var e=a("lodash"),f=a("./SearchSuggestion");d.prototype=e.extend(Object.create(f.prototype),{constructor:d,getMatchAndRemainder:function(a){var b=[this.displayStr].concat(this.emailAddresses),c=e.find(b,function(b){return this.getRemainingPart(b,a)},this);return this.getRemainingPart(c||"",a)},getInitials:function(){var a=this.displayStr.split(" ");return[].concat(a.shift()||[]).concat(a.pop()||[]).map(function(a){return(a.charAt(0)||"").toUpperCase()}).join("")},getAdvancedSearchQuery:function(){return this.displayStr.indexOf(" ")>-1?'from:"'+this.displayStr+'" ':"from:"+this.displayStr+" "}}),b.exports=d},{"./SearchSuggestion":15,lodash:"lodash"}],15:[function(a,b,c){"use strict";function d(a){e.merge(this,a)}var e=a("lodash"),f=a("StringUtils");d.prototype={getOverrideText:function(){var a;return a="SEARCH_WEB"===this.intent?"":this.overrrideWithEmail?this.emailAddresses[0]:this.displayStr},getRemainingPart:function(a,b){var c,d,e;return c=f.escapeRegExp(b),d=new RegExp("(^|\\s)"+c+"(.*)","i"),
e=d.exec(a),e?b+e[2]:""},getMatchAndRemainder:function(){return""}},b.exports=d},{StringUtils:"StringUtils",lodash:"lodash"}],16:[function(a,b,c){"use strict";function d(a){a=e.merge({},a,{intent:"SEARCH_TRENDING_NOW"}),f.call(this,a)}var e=a("lodash"),f=a("./SearchSuggestion");d.prototype=e.extend(Object.create(f.prototype),{constructor:d,getItemName:function(){return this.search_term}}),b.exports=d},{"./SearchSuggestion":15,lodash:"lodash"}],17:[function(a,b,c){"use strict";var d=a("lodash"),e={};e.findAccountsInSyncing=function(a,b){var c=this,e=[];return d.each(a,function(a){c.isAccountSyncing(a,b)&&e.push(a)}),e},e.isAccountSyncing=function(a,b){var c;return!!(a&&"ENABLED"===a.status&&"IMAPIN"===a.type&&a.createTime&&(c=(d.now()/1e3-a.createTime)/60,b>=c))},b.exports=e},{lodash:"lodash"}],18:[function(a,b,c){function d(a,b,c){var d=a.getElementById(b);if(d)c(d);else{var e=a.getElementsByTagName("head")[0];d=a.createElement("style"),d.id=b,c(d),e.appendChild(d)}return d}b.exports=function(a,b,c){var e=b||document;if(e.createStyleSheet){var f=e.createStyleSheet();return f.cssText=a,f.ownerNode}return d(e,c,function(b){b.styleSheet?b.styleSheet.cssText=a:b.innerHTML=a})},b.exports.byUrl=function(a){if(document.createStyleSheet)return document.createStyleSheet(a).ownerNode;var b=document.getElementsByTagName("head")[0],c=document.createElement("link");return c.rel="stylesheet",c.href=a,b.appendChild(c),c}},{}],ActionStore:[function(a,b,c){"use strict";function d(a){this.dispatcher=a,this.payload={},this.setMaxListeners(256)}var e=a("lodash"),f=a("events").EventEmitter,g=a("GlobalConstants"),h={};d.prototype=e.merge({constructor:d,getActionInfo:function(){return this.payload},_onAction:function(a,b){this.payload={action:b,data:a},this.emit("changed")}},f.prototype),h[g.DEFAULT]="_onAction",d.storeName="ActionStore",d.handlers=h,b.exports=d},{GlobalConstants:"GlobalConstants",events:"events",lodash:"lodash"}],ProgressStore:[function(a,b,c){"use strict";function d(a){this.dispatcher=a,this._clearBulkProgress(),this.setMaxListeners(4)}var e=a("lodash"),f=a("events").EventEmitter,g=a("MessageConstants"),h={},i={from:0,size:0,total:0,title:"",progressing:!1,success:!1,errorMsgsInfo:"",promise:null};d.prototype=e.merge({constructor:d,getData:function(){return this.data},_clearBulkProgress:function(){this.data=e.clone(i)},_processUpdate:function(a){this.data=e.assign({},this.data,a)},_progressStart:function(a){this._clearBulkProgress(),this._processUpdate({progressing:!0,success:!1,promise:a.promise,title:a.title}),this.emit("changed")},_progressSuccess:function(a){this._processUpdate({progressing:!1,success:!0,total:a.total}),this.emit("changed")},_progressFailure:function(a){this._processUpdate({progressing:!1,success:!1,total:a.total,errorMsgsInfo:a.errorMsgsInfo}),this.emit("changed")},_progressUpdate:function(a){this._processUpdate({progressing:!0,success:!1,from:a.from,size:a.size,total:a.total,progress:a.progress,promise:a.promise||this.data.promise}),this.emit("changed")}},f.prototype),h[g.PROGRESS_START]="_progressStart",h[g.PROGRESS_SUCCESS]="_progressSuccess",h[g.PROGRESS_FAILURE]="_progressFailure",h[g.PROGRESS_UPDATE]="_progressUpdate",d.storeName="ProgressStore",d.handlers=h,b.exports=d},{MessageConstants:"MessageConstants",events:"events",lodash:"lodash"}],SearchActions:[function(a,b,c){"use strict";function d(){return new q({bucketId:NeoConfig.expBucketId,wssid:NeoConfig.wssid,mailboxId:NeoConfig.V3MailboxId,isForceUser:NeoConfig.forceDS,imapInEnabled:NeoConfig.imapIn,hasMultipleAccounts:x,searchGDocsEnabled:yui.common.Utils.features.enabled("searchGoogleDocs"),searchInTrashEnabled:yui.common.Utils.features.enabled("searchInTrash"),searchResultsLinksEnabled:yui.common.Utils.features.enabled("searchResultsLinks"),searchExtractionsEnabled:yui.common.Utils.features.enabled("searchExtractions"),lmv3Enabled:yui.common.Utils.features.enabled("LMV3"),bcHost:z})}function e(a,b){var c,d=a.split("&"),e={};return j.size(b)>0&&(j.each(d,function(a,f){c=a.split("="),c[0]&&!j.isUndefined(b[c[0]])&&(d[f]=c[0]+"="+b[c[0]],e[c[0]]=!0)}),j.each(b,function(a,b){e[b]||d.push(b+"="+a)})),d.join("&")}function f(a,b,c){var e=d();e.searchItems({url:c.url}).then(function(d){a.dispatch(b.SUCCESS,{data:d.data,metaData:d.metaData,error:d.error,searchId:c.searchId,filter:c.filter||c.currentFilter,type:c.type||c.currentView,contentType:c.contentType,searchType:c.searchType}),c.callback&&c.callback(d.data)},function(d){800!==d.metaData.status&&a.dispatch(b.FAILURE,{data:d.data,metaData:d.metaData,error:d.error,searchId:c.searchId,filter:c.currentFilter,type:c.type||c.currentView,contentType:c.contentType,searchType:c.searchType})})}function g(a){var b={};return j.each(a,function(a,c){j.each(a,function(d,e){d.items.length>0&&(b[c]||(b[c]={}),b[c][e]=a[e])})}),b}function h(a){var b=j.chain(j.pluck(a,"acctIds")).compact().flatten().uniq().value(),c=!1;return x&&!b.length&&(b=j.map((k.get()||[]).filter(function(a){return"ENABLED"!==a.status&&(c=!0),"ENABLED"===a.status}),"id"),c||(b=null)),b}var i,j=a("lodash"),k=yui.mail.model.DataStore.Accounts,l=a("StatService"),m=a("SearchConstants"),n=a("UserSettingsConstants"),o=a("Utils"),p=a("ObjectUtils"),q=a("BootcampAPIUtilsV2"),r=yui.common.Utils.features,s=yui.mail.persist.MetaData,t="neo.pref.searchSortBy",u=a("SearchUtils"),v=a("../services/RecentSearchService"),w={},x=NeoConfig.multipleAccounts,y=a("IO"),z=yui.common.Utils.getBootcampURL();i={setQuery:function(a,b){a.dispatch(m.SET_QUERY,{query:b.query,searchId:b.searchId})},changeSearchView:function(a,b){var c=p.getValue(b,["resultCount","count"],0),d={searchId:b.searchId,searchType:b.searchType,contentType:b.contentType,filter:b.filter,url:b.url},e={SUCCESS:m.CHANGE_VIEW_FETCH_SUCCESS,FAILURE:m.CHANGE_VIEW_FETCH_FAILURE};a.dispatch(m.CHANGE_SEARCH_VIEW,d),(!c||0>=c)&&(a.dispatch(m.CHANGE_VIEW_FETCH_START,d),f(a,e,d))},changeSearchFilter:function(a,b){var c,e,f=p.getValue(b,["resultCount","count"],0),h=b.query,i={sortOrder:b.sortOrder,sortType:b.sortType},k=b.filter?b.filter:b.newFilter;a.dispatch(m.CHANGE_SEARCH_FILTER,b),b.isForceUser||f&&!(0>=f)||(a.dispatch(m.CHANGE_FILTER_FETCH_START,b),e=d(),c=e.search({reqId:yui.common.net.Session.genReqID(),query:h.keyword,serviceId:p.getValue(h,"suggestion.serviceId"),emailAddresses:p.getValue(h,"suggestion.emailAddresses"),defaultFilter:k,sortInfo:i,refinements:h.refinements,folders:j.chain(j.pluck(h.folders,"folderIds")).compact().flatten().uniq().value(),accountIds:j.chain(j.pluck(h.folders,"acctIds")).compact().flatten().uniq().value(),limit:50}).then(function(c){var d=g(c.data);a.dispatch(m.SEARCH_UPDATE,{data:d,metaData:c.metaData,error:c.error,searchId:b.searchId,filter:k,contentType:b.contentType,searchType:b.searchType}),a.dispatch(m.CHANGE_FILTER_FETCH_SUCCESS,{data:d,metaData:c.metaData,error:c.error,searchId:b.searchId,filter:k,contentType:b.contentType,searchType:b.searchType})},function(c){a.dispatch(m.CHANGE_FILTER_FETCH_FAILURE,{data:c.data,metaData:c.metaData,error:c.error,searchId:b.searchId,filter:k,contentType:b.contentType,searchType:b.searchType})},function(c){var d=g(c.data);a.dispatch(m.SEARCH_UPDATE,{data:d,metaData:c.metaData,error:c.error,searchId:b.searchId,filter:k,contentType:b.contentType,searchType:b.searchType})}))},executeSearch:function(b,c){var e,f,g,k,v,w,x=c.query,y=x.refinements,z=n.MSG_SORT_TYPE_DATE,A=c.sortType,B=a("FolderStore"),C=yui.common.Utils.settings.value("defaultFilter"),D=j.find(x.folders,function(a){var b=B.prototype.findByIndex(p.getValue(a,"folderIds.0","")),c=p.getValue(b,"types.0","")||p.getValue(b,"folderInfo.fid","");return c=c.toUpperCase(),"DRAFT"===c||"SENT"===c}),E={sortOrder:c.sortOrder||n.MSG_SORT_ORDER_DOWN},F={query:x,sortOrder:c.sortOrder||n.MSG_SORT_ORDER_DOWN},G=s.get(t),H=x.suggestion,I=p.getValue(c,"query.typeTag",""),J=p.getValue(x,["smartviews"],[]),K=c.query.keyword,L=x.folders||[];j.map(J,function(a){K=[].concat(K,a.keyword).join(" "),H=j.merge({},a.suggestion,H),L=L.concat(a.folders)}),A||(A=z,r.enabled("stickySearchSort")&&G&&G===n.MSG_SORT_TYPE_RELEVANCE&&(A=G)),E.sortType=F.sortType=A,e=u.generateSearchID(c.query,A,c.sortOrder||n.MSG_SORT_ORDER_DOWN),k=q.getSearchType(H),F.searchId=e,F.searchType=k,F.typeTag=I,l.timerStart("doSearch"),l.timerStart("doSearchRender"),w=d(),f=w.search({reqId:yui.common.net.Session.genReqID(),query:K,serviceId:p.getValue(H,"serviceId"),emailAddresses:p.getValue(H,"emailAddresses"),defaultFilter:D?"to":C,sortInfo:E,refinements:c.query.refinements,folders:j.chain(j.pluck(L,"folderIds")).compact().flatten().uniq().value(),accountIds:h(L),limit:50}).then(function(a){b.dispatch(m.SEARCH_UPDATE,{data:a.data,metaData:a.metaData,error:a.error,searchId:e,sortInfo:E,searchType:k,query:x}),b.dispatch(m.SEARCH_SUCCESS,{data:a.data,metaData:a.metaData,error:a.error,searchId:e,searchType:k,sortInfo:E,query:x})},function(a){return b.dispatch(m.SEARCH_FAILURE,{data:a.data,metaData:a.metaData,error:a.error,searchId:e,searchType:k,sortInfo:E,query:x}),a.data},function(a){return b.dispatch(m.SEARCH_UPDATE,{data:a.data,metaData:a.metaData,error:a.error,searchId:e,searchType:k,sortInfo:E,query:x}),a.data}),r.enabled("stickySearchSort")&&A!==G&&s.set(t,A),v=!!o.loadPromisesMap["tictac-searchresults"],v||l.timerStart("loadSearchResultsTictac"),o.loadTictac("tictac-searchresults").then(function(){v||(l.stat({name:"search_results_tictac_notloaded"}),l.featureLatency("srp_load_tictac",l.timerComplete("loadSearchResultsTictac"))),b.dispatch(m.SEARCH_START,F)}),x.isKeywordOnly()&&!x.view&&i.addRecentSearch(b,x.keyword),x.suggestion?l.stat("do_search_with_people_token"):x.refinements&&x.refinements.length>0?(g=y.filter(function(a){return 0===a.lastIndexOf("in:",0)}).length,g&&l.stat({name:"do_search_with_folder_token",tags:{folderTokenNum:g}})):l.stat({name:"do_search_with_keywords",tags:{numchars:x.keyword.length}})},fetchSuggestions:function(){var a=0,b=-1;return function(c,e){var f,g,h,i,k,n=e.query,p=e.searchId,q=a++,r=n.keyword&&n.keyword.trim(),s="";!n.suggestion&&n.keyword&&(g=j.chain(j.pluck(n.folders,"acctIds")).compact().flatten().uniq().value(),g&&g.length>0&&(f=e.accounts[g[0]],f&&(s=f.email)),i=d(),k=i.getSuggestions({reqId:yui.common.net.Session.genReqID(),query:r,accountemail:s,fechnpsy:e.fechnpsy,suggestionsCache:w}),h=!!o.loadPromisesMap["tictac-searchresults"],h||l.timerStart("loadSearchResultsTictac"),o.loadTictac("tictac-searchresults").then(function(){h||l.featureLatency("srp_load_tictac",l.timerComplete("loadSearchResultsTictac"))}),k&&k.then(function(a){q>b&&(c.dispatch(m.BOOTCAMP_SUGGESTIONS_RECEIVED,{data:a.data,metaData:a.metaData,error:a.error,searchId:p,query:n}),b=q)},function(a){q>b&&c.dispatch(m.BOOTCAMP_SUGGESTIONS_FAILURE,{data:a.data,metaData:a.metaData,error:a.error,searchId:p,query:n})}))}}(),fetchTrendingTerms:function(){var a=0,b=-1;return function(c,d){var e,f=d.query,g=yui.common.Utils.settings.value("trendingNowEndpoint"),h=a++,i=y.get(g);i&&i.then(function(a){if(h>b){if(200===a.status)try{e=JSON.parse(a.text)}catch(d){throw"Error parsing the response"}c.dispatch(m.TRENDING_NOW_TERMS_RECEIVED,{data:e,query:f}),b=h}},function(a){h>b&&c.dispatch(m.TRENDING_NOW_TERMS_FAILURE,{data:a.text,query:f})})}}(),setSelectedItems:function(a,b){a.dispatch(m.SET_SELECTED_ITEMS,b)},fetchMoreSearchResults:function(a,b){var c={},d={SUCCESS:m.FETCH_MORE_SUCCESS,FAILURE:m.FETCH_MORE_FAILURE};a.dispatch(m.FETCH_MORE,{searchId:b.searchId,filter:b.filter,contentType:b.contentType,searchType:b.searchType}),b.limit&&(c.limit=b.limit),c.offset=b.offset?b.offset:50,b.url=e(b.url,c),f(a,d,b)},fillPageWithResults:function(a,b){var c={},d={SUCCESS:m.FILL_SCREEN_SUCCESS,FAILURE:m.FILL_SCREEN_FAILURE};a.dispatch(m.FILL_SCREEN,{searchId:b.searchId,filter:b.filter,contentType:b.contentType,searchType:b.searchType}),b.limit&&(c.limit=b.limit),c.offset=b.offset?b.offset:50,b.url=e(b.url,c),f(a,d,b)},doCalendarSearch:function(a,b){yui.fire("fireSearch",b.query.keyword),l.stat({name:"search_sugg_search_cal"})},doContactsSearch:function(a,b){yui.fire("fireSearch",b.query.keyword),l.stat({name:"search_sugg_search_contacts"})},doNotepadSearch:function(a,b){yui.fire("fireSearch",b.query.keyword),l.stat({name:"search_sugg_search_notepad"})},loadRecentSearches:function(a){v.get().then(function(b){a.dispatch(m.LOAD_RECENT_SEARCHES,{data:b})})},addRecentSearch:function(a,b){v.add(b).then(function(b){a.dispatch(m.ADD_RECENT_SEARCH,{data:b})})},removeRecentSearch:function(a,b){v.remove(b).then(function(b){a.dispatch(m.REMOVE_RECENT_SEARCH,{data:b})})},searchAdsSuccess:function(a,b){a.dispatch(m.SEARCH_ADS_SUCCESS,{searchId:b.searchId,data:b.data})},cleanUpSearchResults:function(a,b){a.dispatch(m.CLEAN_UP_SEARCH_RESULTS,{searchId:b.searchId})},closeCurrentTab:function(a,b){a.dispatch(m.CLOSE_CURRENT_TAB,{searchId:b.searchId,query:{}})},addContact:function(a,b){a.dispatch(m.CONTACT_ADD,b)},photoSource:function(a,b){a.dispatch(m.CONTACT_PHOTO_SOURCE,b)},getPhotoSource:function(a,b){a.dispatch(m.GET_CONTACT_PHOTO_SOURCE,b)}},b.exports=i},{"../services/RecentSearchService":13,BootcampAPIUtilsV2:"BootcampAPIUtilsV2",FolderStore:"FolderStore",IO:"IO",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",SearchUtils:"SearchUtils",StatService:"StatService",UserSettingsConstants:"UserSettingsConstants",Utils:"Utils",lodash:"lodash"}],SearchQuery:[function(a,b,c){"use strict";function d(){return m.enabled("attachmentQueryTokens")}function e(a){var b,c;for(b=0;b<p.SMARTVIEW_CATEGORIES.length;b++)if(c=p.SMARTVIEW_CATEGORIES[b],c===a.toLowerCase()||l["str_"+c]===a)return c;return""}function f(a,b){var c,d,e,f,g,h,i,k=[];for(a=a.replace(new RegExp("^(['\"])(.*?)\\1$","g"),"$2"),a=a.trim(),c=0;c<b.length;c++)d=b[c],e=d.folderInfo.fid,f=d.id||d.folderInfo.index.toString(),g=n.normalizeFid(e),h=l["str_folder_"+d.folderInfo.name.toLowerCase()]||"",d.isSystem?g!==a.toLowerCase()&&d.folderInfo.name.toLowerCase()!==a.toLowerCase()&&h.toLowerCase()!==a.toLowerCase()||(k.push(f),i=i||h||a):d.folderInfo.name===a&&(k.push(f),i=i||a);return j.isEmpty(k)?null:{folderIds:k,displayName:i}}function g(a,b){var c,d=[];return a=a.replace(new RegExp("^(['\"])(.*?)\\1$","g"),"$2"),j.forEach(b,function(b){a.toLowerCase()===b.description.toLowerCase()&&(d.push(b.id),c=c||b.description)}),!j.isEmpty(d)&&{acctIds:d,displayName:c}}function h(a,b,c){var h,i=a.keyword,j=a.refinements||[],k=a.folders||[],l=a.typeTag||"";return t.test(i)?{keyword:i.trim(),refinements:j,folders:k,typeTag:l}:(h=i.match(p.REGEX_HAS_IS_IN_ACCOUNT),h&&h.forEach(function(h){var l,m,n,o,p=h.trim(),q=p.split(":"),s=!1;"in"===q[0]?(l=f(q[1],b),l&&(k.push(l),s=!0)):"account"===q[0]?(m=g(q[1],c),m&&(k.push(m),s=!0)):"is"!==q[0]||r&&!a.view?"has"===q[0]&&d()&&(j.push(p),s=!0):(n=e(q[1]),o="is:"+n,s=!0,j.indexOf(o)<0&&n&&j.push(o)),s&&(i=i.replace(h,""))}),{keyword:i.trim(),refinements:j,folders:k,typeTag:l})}function i(a,b,c){a=a||{},this.suggestion=a.suggestion,this.displayName=a.displayName,this.isSavedSearch=a.isSavedSearch,this.view=a.view||"",a.shouldParseKeyword?j.assign(this,h(a,b||[],c||[])):(this.keyword=a.keyword||"",this.refinements=a.refinements||[],this.folders=a.folders||[],this.smartviews=a.smartviews||[],this.typeTag=a.typeTag||"")}var j=a("lodash"),k=a("ObjectUtils"),l=a("../../../artifacts/lang"),m=yui.common.Utils.features,n=a("FolderStore"),o=a("AppDispatcher"),p=a("SearchConstants"),q=yui.common.Utils.features,r=q.enabled("searchRightFolderList"),s=q.enabled("searchTwoBoxes"),t=/\bOR\b|\bAND\b|\([^()]+\b[^()]+\)|\s\-|^\-|\s\+|^\+/i;i.prototype={getSuggestionQueryFragment:function(){var a,b=this;return b.suggestion?(a=b.suggestion.displayStr,a.indexOf(" ")>-1&&(a='"'+a+'"'),"(from:"+a+" recipient:"+a+")"):""},getRefinementsQueryFragments:function(){return this.refinements.map(function(a){var b=a.split(":");return b[1].indexOf(" ")>-1&&!/^\".*\"$/.test(b[1])&&(b[1]='"'+b[1].replace(/\"/g,'\\"')+'"'),b.join(":")})},getHumanReadableSuggestionString:function(){var a=this.suggestion;return a&&a.displayStr?s?a.displayStr+" |":a.displayStr:""},isEmpty:function(){var a=this;return!a.keyword&&!a.suggestion&&!a.view&&a.folders&&0===a.folders.length&&a.smartviews&&0===a.smartviews.length&&a.refinements&&0===a.refinements.length},isKeywordOnly:function(){var a=this;return!a.suggestion&&a.folders&&0===a.folders.length&&a.refinements&&0===a.refinements.length},toString:function(){var a=this,b=[],c=this.getFolderScope();return b.push(a.getHumanReadableSuggestionString()),b=b.concat(a.getRefinementsQueryFragments()),b.push(a.keyword),b.push(c),this.smartviews&&this.smartviews.length&&b.push(this.smartviews[0].displayName),b.join(" ").trim()||l.str_all},toQueryString:function(){var a=this,b=[],c=this.getFolderScope();return b.push(a.getSuggestionQueryFragment()),b.push.apply(b,a.getRefinementsQueryFragments()),b.push(a.keyword),b.push(c),b.join(" ").trim()},toHumanReadableString:function(){var a=this,b=[];return a.displayName?a.displayName:(b.push(a.getHumanReadableFoldersString()),b.push(a.getHumanReadableSmartViewString()),b.push(a.getHumanReadableRefinementsString()),b.push(a.getHumanReadableSuggestionString()),b.push(a.keyword),j.compact(b).join(" ").trim()||a.toString())},getHumanReadableAccountsString:function(a){var b=this,c=[],d=j.filter(b.folders,function(a){return a.acctIds&&a.acctIds.length});return d.length&&(c=j.map(a,function(a){return a.id===k.getValue(d,"0.acctIds.0")?a.description:""})||[]),j.compact(c).join(" ")},getHumanReadableFoldersString:function(){var a=this,b=[],c=j.filter(a.folders,function(a){return a.folderIds});return b=c.map(function(a){return a.displayName})||[],b.join(" ")},getHumanReadableSmartViewString:function(){var a=this,b=[];return b=a.smartviews.map(function(a){return a.displayName})||[],b.join(" ")},getHumanReadableRefinementsString:function(){var a,b=this,c=b.getRefinementsQueryFragments(),d=[];return d=j.chain(c).map(function(b){return b?(a=b.split(":"),l["str_"+a[1].toLowerCase()]||a[1]):void 0}).value(),d.join(" ")},getFolderScope:function(){var a=o.context.getStore(n);return j.chain(this.folders).map(function(a){return a.folderIds}).compact().flatten().map(function(b){var c=a.findByIndex(b),d=c&&(c.isSystem?n.normalizeFid(c.folderInfo.fid):c.folderInfo.name);return d?"in:"+(d.indexOf(" ")>-1?'"'+d+'"':d):""}).join(" ").value()}},b.exports=i},{"../../../artifacts/lang":2,AppDispatcher:"AppDispatcher",FolderStore:"FolderStore",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",lodash:"lodash"}],SearchUtils:[function(a,b,c){"use strict";var d,e=a("ObjectUtils");d={generateSmartViewId:function(a){var b=e.getValue;return JSON.stringify({keyword:b(a,"keyword",""),refinements:b(a,"refinements",[]),folders:b(a,"folders",[]),smartviews:b(a,"smartviews",[]),emailAddresses:b(a,["suggestion","emailAddresses",0])})},generateSearchID:function(a,b,c){var d=e.getValue;return JSON.stringify({keyword:d(a,"keyword"),refinements:d(a,"refinements"),folders:d(a,"folders"),smartviews:d(a,"smartviews"),serviceId:d(a,"suggestion.serviceId"),emailAddresses:d(a,"suggestion.emailAddresses"),sortType:b,sortOrder:c})}},b.exports=d},{ObjectUtils:"ObjectUtils"}]},{},[12]);